{"meta":{"reportkey":"csv_custpos_en","nervatype":"report","repname":"Payments Due List - CSV output","description":"Accounts Payable and Receivable.","label":"Invoice","filetype":"csv"},"details":[{"columns":["duedate","transdate","invoice_no","customer","curr","sum_amount","paid_amount","overdue","days"],"name":"payable","databind":"suppliers"},{"columns":["duedate","transdate","invoice_no","customer","curr","sum_amount","paid_amount","overdue","days"],"name":"receivable","databind":"customers"}],"sources":{"customers":{"default":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , cast(t.duedate as date)-@posdate as days , case when cast(t.duedate as date)-@posdate<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='out' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by (cast(t.duedate as date)-@posdate), t.duedate, t.id","mssql":"select t.transnumber as invoice_no , custname.value as customer , CONVERT(VARCHAR(10), t.transdate, 120) as transdate , CONVERT(VARCHAR(10), t.duedate, 120) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , DATEDIFF(day,@posdate,t.duedate) as days , case when DATEDIFF(day,@posdate,t.duedate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='out' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by DATEDIFF(day,@posdate,t.duedate), t.duedate, t.id","mysql":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , DATEDIFF(t.duedate,@posdate) as days , case when DATEDIFF(t.duedate,@posdate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as decimal)*cast(lrate.value as decimal)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='out' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by DATEDIFF(t.duedate,@posdate), t.duedate, t.id","sqlite":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , julianday(t.duedate)-julianday(@posdate) as days , case when julianday(t.duedate)-julianday(@posdate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and julianday(pm.paiddate)<=julianday(@posdate) group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='out' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by (julianday(t.duedate)-julianday(@posdate)), t.duedate, t.id"},"suppliers":{"default":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , cast(t.duedate as date)-@posdate as days , case when cast(t.duedate as date)-@posdate<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='in' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by (cast(t.duedate as date)-@posdate), t.duedate, t.id","mssql":"select t.transnumber as invoice_no , custname.value as customer , CONVERT(VARCHAR(10), t.transdate, 120) as transdate , CONVERT(VARCHAR(10), t.duedate, 120) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , DATEDIFF(day,@posdate,t.duedate) as days , case when DATEDIFF(day,@posdate,t.duedate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='in' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by DATEDIFF(day,@posdate,t.duedate), t.duedate, t.id","mysql":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , DATEDIFF(t.duedate,@posdate) as days , case when DATEDIFF(t.duedate,@posdate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as decimal)*cast(lrate.value as decimal)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and pm.paiddate<=@posdate group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='in' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by DATEDIFF(t.duedate,@posdate), t.duedate, t.id","sqlite":"select t.transnumber as invoice_no , custname.value as customer , t.transdate , substr(cast(t.duedate as char(10)), 1, 10) as duedate , t.curr as curr, case when msp.msg is null then ptg.groupvalue else msp.msg end as paidtypedesc , tsum.sum_amount , case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as paid_amount , tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end as pdiff , julianday(t.duedate)-julianday(@posdate) as days , case when julianday(t.duedate)-julianday(@posdate)<0 then tsum.sum_amount-case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end else 0 end as overdue from trans t inner join groups dir on t.direction=dir.id inner join groups ttype on t.transtype=ttype.id inner join groups ptg on t.paidtype = ptg.id left join ui_message msp on msp.fieldname = ptg.groupvalue and  msp.secname = 'paidtype' and msp.lang = 'en' inner join fieldvalue custname on t.id = custname.ref_id and custname.fieldname='trans_custinvoice_custname' left join (select ti.trans_id as id, sum(ti.amount) as sum_amount from item ti where ti.deleted=0 group by ti.trans_id ) as tsum on tsum.id = t.id left join (select l.ref_id_2 as trans_id, sum(cast(iamount.value as REAL)*cast(lrate.value as REAL)) as paid_amount from link l inner join payment pm on l.ref_id_1=pm.id and pm.deleted=0 left join fieldvalue lrate on lrate.fieldname='link_rate' and lrate.ref_id=l.id left join fieldvalue iamount on iamount.fieldname='link_qty' and iamount.ref_id=l.id where l.deleted=0 and l.nervatype_1 in(select id from groups where groupname='nervatype' and groupvalue='payment') and l.nervatype_2 in(select id from groups where groupname='nervatype' and groupvalue='trans') and julianday(pm.paiddate)<=julianday(@posdate) group by l.ref_id_2) as tpaid on tpaid.trans_id=t.id where t.deleted=0 and t.paid=0 and ttype.groupvalue='invoice' and dir.groupvalue='in' and tsum.sum_amount<>case when tpaid.paid_amount is null then 0 else tpaid.paid_amount end @where_str order by (julianday(t.duedate)-julianday(@posdate)), t.duedate, t.id"}},"fields":{"posdate":{"fieldtype":"date","wheretype":"in","description":"Date","orderby":0,"defvalue":"0"},"curr":{"fieldtype":"string","wheretype":"where","description":"Currency","orderby":1},"transdate_from":{"fieldtype":"date","wheretype":"where","description":"Inv. Date >=","orderby":2,"sqlstr":" t.transdate >= @transdate_from"},"transdate_to":{"fieldtype":"date","wheretype":"where","description":"Inv. Date <=","orderby":3,"sqlstr":" t.transdate <= @transdate_to"},"duedate_from":{"fieldtype":"date","wheretype":"where","description":"Due Date >=","orderby":4,"sqlstr":" t.duedate >= @duedate_from"},"duedate_to":{"fieldtype":"date","wheretype":"where","description":"Due Date <=","orderby":5,"sqlstr":" t.duedate <= @duedate_to"},"customer":{"fieldtype":"string","wheretype":"where","description":"Customer/Supplier","orderby":6,"sqlstr":" custname.value like @customer"}},"data":{"labels":{"duedate":"Due Date","transdate":"Invoice Date","invoice_no":"Invoice No.","customer":"Customer","curr":"Currency","sum_amount":"Amount","paid_amount":"Paid","overdue":"Overdue","days":"Days"}}}