import{a as e}from"./main-BEo7670f.js";import"./module-FRmUNWHB.js";import"./module-CC7fmSsS.js";import"./module-C1fQGCtD.js";const t=t=>{const{getSetting:a,msg:l}=t,n=e=>l(e,{id:e});return{address:e=>{let t={options:{title:n("address_view"),title_field:"",icon:"Home",panel:{}},rows:[{rowtype:"col3",columns:[{name:"country",label:n("address_country"),datatype:"string"},{name:"state",label:n("address_state"),datatype:"string"},{name:"zipcode",label:n("address_zipcode"),datatype:"string"}]},{rowtype:"field",name:"city",label:n("address_city"),datatype:"string"},{rowtype:"field",name:"street",label:n("ddress_street"),datatype:"string"},{rowtype:"field",name:"notes",label:n("address_notes"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},bank:(t,a)=>{let l={options:{title:n("title_bank"),title_field:"transnumber",icon:"Money",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"document/payment"}},view:{payment:{type:"table",icon:"ListOl",title:n("item_view"),data:"payment",total:{expense:n("payment_expense"),income:n("payment_income"),balance:n("payment_balance")},fields:{rid:{fieldtype:"number",label:n("payment_item")},paiddate:{fieldtype:"date",label:n("payment_paiddate2")},amount:{fieldtype:"number",label:n("payment_amount")},notes:{fieldtype:"string",label:n("payment_description")}}},payment_link:{type:"list",data:"payment_link",icon:"FileText",title:n("invoice_view"),actions:{new:null,edit:{action:e.EDIT_EDITOR_ITEM,fkey:"payment_link"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"crdate",label:n("bank_crdate"),datatype:"date",disabled:!1},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"transdate",label:n("bank_transdate"),datatype:"date"},{name:"place_id",label:n("payment_place_bank"),datatype:"selector",empty:!1,map:{seltype:"place_bank",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==t&&(null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:a.dataset.translink.length>0&&(l.rows[0].columns[0]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}})),l},barcode:e=>{let t={options:{title:n("barcode_view"),title_field:"",icon:"Barcode",panel:{}},rows:[{rowtype:"field",name:"code",label:n("barcode_code"),datatype:"string"},{rowtype:"col3",columns:[{name:"barcodetype",label:n("barcode_barcodetype"),datatype:"select",map:{source:"barcodetype",value:"id",text:"description"}},{name:"qty",label:n("barcode_qty"),datatype:"float"},{name:"defcode",label:n("barcode_defcode"),datatype:"flip"}]},{rowtype:"field",name:"description",label:n("barcode_description"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},cash:(t,a)=>{let l={options:{title:n("title_cash"),title_field:"transnumber",icon:"Money",fieldvalue:!0,pattern:!0,extend:"payment",panel:{arrow:!0,more:!0,trans:!0,create:!1,cancellation:!0,bookmark:["editor","trans","transnumber"],help:"document/payment",link:!0,link_type:"payment_link",link_field:"ref_id_1",link_label:n("label_link_invoice")}},view:{payment_link:{type:"list",data:"payment_link",icon:"FileText",title:n("invoice_view"),actions:{new:null,edit:{action:e.EDIT_EDITOR_ITEM,fkey:"payment_link"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:n("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:n("document_closed"),datatype:"flip"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"direction",label:n("document_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"cash"}},{name:"id",label:n("payment_paiddate"),datatype:"date",map:{source:"payment",value:"trans_id",text:"paiddate",extend:!0}},{name:"id",label:n("payment_amount"),datatype:"float",opposite:!0,map:{source:"payment",value:"trans_id",text:"amount",extend:!0}}]},{rowtype:"col2",columns:[{name:"place_id",label:n("payment_place_cash"),datatype:"selector",empty:!1,map:{seltype:"place_cash",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}}]},{rowtype:"col2",columns:[{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"intnotes",label:n("document_intnotes"),datatype:"text"}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"}]};if(void 0!==t){"out"===a.dataset.groups.filter((e=>e.id===t.direction))[0].groupvalue&&(l={...l,options:{...l.options,opposite:!0}}),null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1,link:!1}}}:(l.rows[1].columns[0]={...l.rows[1].columns[0],disabled:!0},a.dataset.translink.length>0?l.rows[3].columns[0]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}:a.dataset.cancel_link.length>0&&(l.rows[3].columns[0]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}}))}return l},contact:e=>{let t={options:{title:n("contact_view"),title_field:"",icon:"Phone",panel:{}},rows:[{rowtype:"col2",columns:[{name:"firstname",label:n("contact_firstname"),datatype:"string"},{name:"surname",label:n("contact_surname"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"status",label:n("contact_status"),datatype:"string"},{name:"phone",label:n("contact_phone"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"mobil",label:n("contact_mobil"),datatype:"string"},{name:"fax",label:n("contact_fax"),datatype:"string"}]},{rowtype:"field",name:"email",label:n("contact_email"),datatype:"string"},{rowtype:"field",name:"notes",label:n("contact_notes"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},currency:t=>{let a={options:{icon:"Dollar",data:"currency",title:n("title_currency"),panel:{page:"setting",more:!1,help:"settings/currency"}},view:{setting:{type:"table",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}},fields:{curr:{fieldtype:"string",label:n("currency_curr")},description:{fieldtype:"string",label:n("currency_description")},digit:{fieldtype:"number",label:n("currency_digit")},cround:{fieldtype:"number",label:n("currency_cround")},defrate:{fieldtype:"number",label:n("currency_defrate")}}}},rows:[{rowtype:"col2",columns:[{name:"curr",label:n("currency_curr"),datatype:"string"},{name:"description",label:n("currency_description"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"digit",label:n("currency_digit"),datatype:"integer"},{name:"cround",label:n("currency_cround"),datatype:"integer"},{name:"defrate",label:n("currency_defrate"),datatype:"float"}]}]};return void 0!==t&&(null!==t.id?a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0}:a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),a},customer:(t,a)=>{let l={options:{title:n("title_customer"),title_field:"custnumber",icon:"User",fieldvalue:!0,panel:{more:!0,bookmark:["editor","customer","custname","custnumber"],help:"resources/customer"}},view:{address:{type:"list",data:"address",icon:"Home",title:n("address_view")},contact:{type:"list",data:"contact",icon:"Phone",title:n("contact_view")},event:{type:"list",data:"event",icon:"Calendar",title:n("event_view"),actions:{new:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},edit:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"event",table:"event"}}}},rows:[{rowtype:"field",name:"custname",label:n("customer_custname"),datatype:"string"},{rowtype:"col3",columns:[{name:"custnumber",label:n("customer_custnumber"),datatype:"string"},{name:"taxnumber",label:n("customer_taxnumber"),datatype:"string"},{name:"account",label:n("customer_account"),datatype:"string"}]}]};return void 0!==t&&(void 0!==a.dataset.custtype&&(t.custtype===a.dataset.groups.filter((e=>"custtype"===e.groupname&&"own"===e.groupvalue))[0].id?l={...l,options:{...l.options,title:n("title_company"),icon:"Home",panel:{...l.options.panel,new:!1,delete:!1}}}:l.rows=[...l.rows,{rowtype:"col3",columns:[{name:"creditlimit",label:n("customer_creditlimit"),datatype:"float"},{name:"terms",label:n("customer_terms"),datatype:"integer"},{name:"discount",label:n("customer_discount"),datatype:"float",min:0,max:100}]},{rowtype:"col3",columns:[{name:"custtype",label:n("customer_custtype"),datatype:"select",map:{source:"custtype",value:"id",text:"groupvalue"}},{name:"inactive",label:n("customer_inactive"),datatype:"flip"},{name:"notax",label:n("customer_notax"),datatype:"flip"}]}],l.rows=[...l.rows,{rowtype:"field",name:"notes",label:n("customer_notes"),datatype:"text"}]),null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,new:!1,delete:!1,report:!1,bookmark:!1}}}:l.rows[1]={...l.rows[1],columns:l.rows[1].columns.slice(1,l.rows[1].columns.length),rowtype:"col2"}),l},deffield:(t,a)=>{let l={options:{icon:"Tag",data:"deffield",title:n("title_deffield"),panel:{page:"setting",more:!1,help:"settings/metadata"}},view:{setting:{type:"list",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}}}},rows:[{rowtype:"field",name:"fieldname",label:n("deffield_fieldname"),datatype:"string",disabled:!0},{rowtype:"col2",columns:[{name:"nervatype",label:n("deffield_nervatype"),datatype:"select",empty:!0,map:{source:"nervatype",value:"id",text:"groupvalue"}},{name:"fieldtype",label:n("deffield_fieldtype"),datatype:"select",empty:!0,map:{source:"fieldtype",value:"id",text:"groupvalue"}}]},{rowtype:"field",name:"description",label:n("deffield_description"),datatype:"string"},{rowtype:"col3",columns:[{name:"addnew",label:n("deffield_addnew"),datatype:"flip"},{name:"visible",label:n("deffield_visible"),datatype:"flip"},{name:"readonly",label:n("deffield_readonly"),datatype:"flip"}]}]};return void 0!==t&&(null!==t.id?(l.rows[1].columns[0]={...l.rows[1].columns[0],disabled:!0},l.rows[1].columns[1]={...l.rows[1].columns[1],disabled:!0},t.fieldtype===a.dataset.fieldtype.filter((e=>"valuelist"===e.groupvalue))[0].id&&(l.rows=[...l.rows,{rowtype:"field",name:"valuelist",label:n("deffield_valuelist"),datatype:"text"}])):l={...l,options:{...l.options,panel:{...l.options.panel,new:!1,delete:!1}}}),l},delivery:(e,t)=>{let a={options:{title:n("title_delivery"),title_field:"transnumber",icon:"Truck",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,copy:!1,cancellation:!0,delete:!1,new:!1,bookmark:["editor","trans","transnumber"],help:"stock/delivery"}},view:{movement:{type:"table",icon:"ListOl",title:n("item_view"),data:"movement",edited:!1,fields:{product:{fieldtype:"string",label:n("product_description")},unit:{fieldtype:"string",label:n("product_unit")},notes:{fieldtype:"string",label:n("movement_batchnumber")},qty:{fieldtype:"number",label:n("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("delivery_direction"),datatype:"string",map:{source:"groups",value:"id",text:"groupvalue",label:"delivery"}},{name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"movement",value:"trans_id",text:"item_ref_id",label_field:"item_refnumber",lnktype:"trans",transtype:"order"}},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("delivery_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("delivery_transdate"),datatype:"date",disabled:!0},{name:"id",label:n("delivery_place"),datatype:"string",map:{source:"movement",value:"trans_id",text:"planumber"}}]}]};if(void 0!==e){"transfer"===t.dataset.groups.filter((t=>t.id===e.direction))[0].groupvalue&&(t.dataset.translink&&t.dataset.translink.length>0?a.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:t.dataset.translink[0].transtype}}:t.dataset.cancel_link&&t.dataset.cancel_link.length>0?a.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:t.dataset.cancel_link[0].transtype}}:a.rows[0].columns[1]={name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},a.rows[1].columns[1]={...a.rows[1].columns[1],disabled:!1},a.rows[1].columns[2]={name:"closed",label:n("document_closed"),datatype:"flip"},a.rows=[...a.rows,{rowtype:"col2",columns:[{name:"place_id",label:n("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"target_place",label:n("movement_target"),datatype:"selector",empty:!1,disabled:!0,map:{seltype:"place_warehouse",table:"trans",fieldname:"target_place",lnktype:"place",transtype:"",label_field:"target_planumber"}}]}],null===e.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:(a={...a,options:{...a.options,panel:{...a.options.panel,copy:!0,new:!0}},view:{...a.view,movement:{...a.view.movement,edit:!0,data:"movement_transfer"}}},a.rows[2].columns[0]={...a.rows[2].columns[0],disabled:!0})),a.rows=[...a.rows,{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]}return a},discount:e=>{let t={options:{title:n("discount_view"),title_field:"",icon:"Dollar",panel:{}},rows:[{rowtype:"col3",columns:[{name:"validfrom",label:n("price_validfrom"),datatype:"date"},{name:"validto",label:n("price_validto"),datatype:"date",empty:!0},{name:"vendor",label:n("price_vendor"),datatype:"flip"}]},{rowtype:"col3",columns:[{name:"curr",label:n("price_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"qty",label:n("price_qty"),datatype:"float"},{name:"pricevalue",label:n("price_limit"),datatype:"float"}]},{rowtype:"col2",columns:[{name:"calcmode",label:n("price_calcmode"),datatype:"select",map:{source:"calcmode",value:"id",text:"description"}},{name:"discount",label:n("price_discount"),datatype:"float"}]},{rowtype:"field",name:"id",label:n("customer_custname"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"discount",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}}]};return void 0!==e&&null===e.id&&(t={...t,options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},employee:t=>{let a={options:{title:n("title_employee"),title_field:"empnumber",icon:"Male",extend:"contact",fieldvalue:!0,panel:{more:!0,password:!0,bookmark:["editor","employee","empnumber","empnumber"],help:"resources/employee"}},view:{address:{type:"list",data:"address",icon:"Home",title:n("address_view")},event:{type:"list",data:"event",icon:"Calendar",title:n("event_view"),actions:{new:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},edit:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"empnumber",label:n("employee_empnumber"),datatype:"string"},{name:"id",label:n("contact_firstname"),datatype:"string",map:{source:"contact",value:"ref_id",text:"firstname",extend:!0}},{name:"id",label:n("contact_surname"),datatype:"string",map:{source:"contact",value:"ref_id",text:"surname",extend:!0}}]},{rowtype:"col3",columns:[{name:"id",label:n("contact_status"),datatype:"string",map:{source:"contact",value:"ref_id",text:"status",extend:!0}},{name:"id",label:n("contact_phone"),datatype:"string",map:{source:"contact",value:"ref_id",text:"phone",extend:!0}},{name:"id",label:n("contact_mobil"),datatype:"string",map:{source:"contact",value:"ref_id",text:"mobil",extend:!0}}]},{rowtype:"col2",columns:[{name:"id",label:n("contact_email"),datatype:"string",map:{source:"contact",value:"ref_id",text:"email",extend:!0}},{name:"registration_key",label:n("employee_registration_key"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"startdate",label:n("employee_startdate"),datatype:"date",empty:!0},{name:"enddate",label:n("employee_enddate"),datatype:"date",empty:!0},{name:"department",label:n("employee_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col3",columns:[{name:"usergroup",label:n("employee_usergroup"),datatype:"select",empty:!1,map:{source:"usergroup",value:"id",text:"groupvalue"}},{name:"username",label:n("employee_username"),datatype:"string"},{name:"inactive",label:n("employee_inactive"),datatype:"flip"}]},{rowtype:"field",name:"id",label:n("employee_notes"),datatype:"text",map:{source:"contact",value:"ref_id",text:"notes",extend:!0}}]};return void 0!==t&&(null===t.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1,report:!1,bookmark:!1,password:!1}}}:a.rows[0]={...a.rows[0],columns:a.rows[0].columns.slice(1,a.rows[0].columns.length),rowtype:"col2"}),a},event:e=>{let t={options:{title:n("title_event"),title_field:"calnumber",icon:"Calendar",fieldvalue:!0,panel:{back:!0,more:!0,bookmark:["editor","event","calnumber","calnumber"],help:"resources/event",export_event:!0,report:!1}},view:{},rows:[{rowtype:"field",name:"subject",label:n("event_subject"),datatype:"string"},{rowtype:"col2",columns:[{name:"place",label:n("event_place"),datatype:"string"},{name:"eventgroup",label:n("event_group"),datatype:"select",empty:!0,map:{source:"eventgroup",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"fromdate",label:n("event_fromdate"),datatype:"datetime",empty:!0},{name:"todate",label:n("event_todate"),datatype:"datetime",empty:!0}]},{rowtype:"field",name:"description",label:n("event_description"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,view:{},options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1,report:!1,bookmark:!1,export_event:!1}}}),t},formula:(e,t)=>{let a={options:{title:n("title_formula"),title_field:"transnumber",icon:"Magic",fieldvalue:!0,pattern:!0,extend:"movement_head",panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"stock/formula"}},view:{movement:{type:"table",icon:"ListOl",title:n("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:n("product_description")},unit:{fieldtype:"string",label:n("product_unit")},cb_shared:{fieldtype:"bool",label:n("formula_shared")},qty:{fieldtype:"number",label:n("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:n("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:n("document_closed"),datatype:"flip"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement_head",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product",extend:!0}},{rowtype:"col2",columns:[{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"qty",label:n("movement_qty"),datatype:"float",map:{text:"qty",extend:!0}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"intnotes",name:"notes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==e&&(null===e.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,password:!1,trans:!1}}}:t.dataset.translink.length>0&&(a.rows[2].columns[0]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:t.dataset.translink[0].transtype}})),a},groups:t=>{let a={options:{icon:"Th",data:"groups",title:n("title_groups"),panel:{page:"setting",more:!1,help:"settings/groups"}},view:{setting:{type:"list",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}}}},rows:[{rowtype:"field",name:"groupvalue",label:n("groups_groupvalue"),datatype:"string"},{rowtype:"col2",columns:[{name:"groupname",label:n("groups_groupname"),datatype:"select",default:"",options:[["",""],["department","department"],["eventgroup","eventgroup"],["paidtype","paidtype"],["toolgroup","toolgroup"],["rategroup","rategroup"]]},{name:"inactive",label:n("groups_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:n("groups_description"),datatype:"text"}]};return void 0!==t&&(null!==t.id?a.rows[1].columns[0]={...a.rows[1].columns[0],disabled:!0}:a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),a},inventory:e=>{let t={options:{title:n("title_inventory"),title_field:"transnumber",icon:"Truck",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,cancellation:!0,delete:!1,bookmark:["editor","trans","transnumber"],help:"stock/inventory"}},view:{movement:{type:"table",icon:"ListOl",title:n("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:n("product_description")},unit:{fieldtype:"string",label:n("product_unit")},notes:{fieldtype:"string",label:n("movement_batchnumber")},qty:{fieldtype:"number",label:n("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"place_id",label:n("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("delivery_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("inventory_posdate"),datatype:"date"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,view:{},options:{...t.options,panel:{...t.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}),t},invoice_link:e=>{let t={options:{data:"link",title:n("payment_view"),title_field:"",icon:"Money",panel:{}},rows:[{rowtype:"field",name:"ref_id_1",label:n("payment_paidnumber"),datatype:"selector",empty:!1,map:{seltype:"payment",table:"invoice_link",fieldname:"ref_id_1",lnktype:"trans",transtype:"",lnkid:"trans_id",label_field:"transnumber"}},{rowtype:"col3",columns:[{name:"id",label:n("payment_curr"),datatype:"string",map:{source:"invoice_link",value:"id",text:"curr"}},{name:"link_qty",label:n("payment_amount"),datatype:"float",map:{source:"invoice_link_fieldvalue",value:"fieldname",text:"value"}},{name:"link_rate",label:n("payment_rate"),datatype:"float",map:{source:"invoice_link_fieldvalue",value:"fieldname",text:"value"}}]}]};return void 0!==e&&null===e.id&&(t={...t,options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},invoice:(t,a)=>{let l={options:{title:n("title_invoice"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}},invoice_link:{type:"list",data:"invoice_link",icon:"Money",title:n("payment_view"),actions:{new:{action:e.NEW_EDITOR_ITEM,fkey:"invoice_link"},edit:{action:e.EDIT_EDITOR_ITEM,fkey:"invoice_link"},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"invoice_link",table:"link"}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:n("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("invoce_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"invoice"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("invoice_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("invoice_transdate"),datatype:"date"},{name:"duedate",label:n("invoice_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:n("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("document_acrate"),datatype:"float",default:0},{name:"paid",label:n("invoice_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};if(void 0!==t)if(null===t.id)l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}};else{l.rows[0].columns[0]={...l.rows[0].columns[0],disabled:!0},a.dataset.translink.length>0?l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}:a.dataset.cancel_link.length>0&&(l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}});"out"===a.dataset.groups.filter((e=>e.id===t.direction))[0].groupvalue&&"normal"===t.transcast&&(l=0===t.deleted?{...l,options:{...l.options,panel:{...l.options.panel,corrective:!0}}}:{...l,options:{...l.options,panel:{...l.options.panel,cancellation:!0}}})}return l},item:(e,t)=>{let a={options:{title:n("item_view"),title_field:"",icon:"ListOl",panel:{help:"document/item"}},rows:[{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product",table:"item",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"partnumber"}},{rowtype:"field",name:"description",label:n("item_description"),datatype:"text"},{rowtype:"col2",columns:[{name:"unit",label:n("item_unit"),datatype:"string"},{name:"ownstock",label:n("item_ownstock"),datatype:"float"}]},{rowtype:"col3",columns:[{name:"qty",label:n("item_qty"),datatype:"float"},{name:"discount",label:n("item_discount"),datatype:"float",min:0,max:100},{name:"fxprice",label:n("item_fxprice"),datatype:"float"}]},{rowtype:"col3",columns:[{name:"netamount",label:n("item_netamount"),datatype:"float"},{name:"tax_id",label:n("item_taxcode"),datatype:"select",empty:!0,map:{source:"tax",value:"id",text:"taxcode"}},{name:"amount",label:n("item_amount"),datatype:"float"}]}]};if(void 0!==e)switch(null===e.id&&(a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),t.current.transtype){case"invoice":a.rows[2]={rowtype:"col3",columns:[{name:"unit",label:n("item_unit"),datatype:"string"},{name:"ownstock",label:n("item_ownstock"),datatype:"float"},{name:"deposit",label:n("item_deposit_1"),datatype:"flip"}]};break;case"offer":a.rows[2]={rowtype:"col3",columns:[{name:"unit",label:n("item_unit"),datatype:"string"},{name:"ownstock",label:n("item_ownstock"),datatype:"float"},{name:"deposit",label:n("item_deposit_2"),datatype:"flip"}]}}return a},log:()=>({options:{title:n("title_log"),title_field:"",edited:!1,icon:"InfoCircle",panel:{}},view:{setting:{type:"table",actions:{new:null,edit:null,delete:null},fields:{crdate:{fieldtype:"date",label:n("log_crdate")},empnumber:{fieldtype:"string",label:n("log_empnumber")},logstate:{fieldtype:"string",label:n("log_logstate")},nervatype:{fieldtype:"string",label:n("log_nervatype")},refnumber:{fieldtype:"string",label:n("log_refnumber")}}}},rows:[{rowtype:"col3",columns:[{name:"fromdate",label:n("log_fromdate"),datatype:"date"},{name:"todate",label:n("log_todate"),datatype:"date",empty:!0},{name:"empnumber",label:n("log_empnumber"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"logstate",label:n("log_logstate"),datatype:"select",empty:!1,options:[["update","update"],["closed","closed"],["deleted","deleted"],["print","print"],["login","login"],["logout","logout"]]},{name:"nervatype",label:n("log_nervatype"),datatype:"select",default:"",options:[["",""],["customer","customer"],["employee","employee"],["event","event"],["place","place"],["product","product"],["project","project"],["tool","tool"],["trans","trans"]]},{name:"log_search",title:n("browser_search"),label:"",focus:!0,class:"full",icon:"Search",datatype:"button"}]}]}),movement:(e,t)=>{let a={options:{title:n("movement_view"),title_field:"",icon:"Truck",opposite:!0,panel:{}}};switch(t.current.transtype){case"delivery":a.rows=[{rowtype:"col2",columns:[{name:"place_id",label:n("movement_target"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"trans_id",label:n("movement_place"),datatype:"link",map:{source:"trans",value:"id",text:"place_id",label_field:"planumber",lnktype:"place",transtype:""}}]},{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"trans_id",label:n("movement_shippingdate"),datatype:"date",map:{source:"trans",value:"id",text:"transdate"}},{name:"notes",label:n("movement_batchnumber"),datatype:"string"},{name:"qty",label:n("movement_qty"),datatype:"float"}]}];break;case"inventory":a.rows=[{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"trans_id",label:n("movement_shippingdate"),datatype:"date",map:{source:"trans",value:"id",text:"transdate"}},{name:"notes",label:n("movement_batchnumber"),datatype:"string"},{name:"qty",label:n("movement_qty"),datatype:"float"}]}];break;case"production":a.rows=[{rowtype:"col2",columns:[{name:"shippingdate",label:n("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"place_id",label:n("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col2",columns:[{name:"notes",label:n("movement_batchnumber"),datatype:"string"},{name:"qty",label:n("movement_qty"),datatype:"float",opposite:!0}]}];break;case"formula":a.rows=[{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"qty",label:n("movement_qty"),datatype:"float"},{name:"shared",label:n("formula_shared"),datatype:"flip"},{name:"place_id",label:n("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"}];break;case"waybill":a.rows=[{rowtype:"col2",columns:[{name:"shippingdate",label:n("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"tool_id",label:n("tool_serial"),datatype:"selector",empty:!1,map:{seltype:"tool",table:"movement",fieldname:"tool_id",lnktype:"tool",transtype:"",label_field:"serial"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"}]}return void 0!==e&&null===e.id&&(a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),a},numberdef:()=>({options:{icon:"ListOl",data:"numberdef",title:n("title_numberdef"),panel:{page:"setting",delete:!1,new:!1,more:!1,help:"settings/numberdef"}},view:{setting:{type:"table",actions:{new:null,edit:{action:e.EDIT_ITEM},delete:null},fields:{numberkey:{fieldtype:"string",label:n("numberdef_numberkey")},prefix:{fieldtype:"string",label:n("numberdef_prefix")},is_year:{fieldtype:"string",label:n("numberdef_isyear"),align:"center"},sep:{fieldtype:"string",label:n("numberdef_sep_short"),align:"center"},len:{fieldtype:"number",label:n("numberdef_len")},curvalue:{fieldtype:"number",align:"right",label:n("numberdef_curvalue")}}}},rows:[{rowtype:"field",name:"numberkey",label:n("numberdef_numberkey"),datatype:"string",disabled:!0},{rowtype:"col2",columns:[{name:"prefix",label:n("numberdef_prefix"),datatype:"string"},{name:"curvalue",label:n("numberdef_curvalue"),datatype:"integer"}]},{rowtype:"col3",columns:[{name:"isyear",label:n("numberdef_isyear"),datatype:"flip"},{name:"sep",label:n("numberdef_sep"),datatype:"string",length:1},{name:"len",label:n("numberdef_len"),datatype:"integer"}]},{rowtype:"field",name:"description",label:n("numberdef_description"),datatype:"text"}]}),offer:(e,t)=>{let a={options:{title:n("title_offer"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("offer_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"offer"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("offer_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("offer_transdate"),datatype:"date"},{name:"duedate",label:n("offer_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:n("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("offer_acrate"),datatype:"float",default:0},{name:"paid",label:n("offer_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==e&&(null===e.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:(a.rows[0].columns[0]={...a.rows[1].columns[0],disabled:!0},t.dataset.translink.length>0&&(a.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:t.dataset.translink[0].transtype}}))),a},order:(t,a)=>{let l={options:{title:n("title_order"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:n("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:n("shipping_view"),new_icon:"Truck",new_label:n("title_shipping"),actions:{new:{action:e.LOAD_SHIPPING},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:n("shipping_item_product")},movement_product:{fieldtype:"string",label:n("shipping_movement_product")},sqty:{fieldtype:"number",label:n("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:n("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("order_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"order"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("order_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("order_transdate"),datatype:"date"},{name:"duedate",label:n("order_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:n("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("order_acrate"),datatype:"float",default:0},{name:"paid",label:n("order_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==t&&(null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:(l.rows[0].columns[0]={...l.rows[0].columns[0],disabled:!0},a.dataset.translink.length>0&&(l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}))),l},password:()=>({options:{title:n("title_password"),title_field:"",edited:!1,icon:"Lock",panel:{delete:!1,new:!1}},view:{},rows:[{rowtype:"col3",columns:[{name:"username",label:n("password_username"),datatype:"string",disabled:!0},{name:"password_1",label:n("password_new"),datatype:"password"},{name:"password_2",label:n("password_verify"),datatype:"password"}]}]}),payment_link:e=>{let t={options:{data:"link",title:n("invoice_view"),title_field:"",icon:"FileText",panel:{new:!1}},rows:[{rowtype:"field",name:"ref_id_2",label:n("invoice_transnumber"),datatype:"selector",empty:!1,map:{seltype:"transitem_invoice",table:"payment_link",fieldname:"ref_id_2",lnktype:"trans",transtype:"invoice",lnkid:"trans_id",label_field:"transnumber"}},{rowtype:"col3",columns:[{name:"id",label:n("payment_curr"),datatype:"string",map:{source:"payment_link",value:"id",text:"curr"}},{name:"link_qty",label:n("payment_amount"),datatype:"float",map:{source:"payment_link_fieldvalue",value:"fieldname",text:"value"}},{name:"link_rate",label:n("payment_rate"),datatype:"float",map:{source:"payment_link_fieldvalue",value:"fieldname",text:"value"}}]}]};return void 0!==e&&null===e.id&&(t={...t,view:{},options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},payment:e=>{let t={options:{title:n("payment_view"),title_field:"",icon:"Money",panel:{link:!0,link_type:"payment_link",link_field:"ref_id_1",link_label:n("label_link_invoice")}},rows:[{rowtype:"col2",columns:[{name:"paiddate",label:n("payment_paiddate"),datatype:"date"},{name:"amount",label:n("payment_amount"),datatype:"float"}]},{rowtype:"field",name:"notes",label:n("payment_description"),datatype:"text"}]};return void 0!==e&&null===e.id&&(t={...t,view:{},options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1,link:!1}}}),t},place:(t,a)=>{let l={options:{title:n("title_place"),title_field:"planumber",icon:"Map",extend:"address",fieldvalue:!0,panel:{more:!0,report:!1,bookmark:["editor","place","description","planumber"],help:"settings/place"}},view:{setting:{type:"table",actions:{new:{action:e.EDIT_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM,tablename:"place"}},fields:{planumber:{fieldtype:"string",label:n("place_planumber")},place_type:{fieldtype:"string",label:n("place_placetype")},description:{fieldtype:"string",label:n("place_description")}}},contact:{type:"list",data:"contact",icon:"Phone",title:n("contact_view")}},rows:[{rowtype:"field",name:"description",label:n("place_description"),datatype:"string"},{rowtype:"col2",columns:[{name:"placetype",label:n("place_placetype"),datatype:"select",empty:!0,map:{source:"placetype",value:"id",text:"groupvalue"}},{name:"inactive",label:n("place_inactive"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"id",label:n("address_zipcode"),datatype:"string",map:{source:"address",value:"ref_id",text:"zipcode",extend:!0}},{name:"id",label:n("address_city"),datatype:"string",map:{source:"address",value:"ref_id",text:"city",extend:!0}}]},{rowtype:"field",name:"id",label:n("address_street"),datatype:"string",map:{source:"address",value:"ref_id",text:"street",extend:!0}},{rowtype:"field",name:"notes",label:n("place_notes"),datatype:"text"}]};if(void 0!==t)if(null===t.id)l={...l,view:{},options:{...l.options,panel:{...l.options.panel,new:!1,delete:!1,report:!1,bookmark:!1}}};else{let e;l.rows[1].columns[0]={...l.rows[1].columns[0],disabled:!0},e=a.dataset.placetype?a.dataset.placetype.filter((e=>"warehouse"===e.groupvalue))[0]:a.dataset.groups.filter((e=>"placetype"===e.groupname&&"warehouse"===e.groupvalue))[0],t.placetype!==e.id&&(l.rows[1]={...l.rows[1],rowtype:"col3",columns:[...l.rows[1].columns,{name:"curr",label:n("place_curr"),datatype:"select",empty:!1,map:{source:"currency",value:"curr",text:"curr"}}]})}return l},price:e=>{let t={options:{title:n("price_view"),title_field:"",icon:"Dollar",panel:{}},rows:[{rowtype:"col3",columns:[{name:"validfrom",label:n("price_validfrom"),datatype:"date"},{name:"validto",label:n("price_validto"),datatype:"date",empty:!0},{name:"vendor",label:n("price_vendor"),datatype:"flip"}]},{rowtype:"col3",columns:[{name:"curr",label:n("price_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"qty",label:n("price_qty"),datatype:"float"},{name:"pricevalue",label:n("price_pricevalue"),datatype:"float"}]},{rowtype:"field",name:"id",label:n("customer_custname"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"price",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}}]};return void 0!==e&&null===e.id&&(t={...t,view:{},options:{...t.options,panel:{...t.options.panel,new:!1,delete:!1}}}),t},printqueue:(t,a,l)=>({options:{search_form:!0,title:n("title_printqueue"),title_field:n("printqueue_head_title"),icon:"Filter",panel:{save:!1,new:!1,delete:!1,more:!0,report:!1,search:!0,export_all:!0,print:!1,bookmark:!1,help:"program/printqueue"}},view:{items:{type:"list",data:"items",icon:"Print",edit_icon:"Check",title:n("printqueue_selected_items"),actions:{new:null,edit:{action:e.EXPORT_QUEUE_ITEM},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"items",table:"ui_printqueue"}}}},rows:[{rowtype:"col3",columns:[{name:"nervatype",label:n("printqueue_type"),datatype:"select",empty:!0,options:l.printqueue_type},{name:"startdate",label:n("printqueue_startdate"),datatype:"date",empty:!0},{name:"enddate",label:n("printqueue_enddate"),datatype:"date",empty:!0}]},{rowtype:"col2",columns:[{name:"transnumber",label:n("printqueue_transnumber"),datatype:"string"},{name:"username",label:n("printqueue_username"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"mode",label:n("printqueue_mode"),datatype:"select",empty:!1,options:l.printqueue_mode},{name:"orientation",label:n("report_orientation"),datatype:"select",empty:!1,options:l.report_orientation,default:l.page_orient},{name:"size",label:n("report_size"),datatype:"select",empty:!1,options:l.report_size,default:l.page_size}]}]}),product:t=>{let a={options:{title:n("title_product"),title_field:"partnumber",icon:"ShoppingCart",fieldvalue:!0,panel:{more:!0,bookmark:["editor","product","description","partnumber"],help:"resources/product"}},view:{barcode:{type:"list",data:"barcode",icon:"Barcode",title:n("barcode_view")},price:{type:"table",icon:"Dollar",title:n("price_view"),data:"price",fields:{validfrom:{fieldtype:"date",label:n("price_validfrom")},curr:{fieldtype:"string",label:n("price_curr")},qty:{fieldtype:"number",label:n("price_qty")},pricevalue:{fieldtype:"number",label:n("price_pricevalue")}}},event:{type:"list",data:"event",icon:"Calendar",title:n("event_view"),actions:{new:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},edit:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"event",table:"event"}}}},rows:[{rowtype:"field",name:"description",label:n("product_description"),datatype:"string"},{rowtype:"col3",columns:[{name:"partnumber",label:n("product_partnumber"),datatype:"string"},{name:"protype",label:n("product_protype"),datatype:"select",map:{source:"protype",value:"id",text:"groupvalue"}},{name:"unit",label:n("product_unit"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"tax_id",label:n("product_tax"),datatype:"select",empty:!1,map:{source:"tax",value:"id",text:"taxcode"}},{name:"webitem",label:n("product_webitem"),datatype:"flip"},{name:"inactive",label:n("product_inactive"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:n("product_notes"),datatype:"text"}]};return void 0!==t&&(null===t.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1,report:!1,bookmark:!1}}}:(a.rows[1].columns[0]={...a.rows[1].columns[0],disabled:!0},a.rows[1].columns[1]={...a.rows[1].columns[1],disabled:!0})),a},production:(e,t)=>{let a={options:{title:n("title_production"),title_field:"transnumber",icon:"Flask",fieldvalue:!0,pattern:!0,extend:"movement_head",panel:{arrow:!0,more:!0,trans:!0,create:!1,formula:!0,bookmark:["editor","trans","transnumber"],help:"stock/production"}},view:{movement:{type:"table",icon:"ListOl",title:n("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:n("product_description")},unit:{fieldtype:"string",label:n("product_unit")},notes:{fieldtype:"string",label:n("movement_batchnumber")},opposite_qty:{fieldtype:"number",label:n("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:n("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:n("document_closed"),datatype:"flip"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col2",columns:[{name:"transdate",label:n("production_transdate"),datatype:"date"},{name:"duedate",label:n("production_duedate"),datatype:"datetime",empty:!1}]},{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement_head",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product",extend:!0}},{rowtype:"col2",columns:[{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"place_id",label:n("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"col2",columns:[{name:"batchnumber",label:n("movement_batchnumber"),datatype:"string",map:{text:"notes",extend:!0}},{name:"qty",label:n("movement_qty"),datatype:"float",map:{text:"qty",extend:!0}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==e&&(null===e.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:t.dataset.translink.length>0&&(a.rows[3].columns[0]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:t.dataset.translink[0].transtype}})),a},project:t=>{let a={options:{title:n("title_project"),title_field:"pronumber",icon:"Clock",fieldvalue:!0,panel:{more:!0,bookmark:["editor","project","description","pronumber"],help:"resources/project"}},view:{address:{type:"list",data:"address",icon:"Home",title:n("address_view")},contact:{type:"list",data:"contact",icon:"Phone",title:n("contact_view")},event:{type:"list",data:"event",icon:"Calendar",title:n("event_view"),actions:{new:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},edit:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"startdate",label:n("project_startdate"),datatype:"date",empty:!0},{name:"enddate",label:n("project_enddate"),datatype:"date",empty:!0},{name:"inactive",label:n("project_inactive"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"pronumber",label:n("project_pronumber"),datatype:"string"},{name:"description",label:n("project_description"),datatype:"string"}]},{rowtype:"field",name:"customer_id",label:n("project_customer"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"project",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"field",name:"notes",label:n("project_notes"),datatype:"text"}]};return void 0!==t&&(null===t.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1,report:!1,bookmark:!1}}}:a.rows[1]={...a.rows[1],rowtype:"field",name:"description",label:n("project_description"),datatype:"string"}),a},rate:(e,t)=>{const a=e;let l={options:{title:n("title_rate"),icon:"Strikethrough",fieldvalue:!0,panel:{more:!0,report:!1,bookmark:!1,help:"settings/rate"}},view:{},rows:[{rowtype:"col2",columns:[{name:"ratetype",label:n("rate_ratetype"),datatype:"select",empty:!1,map:{source:"ratetype",value:"id",text:"groupvalue"}},{name:"ratedate",label:n("rate_ratedate"),datatype:"date"}]},{rowtype:"col2",columns:[{name:"curr",label:n("rate_curr"),datatype:"select",empty:!1,map:{source:"currency",value:"curr",text:"curr"}},{name:"ratevalue",label:n("rate_ratevalue"),datatype:"float"}]},{rowtype:"col2",columns:[{name:"rategroup",label:n("rate_rategroup"),datatype:"select",empty:!0,map:{source:"rategroup",value:"id",text:"groupvalue"}},{name:"place_id",label:n("rate_planumber"),datatype:"selector",empty:!0,map:{seltype:"place_bank",table:"rate",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]}]};if(void 0!==a&&null===a.id){l={...l,view:{},options:{...l.options,panel:{...l.options.panel,new:!1,delete:!1}}},a.ratetype=t.dataset.ratetype.filter((e=>"rate"===e.groupvalue))[0].id;const e=t.dataset.settings.filter((e=>"default_currency"===e.fieldname))[0];void 0!==e&&(a.curr=e.value)}return l},program:()=>({options:{title:n("title_program"),title_field:"",edited:!1,icon:"Keyboard",panel:{}},view:{},rows:[{rowtype:"col4",columns:[{name:"paginationPage",label:n("program_page"),datatype:"integer"},{name:"history",label:n("program_history"),datatype:"integer"},{name:"export_sep",label:n("program_export_sep"),datatype:"string",length:1},{name:"page_size",label:n("program_page_size"),datatype:"select",empty:!1,options:a("report_size")}]}]}),receipt:(t,a)=>{let l={options:{title:n("title_receipt"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:n("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("invoce_direction"),datatype:"select",empty:!1,disabled:!0,map:{source:"direction",value:"id",text:"groupvalue",label:"receipt"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("receipt_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("receipt_transdate"),datatype:"date"},{name:"duedate",label:n("receipt_duedate"),datatype:"date"}]},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("document_acrate"),datatype:"float",default:0},{name:"paid",label:n("receipt_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};if(void 0!==t)if(null===t.id)l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}};else{a.dataset.translink.length>0?l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}:a.dataset.cancel_link.length>0&&(l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}});"out"===a.dataset.groups.filter((e=>e.id===t.direction))[0].groupvalue&&"normal"===t.transcast&&(l=0===t.deleted?{...l,options:{...l.options,panel:{...l.options.panel,corrective:!0}}}:{...l,options:{...l.options,panel:{...l.options.panel,cancellation:!0}}})}return l},rent:(t,a)=>{let l={options:{title:n("title_rent"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,edited:!1,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:n("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:n("shipping_view"),actions:{new:{action:e.LOAD_SHIPPING},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:n("shipping_item_product")},movement_product:{fieldtype:"string",label:n("shipping_movement_product")},sqty:{fieldtype:"number",label:n("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:n("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("rental_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"rent"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("rental_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("rental_transdate"),datatype:"date"},{name:"duedate",label:n("rental_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:n("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col3",columns:[{name:"trans_reholiday",label:n("trans_reholiday"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_rebadtool",label:n("trans_rebadtool"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_reother",label:n("trans_reother"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}}]},{rowtype:"field",name:"trans_rentnote",label:n("trans_rentnote"),datatype:"string",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("rental_acrate"),datatype:"float"},{name:"paid",label:n("rental_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==t&&(null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:(l.rows[0].columns[0]={...l.rows[0].columns[0],disabled:!0},a.dataset.translink.length>0&&(l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}))),l},report:(e,t,a)=>{let l={options:{title:n("title_report"),title_field:"repname",icon:"ChartBar",panel:{save:!1,new:!1,delete:!1,more:!0,report:!1,print:!0,export_pdf:!0,export_xml:!0,bookmark:!1,help:"program/report"}},view:{},rows:[{rowtype:"label",name:"description"},{rowtype:"col3",columns:[{name:"oslabel",label:`${n("report_orientation")} / ${n("report_size")}`,datatype:"label"},{name:"orientation",label:"",datatype:"select",empty:!1,options:a.report_orientation,default:a.page_orient},{name:"size",label:"",datatype:"select",empty:!1,options:a.report_size,default:a.page_size}]}]};return void 0!==e&&"csv"===e.ftype&&(l={...l,rows:[{rowtype:"label",name:"description"}],options:{...l.options,panel:{...l.options.panel,print:!1,export_pdf:!1,export_xml:!1,export_csv:!0}}}),l},setting:()=>({options:{icon:"Cog",data:"fieldvalue",title:n("title_dbsettings"),panel:{page:"setting",delete:!1,new:!1,more:!1,help:"settings/setting"}},view:{setting:{type:"list",actions:{new:null,edit:{action:e.EDIT_ITEM},delete:null}}},rows:[{rowtype:"field",name:"fieldname",label:n("fields_fieldname"),datatype:"string",disabled:!0},{rowtype:"field",name:"label",label:n("fields_fielddef"),datatype:"string",disabled:!0},{rowtype:"field",name:"fieldvalue_value",label:n("fields_value"),datatype:"fieldvalue"},{rowtype:"field",name:"fieldvalue_notes",label:n("fields_notes"),datatype:"text"}]}),shipping:()=>({options:{title:n("title_shipping"),title_field:"transnumber",icon:"Truck",panel:{back:!0,save:!1,delete:!1,new:!1,shipping:!0,help:"stock/shipping"}},view:{shipping_items:{type:"table",data:"shipping_items_",icon:"ListOl",edit_icon:"Plus",delete_icon:"Book",title:n("shipping_items"),actions:{new:null,edit:{action:e.ADD_SHIPPING_ROW},delete:{action:e.SHOW_SHIPPING_STOCK}},fields:{product:{fieldtype:"string",label:n("shipping_movement_product")},qty:{fieldtype:"number",label:n("shipping_qty")},tqty:{fieldtype:"number",label:n("shipping_turnover")},diff:{fieldtype:"number",label:n("shipping_diff"),format:!0}}},shiptemp_items:{type:"table",data:"shiptemp",title:n("shipping_create"),icon:"Plus",actions:{new:null,edit:{action:e.EDIT_SHIPPING_ROW},delete:{action:e.DELETE_SHIPPING_ROW}},fields:{product:{fieldtype:"string",label:n("shipping_product")},batch_no:{fieldtype:"string",label:n("movement_batchnumber")},qty:{fieldtype:"number",label:n("movement_qty")},diff:{fieldtype:"number",label:n("shipping_diff"),format:!0}}},shipping_delivery:{type:"list",data:"shipping_delivery",title:n("shipping_delivery"),icon:"Truck",actions:{new:null,edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"delivery"},delete:null}}},rows:[{rowtype:"col2",columns:[{name:"delivery_type",label:n("delivery_direction"),datatype:"string",disabled:!0},{name:"id",label:n("customer_custname"),datatype:"link",map:{source:"trans",value:"id",text:"customer_id",label_field:"custname",lnktype:"customer",transtype:""}}]},{rowtype:"col2",columns:[{name:"shippingdate",label:n("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"shipping_place_id",label:n("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"shipping_place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]}]}),tax:t=>{let a={options:{icon:"Ticket",data:"tax",title:n("title_tax"),panel:{page:"setting",more:!1}},view:{setting:{type:"table",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}},fields:{taxcode:{fieldtype:"string",label:n("tax_taxcode")},description:{fieldtype:"string",label:n("tax_description")},rate:{fieldtype:"number",label:n("tax_rate")},inact:{fieldtype:"string",label:n("tax_inactive"),align:"center"}}}},rows:[{rowtype:"col3",columns:[{name:"taxcode",label:n("tax_taxcode"),datatype:"string"},{name:"rate",label:n("tax_rate"),datatype:"float"},{name:"inactive",label:n("tax_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:n("tax_description"),datatype:"string"}]};return void 0!==t&&(null!==t.id?a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0}:a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),a},template:()=>({options:{icon:"TextHeight",data:"template",title:n("title_report_editor"),panel:{}},view:{setting:{type:"list",actions:{new:null,edit:{action:e.EDIT_ITEM},delete:null}}},rows:[]}),tool:t=>{let a={options:{title:n("title_tool"),title_field:"serial",icon:"Wrench",fieldvalue:!0,panel:{more:!0,bookmark:["editor","tool","description","serial"],help:"resources/tool"}},view:{event:{type:"list",data:"event",icon:"Calendar",title:n("event_view"),actions:{new:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},edit:{action:e.LOAD_EDITOR,ntype:"event",ttype:null},delete:{action:e.DELETE_EDITOR_ITEM,fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"serial",label:n("tool_serial"),datatype:"string"},{name:"toolgroup",label:n("tool_toolgroup"),datatype:"select",empty:!0,map:{source:"toolgroup",value:"id",text:"groupvalue"}},{name:"inactive",label:n("tool_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:n("tool_description"),datatype:"string"},{rowtype:"field",name:"product_id",label:n("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"tool",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"field",name:"notes",label:n("tool_notes"),datatype:"text"}]};return void 0!==t&&(null===t.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1,report:!1,bookmark:!1}}}:a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0}),a},ui_menu:t=>{const a={options:{icon:"Share",data:"ui_menu",title:n("title_menucmd"),panel:{page:"setting",more:!1,help:"settings/uimenu"}},view:{setting:{type:"list",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}}},items:{type:"table",data:"ui_menufields",actions:{new:{action:e.EDIT_MENU_FIELD},edit:{action:e.EDIT_MENU_FIELD},delete:{action:e.DELETE_ITEM_ROW,table:"ui_menufields"}},fields:{fieldname:{fieldtype:"string",label:n("menufields_fieldname")},description:{fieldtype:"string",label:n("menufields_description")},fieldtype_name:{fieldtype:"string",label:n("menufields_fieldtype")},orderby:{fieldtype:"number",label:n("menufields_orderby")}}}},rows:[{rowtype:"col2",columns:[{name:"menukey",label:n("menucmd_menukey"),datatype:"string"},{name:"description",label:n("menucmd_description"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"method",label:n("menucmd_method"),datatype:"select",map:{source:"method",value:"id",text:"groupvalue"}},{name:"modul",label:n("menucmd_modul"),datatype:"string"},{name:"icon",label:n("menucmd_icon"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"funcname",label:n("menucmd_funcname"),datatype:"string"},{name:"address",label:n("menucmd_address"),datatype:"string"}]}]};return void 0!==t&&null!==t.id&&(a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0}),a},usergroup:t=>{let a={options:{icon:"Key",data:"groups",title:n("title_usergroup"),panel:{page:"setting",more:!1,help:"settings/usergroup"}},view:{setting:{type:"list",actions:{new:{action:e.NEW_ITEM},edit:{action:e.EDIT_ITEM},delete:{action:e.DELETE_ITEM}}},items:{type:"table",data:"audit",actions:{new:{action:e.EDIT_AUDIT},edit:{action:e.EDIT_AUDIT},delete:{action:e.DELETE_ITEM_ROW,table:"ui_audit"}},fields:{nervatype_name:{fieldtype:"string",label:n("audit_nervatype")},subtype_name:{fieldtype:"string",label:n("audit_subtype")},inputfilter_name:{fieldtype:"string",label:n("audit_inputfilter")},supervisor_name:{fieldtype:"string",label:n("audit_supervisor")}}}},rows:[{rowtype:"col3",columns:[{name:"groupvalue",label:n("groups_groupvalue"),datatype:"string"},{name:"transfilter",label:n("groups_transfilter"),datatype:"select",empty:!0,map:{source:"transfilter",value:"id",text:"groupvalue"}},{name:"inactive",label:n("groups_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:n("groups_description"),datatype:"text"}]};return void 0!==t&&(null!==t.id?a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0}:a={...a,options:{...a.options,panel:{...a.options.panel,new:!1,delete:!1}}}),a},waybill:(e,t)=>{let a={options:{title:n("title_waybill"),title_field:"transnumber",icon:"Briefcase",fieldvalue:!0,pattern:!0,extend:"refvalue",panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"stock/waybill"}},view:{movement:{type:"table",icon:"ListOl",title:n("item_view"),data:"movement",fields:{shippingdate:{fieldtype:"date",label:n("movement_shippingdate2")},serial:{fieldtype:"string",label:n("tool_serial")},tooldesc:{fieldtype:"string",label:n("tool_description")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("document_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"waybill"}},{name:"crdate",label:n("waybill_crdate"),datatype:"date",disabled:!0},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col2",columns:[{name:"seltype",label:n("waybill_seltype"),datatype:"select",empty:!1,olabel:"waybill",extend:!0,options:[["transitem","transitem"],["customer","customer"],["employee","employee"]]},{name:"ref_id",label:n("waybill_reference"),datatype:"selector",empty:!1,map:{seltype:"transitem",table:"extend",fieldname:"ref_id",lnktype:"trans",transtype:"",label_field:"refnumber",extend:!0}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==e&&(null===e.id?a={...a,view:{},options:{...a.options,panel:{...a.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:(a.rows[0].columns[0]={...a.rows[0].columns[0],disabled:!0},a.rows[1].columns[0]={...a.rows[0].columns[0],disabled:!0},null!==e.customer_id?a.rows[1].columns[1]={...a.rows[1].columns[1],map:{...a.rows[1].columns[1].map,seltype:"customer",lnktype:"customer"}}:null!==e.employee_id?a.rows[1].columns[1]={...a.rows[1].columns[1],map:{...a.rows[1].columns[1].map,seltype:"employee",lnktype:"employee"}}:(a.rows[1].columns[1]={...a.rows[1].columns[1],map:{...a.rows[1].columns[1].map,seltype:"transitem",lnktype:"trans"}},t.dataset.translink.length>0&&(a.rows[1].columns[1]={...a.rows[1].columns[1],map:{...a.rows[1].columns[1].map,transtype:t.dataset.translink[0].transtype}})))),a},worksheet:(t,a)=>{let l={options:{title:n("title_worksheet"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,edited:!1,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:n("item_view"),total:{netamount:n("item_netamount"),vatamount:n("item_vatamount"),amount:n("item_amount")},fields:{description:{fieldtype:"string",label:n("item_description")},unit:{fieldtype:"string",label:n("item_unit")},qty:{fieldtype:"number",label:n("item_qty")},amount:{fieldtype:"number",label:n("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:n("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:n("shipping_view"),actions:{new:{action:e.LOAD_SHIPPING},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:n("shipping_item_product")},movement_product:{fieldtype:"string",label:n("shipping_movement_product")},sqty:{fieldtype:"number",label:n("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:n("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},edit:{action:e.LOAD_EDITOR,ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:n("worksheet_direction"),datatype:"select",empty:!1,disabled:!0,map:{source:"direction",value:"id",text:"groupvalue",label:"worksheet"}},{name:"ref_transnumber",label:n("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:n("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:n("worksheet_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:n("worksheet_transdate"),datatype:"date"},{name:"duedate",label:n("worksheet_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:n("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col3",columns:[{name:"trans_wsdistance",label:n("trans_wsdistance"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_wsrepair",label:n("trans_wsrepair"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_wstotal",label:n("trans_wstotal"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}}]},{rowtype:"field",name:"trans_wsnote",label:n("trans_wsnote"),datatype:"string",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{rowtype:"col4",columns:[{name:"curr",label:n("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:n("worksheet_acrate"),datatype:"float",default:0},{name:"paid",label:n("worksheet_paid"),datatype:"flip"},{name:"closed",label:n("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:n("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:n("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:n("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:n("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:n("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:n("document_intnotes"),datatype:"text"}]};return void 0!==t&&(null===t.id?l={...l,view:{},options:{...l.options,panel:{...l.options.panel,arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}:a.dataset.translink.length>0&&(l.rows[0].columns[1]={name:"id",label:n("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}})),l}}};export{t as Forms};
