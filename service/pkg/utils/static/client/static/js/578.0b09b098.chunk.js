"use strict";(self.webpackChunknervatura_client=self.webpackChunknervatura_client||[]).push([[578],{656:function(e,t,n){n.r(t),n.d(t,{default:function(){return Te}});var r=n(4942),a=n(2982),i=n(1413),l=n(885),s=n(7313),o=n(4754),u=n.n(o),c=n(7559),d=n(2361),p=n(4165),m=n(5861),f=n(5578),g=n(9206),v=n(3421),x=n(7112),y=n(5468),_=n(4925),h=(n(2580),"Audit_modal__mUkLD"),b="Audit_dialog__tU6Cb",j="Audit_panel__9m1Pc",Z="Audit_panelTitle__jCR7q",w="Audit_closeIcon__CTCuo",N="Audit_reportField__waizt",T=n(8907),k=n(4721),S=n(3331),F=n(5750),P=n(6417),C=["idKey","usergroup","nervatype","subtype","inputfilter","supervisor","typeOptions","subtypeOptions","inputfilterOptions","className","getText","onClose","onAudit"],E=function(e){var t=e.idKey,n=e.usergroup,r=e.nervatype,a=e.subtype,o=e.inputfilter,u=e.supervisor,c=e.typeOptions,d=e.subtypeOptions,p=e.inputfilterOptions,m=e.className,f=e.getText,g=e.onClose,v=e.onAudit,x=(0,_.Z)(e,C),y=function(e,t){if(t)return String(t);var n=c.filter((function(t){return t.value===e}))[0].text;if(["trans","report","menu"].includes(n)){var r=d.filter((function(e){return e.type===n}))[0];if(r)return r.value}},E=(0,s.useState)({nervatype:String(r),subtype:y(String(r),a),inputfilter:String(o),supervisor:u}),I=(0,l.Z)(E,2),K=I[0],O=I[1],$=c.filter((function(e){return e.value===K.nervatype}))[0].text,A=["trans","report","menu"].includes(c.filter((function(e){return e.value===K.nervatype}))[0].text);return(0,P.jsx)("div",{className:"modal".concat(" ",h),children:(0,P.jsx)("div",(0,i.Z)((0,i.Z)({className:"dialog".concat(" ",b)},x),{},{children:(0,P.jsxs)("div",{className:"".concat(j," ").concat(m),children:[(0,P.jsx)("div",{className:"".concat(Z," ","primary"),children:(0,P.jsxs)("div",{className:"row full",children:[(0,P.jsx)("div",{className:"cell",children:(0,P.jsx)(T.Z,{value:f("title_usergroup"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Key"}),iconWidth:"20px"})}),(0,P.jsx)("div",{className:"cell align-right".concat(" ",w),children:(0,P.jsx)(F.Z,{id:"closeIcon",iconKey:"Times",onClick:g})})]})}),(0,P.jsxs)("div",{className:"section-small",children:[(0,P.jsx)("div",{className:"row full container-small section-small",children:(0,P.jsx)("div",{className:"row full",children:(0,P.jsxs)("div",{className:"cell padding-small",children:[(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{className:"bold",value:f("audit_nervatype")})}),(0,P.jsx)(S.Z,{id:"nervatype",className:"full",value:K.nervatype,disabled:t?"disabled":"",onChange:function(e){return O((0,i.Z)((0,i.Z)({},K),{},{nervatype:e,subtype:y(e,null)}))},options:c})]})})}),A?(0,P.jsx)("div",{className:"row full container-small",children:(0,P.jsx)("div",{className:"row full",children:(0,P.jsxs)("div",{className:"cell padding-small",children:[(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{className:"bold",value:f("audit_subtype")})}),(0,P.jsx)(S.Z,{id:"subtype",className:"full",value:K.subtype,onChange:function(e){return O((0,i.Z)((0,i.Z)({},K),{},{subtype:e}))},options:d.filter((function(e){return e.type===$}))})]})})}):null,(0,P.jsx)("div",{className:"row full container-small",children:(0,P.jsx)("div",{className:"row full",children:(0,P.jsxs)("div",{className:"cell padding-small",children:[(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{className:"bold",value:f("audit_inputfilter")})}),(0,P.jsx)(S.Z,{id:"inputfilter",className:"full",value:K.inputfilter,onChange:function(e){return O((0,i.Z)((0,i.Z)({},K),{},{inputfilter:e}))},options:p})]})})}),(0,P.jsx)("div",{className:"row full container-small",children:(0,P.jsx)("div",{className:"row",children:(0,P.jsx)("div",{className:"cell padding-small",children:(0,P.jsx)("div",{id:"supervisor",className:"padding-small".concat(" ",N),onClick:function(){return O((0,i.Z)((0,i.Z)({},K),{},{supervisor:1===K.supervisor?0:1}))},children:(0,P.jsx)(T.Z,{className:"bold",value:f("audit_supervisor"),leftIcon:(0,P.jsx)(F.Z,{id:"check_"+K.supervisor,iconKey:1===K.supervisor?"CheckSquare":"SquareEmpty"})})})})})})]}),(0,P.jsx)("div",{className:"row full section container-small secondary-title",children:(0,P.jsxs)("div",{className:"row full",children:[(0,P.jsx)("div",{className:"cell padding-small half",children:(0,P.jsx)(k.Z,{id:"btn_cancel",className:"full".concat(" ",w," "),onClick:g,value:(0,P.jsx)(T.Z,{center:!0,value:f("msg_cancel"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Times"}),iconWidth:"20px"})})}),(0,P.jsx)("div",{className:"cell padding-small half",children:(0,P.jsx)(k.Z,{id:"btn_ok",className:"full primary",disabled:A&&!K.subtype?"disabled":"",onClick:function(){return v({id:t,usergroup:n,nervatype:parseInt(K.nervatype,10),subtype:K.subtype?parseInt(K.subtype,10):null,inputfilter:parseInt(K.inputfilter,10),supervisor:K.supervisor})},value:(0,P.jsx)(T.Z,{center:!0,value:f("msg_ok"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Check"}),iconWidth:"20px"})})})]})})]})}))})};E.defaultProps={idKey:null,usergroup:0,nervatype:void 0,subtype:null,inputfilter:void 0,supervisor:0,typeOptions:[],subtypeOptions:[],inputfilterOptions:[],className:"",getText:void 0,onClose:void 0,onAudit:void 0};var I=E,K="Menu_modal__zKboU",O="Menu_dialog__dXq6h",$="Menu_panel__h6tf1",A="Menu_panelTitle__k-7Y6",D="Menu_closeIcon__+HH5p",W=n(6360),q=["idKey","menu_id","fieldname","description","fieldtype","fieldtypeOptions","orderby","className","getText","onClose","onMenu"],V=function(e){var t=e.idKey,n=e.menu_id,r=e.fieldname,a=e.description,o=e.fieldtype,u=e.fieldtypeOptions,c=e.orderby,d=e.className,p=e.getText,m=e.onClose,f=e.onMenu,g=(0,_.Z)(e,q),v=(0,s.useState)({fieldname:r,description:a,fieldtype:o,orderby:c}),x=(0,l.Z)(v,2),y=x[0],h=x[1];return(0,P.jsx)("div",{className:"modal".concat(" ",K),children:(0,P.jsx)("div",(0,i.Z)((0,i.Z)({className:"dialog".concat(" ",O)},g),{},{children:(0,P.jsxs)("div",{className:"".concat($," ").concat(d),children:[(0,P.jsx)("div",{className:"".concat(A," ","primary"),children:(0,P.jsxs)("div",{className:"row full",children:[(0,P.jsx)("div",{className:"cell",children:(0,P.jsx)(T.Z,{value:p("title_menucmd"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Share"}),iconWidth:"20px"})}),(0,P.jsx)("div",{className:"cell align-right".concat(" ",D),children:(0,P.jsx)(F.Z,{id:"closeIcon",iconKey:"Times",onClick:m})})]})}),(0,P.jsxs)("div",{className:"section-small",children:[(0,P.jsx)("div",{className:"row full container-small",children:(0,P.jsx)("div",{className:"row full",children:(0,P.jsxs)("div",{className:"cell padding-small",children:[(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{className:"bold",value:p("menufields_fieldname")})}),(0,P.jsx)(W.Z,{id:"fieldname",className:"full",value:y.fieldname,onChange:function(e){return h((0,i.Z)((0,i.Z)({},y),{},{fieldname:e}))}})]})})}),(0,P.jsx)("div",{className:"row full container-small",children:(0,P.jsx)("div",{className:"row full",children:(0,P.jsxs)("div",{className:"cell padding-small",children:[(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{className:"bold",value:p("menufields_description")})}),(0,P.jsx)(W.Z,{id:"description",className:"full",value:y.description,onChange:function(e){return h((0,i.Z)((0,i.Z)({},y),{},{description:e}))}})]})})}),(0,P.jsxs)("div",{className:"row full container-small",children:[(0,P.jsxs)("div",{className:"cell padding-small half",children:[(0,P.jsx)("div",{className:"row full",children:(0,P.jsx)(T.Z,{className:"bold",value:p("menufields_fieldtype")})}),(0,P.jsx)(S.Z,{id:"fieldtype",className:"full",value:String(y.fieldtype),onChange:function(e){return h((0,i.Z)((0,i.Z)({},y),{},{fieldtype:parseInt(e,10)}))},options:u})]}),(0,P.jsxs)("div",{className:"cell padding-small half",children:[(0,P.jsx)("div",{className:"row full",children:(0,P.jsx)(T.Z,{className:"bold",value:p("menufields_orderby")})}),(0,P.jsx)(W.Z,{id:"orderby",className:"full align-right",value:String(y.orderby),type:"integer",onChange:function(e){return h((0,i.Z)((0,i.Z)({},y),{},{orderby:e}))}})]})]})]}),(0,P.jsx)("div",{className:"row full section container-small secondary-title",children:(0,P.jsxs)("div",{className:"row full",children:[(0,P.jsx)("div",{className:"cell padding-small half",children:(0,P.jsx)(k.Z,{id:"btn_cancel",className:"full".concat(" ",D," "),onClick:m,value:(0,P.jsx)(T.Z,{center:!0,value:p("msg_cancel"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Times"}),iconWidth:"20px"})})}),(0,P.jsx)("div",{className:"cell padding-small half",children:(0,P.jsx)(k.Z,{id:"btn_ok",className:"full primary",disabled:""===y.fieldname||""===y.description?"disabled":"",onClick:function(){return f({id:t,menu_id:n,fieldname:y.fieldname,description:y.description,fieldtype:y.fieldtype,orderby:y.orderby})},value:(0,P.jsx)(T.Z,{center:!0,value:p("msg_ok"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Check"}),iconWidth:"20px"})})})]})})]})}))})};V.defaultProps={idKey:null,menu_id:0,fieldname:"",description:"",fieldtype:0,fieldtypeOptions:[],orderby:0,className:"",getText:void 0,onClose:void 0,onMenu:void 0};var M=V,L=n(4848),R="Setting_sidebar__v2aOb",B="Setting_selectButton__qf5Ld",G="Setting_groupButton__TdNOh",H="Setting_itemButton__S+vTB",z="Setting_panelGroup__PIwVK",Y="Setting_panelButton__mZJBn",J="Setting_selected__32O4b",U="Setting_separator__R+GPe",X=["side","auditFilter","module","username","className","getText","onEvent"],Q=function(e){var t=e.side,n=e.auditFilter,r=e.module,l=e.username,s=e.className,o=e.getText,u=e.onEvent,c=(0,_.Z)(e,X),d=r.group_key,p=r.current,m=r.panel,f=r.dirty,g=r.type,v=function(e,t,n,r){return(0,P.jsx)(k.Z,{id:e,className:t,onClick:function(){return u.apply(void 0,(0,a.Z)(n))},value:r},e)},x=function(e,t,n,r){return(0,P.jsx)(k.Z,{id:e,className:t,onClick:function(){return u("changeData",["group_key",n])},value:r},e)};return p&&m?(0,P.jsx)("div",(0,i.Z)((0,i.Z)({},c),{},{className:"".concat(R," ").concat("auto"!==t?t:""," ").concat(s),children:function(e){var t=[];return t.push(v("cmd_back","medium".concat(" ",H," ").concat(J),["settingBack",[]],(0,P.jsx)(T.Z,{value:o("label_back"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Reply"}),iconWidth:"20px"}))),t.push((0,P.jsx)("div",{className:U},"back_sep")),!1!==e.save&&t.push(v("cmd_save","full medium".concat(" ",H," ").concat(f?J:""),["settingSave",[]],(0,P.jsx)(T.Z,{value:o("label_save"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Check"}),iconWidth:"20px"}))),!1!==e.delete&&p.form&&null!==p.form.id&&t.push(v("cmd_delete","full medium".concat(" ",H),["deleteSetting",[p.form]],(0,P.jsx)(T.Z,{value:o("label_delete"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Times"}),iconWidth:"20px"}))),!1!==e.new&&p.form&&null!==p.form.id&&t.push(v("cmd_new","full medium".concat(" ",H),["checkSetting",[{type:g,id:null},"LOAD_SETTING"]],(0,P.jsx)(T.Z,{value:o("label_new"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Plus"}),iconWidth:"20px"}))),"undefined"!==typeof e.help&&(t.push((0,P.jsx)("div",{className:U},"help_sep")),t.push(v("cmd_help","full medium".concat(" ",H),["showHelp",[e.help]],(0,P.jsx)(T.Z,{value:o("label_help"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"QuestionCircle"}),iconWidth:"20px"})))),t}(m)})):(0,P.jsxs)("div",(0,i.Z)((0,i.Z)({},c),{},{className:"".concat(R," ").concat("auto"!==t?t:""," ").concat(s),children:["disabled"!==n.setting[0]?(0,P.jsxs)("div",{className:"row full",children:[x("group_admin","full medium".concat(" ","group_admin"===d?B:G),"group_admin",(0,P.jsx)(T.Z,{value:o("title_admin"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"ExclamationTriangle"}),iconWidth:"20px"})),"group_admin"===d?(0,P.jsxs)("div",{className:"row full".concat(" ",z),children:[v("cmd_dbsettings","full medium primary".concat(" ",Y),["loadSetting",[{type:"setting"}]],(0,P.jsx)(T.Z,{value:o("title_dbsettings"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Cog"}),iconWidth:"20px"})),v("cmd_numberdef","full medium primary".concat(" ",Y),["loadSetting",[{type:"numberdef"}]],(0,P.jsx)(T.Z,{value:o("title_numberdef"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"ListOl"}),iconWidth:"20px"})),"disabled"!==n.audit[0]?v("cmd_usergroup","full medium primary".concat(" ",Y),["loadSetting",[{type:"usergroup"}]],(0,P.jsx)(T.Z,{value:o("title_usergroup"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Key"}),iconWidth:"20px"})):null,v("cmd_ui_menu","full medium primary".concat(" ",Y),["loadSetting",[{type:"ui_menu"}]],(0,P.jsx)(T.Z,{value:o("title_menucmd"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Share"}),iconWidth:"20px"})),v("cmd_log","full medium primary".concat(" ",Y),["loadSetting",[{type:"log"}]],(0,P.jsx)(T.Z,{value:o("title_log"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"InfoCircle"}),iconWidth:"20px"}))]}):null]}):null,"disabled"!==n.setting[0]?(0,P.jsxs)("div",{className:"row full",children:[x("group_database","full medium".concat(" ","group_database"===d?B:G),"group_database",(0,P.jsx)(T.Z,{value:o("title_database"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Database"}),iconWidth:"20px"})),"group_database"===d?(0,P.jsxs)("div",{className:"row full".concat(" ",z),children:[v("cmd_deffield","full medium primary".concat(" ",Y),["loadSetting",[{type:"deffield"}]],(0,P.jsx)(T.Z,{value:o("title_deffield"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Tag"}),iconWidth:"20px"})),v("cmd_groups","full medium primary".concat(" ",Y),["loadSetting",[{type:"groups"}]],(0,P.jsx)(T.Z,{value:o("title_groups"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Th"}),iconWidth:"20px"})),v("cmd_place","full medium primary".concat(" ",Y),["loadSetting",[{type:"place"}]],(0,P.jsx)(T.Z,{value:o("title_place"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Map"}),iconWidth:"20px"})),v("cmd_currency","full medium primary".concat(" ",Y),["loadSetting",[{type:"currency"}]],(0,P.jsx)(T.Z,{value:o("title_currency"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Dollar"}),iconWidth:"20px"})),v("cmd_tax","full medium primary".concat(" ",Y),["loadSetting",[{type:"tax"}]],(0,P.jsx)(T.Z,{value:o("title_tax"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Ticket"}),iconWidth:"20px"})),v("cmd_company","full medium primary".concat(" ",Y),["companyForm",[]],(0,P.jsx)(T.Z,{value:o("title_company"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Home"}),iconWidth:"20px"})),v("cmd_template","full medium primary".concat(" ",Y),["loadSetting",[{type:"template"}]],(0,P.jsx)(T.Z,{value:o("title_report_editor"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"TextHeight"}),iconWidth:"20px"}))]}):null]}):null,(0,P.jsxs)("div",{className:"row full",children:[x("group_user","full medium".concat(" ","group_user"===d?B:G),"group_user",(0,P.jsx)(T.Z,{value:o("title_user"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Desktop"}),iconWidth:"20px"})),"group_user"===d?(0,P.jsxs)("div",{className:"row full".concat(" ",z),children:[v("cmd_program","full medium primary".concat(" ",Y),["setProgramForm",[]],(0,P.jsx)(T.Z,{value:o("title_program"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Keyboard"}),iconWidth:"20px"})),v("cmd_password","full medium primary".concat(" ",Y),["setPassword",[l]],(0,P.jsx)(T.Z,{value:o("title_password"),leftIcon:(0,P.jsx)(F.Z,{iconKey:"Lock"}),iconWidth:"20px"}))]}):null]})]}))};Q.defaultProps={side:"auto",module:{current:{},dirty:!1,panel:{},group_key:""},auditFilter:{},username:void 0,className:"",onEvent:void 0,getText:void 0};var ee=Q,te=n(1012),ne=n(8025),re="Form_panel__Feld4",ae="Form_panelTitle__P7Eha",ie="Form_width800__1E6L8",le="Form_editCol__lCDCH",se="Form_deleteCol__pPy9q",oe="Form_settingPanel__fZofM",ue="Form_formPanel__sORnY",ce=["data","className","paginationPage","dateFormat","timeFormat","getText","onEvent"],de=function(e){var t=e.data,n=e.className,r=e.paginationPage,a=e.dateFormat,l=e.timeFormat,o=e.getText,c=e.onEvent,d=(0,_.Z)(e,ce),p=t.caption,m=t.icon,f=t.current,g=t.audit,v=t.dataset,x=t.type,y=t.view,h={};"undefined"!==typeof f.template.view.items&&null!==f.form.id&&(f.template.view.items.actions.edit&&(h=u()(h,{$merge:{edit:{columnDef:{id:"edit",Header:"",headerStyle:{},Cell:function(e){var t=e.row,n=(e.value,(0,P.jsx)("div",{className:"cell".concat(" ",le),children:(0,P.jsx)(F.Z,{id:"edit_"+t.original.id,iconKey:"Edit",width:24,height:21.3,onClick:function(e){e.stopPropagation(),c("setViewActions",[f.template.view.items.actions.edit,t.original])},className:le})})),r=f.template.view.items.actions.delete?(0,P.jsx)("div",{className:"cell".concat(" ",se),children:(0,P.jsx)(F.Z,{id:"delete_"+t.original.id,iconKey:"Times",width:19,height:27.6,onClick:function(e){e.stopPropagation(),c("setViewActions",[f.template.view.items.actions.delete,t.original])},className:se})}):null;return(0,P.jsxs)(s.Fragment,{children:[n,r]})},cellStyle:{width:30,padding:"7px 3px 3px 8px"}}}}})),h=u()(h,{$merge:(0,i.Z)({},f.template.view.items.fields)}));var b=function(e){return c("editItem",[e])};return(0,P.jsx)("div",(0,i.Z)((0,i.Z)({},d),{},{className:"".concat(ie," ").concat(n),children:(0,P.jsxs)("div",{className:"".concat(re),children:[(0,P.jsx)("div",{className:"".concat(ae," ","primary"),children:(0,P.jsx)(T.Z,{value:p,leftIcon:(0,P.jsx)(F.Z,{iconKey:m}),iconWidth:"20px"})}),(0,P.jsx)("div",{className:"section".concat(" ",oe),children:(0,P.jsx)("div",{className:"row full container section-small-bottom",children:(0,P.jsxs)(s.Fragment,{children:[(0,P.jsx)("div",{className:"border".concat(" ",ue),children:f.template.rows.map((function(e,t){return(0,P.jsx)(ne.Z,{row:e,values:f.fieldvalue||f.form,options:f.template.options,data:{audit:g,current:f,dataset:v},getText:o,onEdit:b},t)}))}),"undefined"!==typeof f.template.view.items&&null!==f.form.id||"log"===x?(0,P.jsx)(te.Z,{rowKey:"id",onAddItem:f.template.view.items&&f.template.view.items.actions.new?function(){return c("setViewActions",[f.template.view.items.actions.new])}:null,labelAdd:o("label_new"),fields:"log"===x?y.fields:h,rows:"log"===x?y.result:v[f.template.view.items.data],tableFilter:!0,filterPlaceholder:o("placeholder_filter"),labelYes:o("label_yes"),labelNo:o("label_no"),dateFormat:a,timeFormat:l,paginationPage:r,paginationTop:!0}):null]})})})]})}))};de.defaultProps={data:{caption:"",icon:"",current:{},audit:"",dataset:{},type:"",view:{}},paginationPage:(0,L.$8)("paginationPage"),dateFormat:(0,L.$8)("dateFormat"),timeFormat:(0,L.$8)("timeFormat"),className:"",onEvent:void 0,getText:void 0};var pe=de,me=n(4867),fe="View_panel__B1kEO",ge="View_panelTitle__p8k-+",ve="View_width800__3XAid",xe="View_editCol__pIuPi",ye="View_settingPanel__BxNrR",_e="View_viewPanel__V3ZXa",he=["data","className","paginationPage","dateFormat","timeFormat","getText","onEvent"],be=function(e){var t=e.data,n=e.className,r=e.paginationPage,a=e.dateFormat,l=e.timeFormat,o=e.getText,c=e.onEvent,d=(0,_.Z)(e,he),p=t.caption,m=t.icon,f=t.view,g=t.actions,v=t.page,x={};"table"===f.type&&(g.edit&&(x=u()(x,{$merge:{edit:{columnDef:{id:"edit",Header:"",headerStyle:{},Cell:function(e){var t=e.row;e.value;return(0,P.jsx)(s.Fragment,{children:(0,P.jsx)("div",{className:"cell".concat(" ",xe),children:(0,P.jsx)(F.Z,{id:"edit_"+t.original.id,iconKey:"Edit",width:24,height:21.3,onClick:function(e){e.stopPropagation(),c("setViewActions",[g.edit,t.original])},className:xe})})})},cellStyle:{width:30,padding:"7px 3px 3px 8px"}}}}})),x=u()(x,{$merge:(0,i.Z)({},f.fields)}));var y=function(e){c("changeData",["page",e])};return(0,P.jsx)("div",(0,i.Z)((0,i.Z)({},d),{},{className:"".concat(ve," ").concat(n),children:(0,P.jsxs)("div",{className:"".concat(fe),children:[(0,P.jsx)("div",{className:"".concat(ge," ","primary"),children:(0,P.jsx)(T.Z,{value:p,leftIcon:(0,P.jsx)(F.Z,{iconKey:m}),iconWidth:"20px"})}),(0,P.jsx)("div",{className:"section-small".concat(" ",ye),children:(0,P.jsx)("div",{className:"row full container section-small-bottom",children:(0,P.jsx)("div",{className:"".concat(_e),children:(0,P.jsx)("div",{className:"row full",children:"table"===f.type?(0,P.jsx)(te.Z,{rowKey:"id",fields:x,rows:f.result,tableFilter:!0,filterPlaceholder:o("placeholder_filter"),onAddItem:g.new?function(){return c("setViewActions",[g.new])}:void 0,onRowSelected:g.edit?function(e){return c("setViewActions",[g.edit,e])}:void 0,labelAdd:o("label_new"),labelYes:o("label_yes"),labelNo:o("label_no"),dateFormat:a,timeFormat:l,paginationPage:r,paginationTop:!0,currentPage:v,onCurrentPage:y}):(0,P.jsx)(me.Z,{rows:f.result,listFilter:!0,filterPlaceholder:o("placeholder_filter"),onAddItem:g.new?function(){return c("setViewActions",[g.new])}:void 0,labelAdd:o("label_new"),paginationPage:r,paginationTop:!0,onEdit:g.edit?function(e){return c("setViewActions",[g.edit,e])}:void 0,onDelete:g.delete?function(e){return c("setViewActions",[g.delete,e])}:void 0,currentPage:v,onCurrentPage:y})})})})})]})}))};be.defaultProps={data:{caption:"",icon:"",view:{},actions:{}},paginationPage:(0,L.$8)("paginationPage"),dateFormat:(0,L.$8)("dateFormat"),timeFormat:(0,L.$8)("timeFormat"),className:"",onEvent:void 0,getText:void 0};var je=be,Ze=function(e){var t=e.data,n=e.current,r=e.login,a=e.username,i=e.paginationPage,l=e.onEvent,o=e.getText;return(0,P.jsxs)(s.Fragment,{children:[(0,P.jsx)(ee,{side:n.side,module:t,auditFilter:r.audit_filter,username:a,onEvent:l,getText:o}),(0,P.jsx)("div",{className:"page padding-normal".concat(" ",n.theme),children:t.current?(0,P.jsx)(pe,{data:t,onEvent:l,getText:o}):(0,P.jsx)(je,{data:t,paginationPage:i,onEvent:l,getText:o})})]})};Ze.defaultProps={data:{caption:"",icon:"",view:{},actions:{},current:void 0,audit:"",dataset:{},type:""},current:{},login:{},username:"",paginationPage:void 0,onEvent:void 0,getText:void 0};var we=(0,s.memo)(Ze,(function(e,t){return e.data===t.data&&e.current.side===t.current.side})),Ne=function(e){var t=(0,s.useContext)(c.ZP),n=t.data,o=t.setData,_=(0,d.xZ)(n,o),h=function(e,t){var n=(0,d.xZ)(e,t),a=(0,x.c)(e,t),i=(0,x.o)(e,t),l=(0,v.E)({getText:n.getText}),s=(0,f.i)({getText:n.getText}),o=function(t,n){var r={},a=i({tablename:t,dataset:e.setting.dataset,current:e.setting.current});for(var l in n)a.hasOwnProperty(l)&&(r[l]=n[l]);return r},c=function(n,r){var a=u()(r||e.setting,{$merge:{current:{}}});if(null!==n){var s=a.dataset[a.type+"_view"].filter((function(e){return e.id===parseInt(n,10)}))[0];"fieldvalue"===(a=u()(a,{$merge:{dirty:!1,current:{form:s}}})).ntype&&(a=u()(a,{current:{$merge:{fieldvalue:{rowtype:"fieldvalue",id:s.id,fieldname:s.fieldname,fieldvalue_value:s.value,fieldvalue_notes:s.notes||"",label:s.lslabel,description:"valuelist"===s.fieldtype?s.valuelist.split("|"):s.value,disabled:"false",fieldtype:s.fieldtype,datatype:"urlink"===s.fieldtype?"text":s.fieldtype}}}}))}else a=u()(a,{$merge:{dirty:"all"===a.audit||"update"===a.audit,current:{form:i({tablename:a.type,dataset:a.dataset,current:a.current})}}});"usergroup"===a.type&&null===a.current.form.transfilter&&(a.current.form.transfilter=a.dataset.transfilter.filter((function(e){return"all"===e.groupvalue}))[0].id),a=u()(a,{current:{$merge:{template:l[a.type](a.current.form,a)}}}),"readonly"===(a=u()(a,{$merge:{panel:a.current.template.options.panel}})).audit&&(a.panel.save=!1),"all"!==a.audit&&(a.panel.delete=!1,a.panel.new=!1),t("setting",a)},_=function(e){var n={username:e,password_1:"",password_2:""},r=l.password(n),a={type:"password",dataset:{},current:{form:n,template:r},panel:r.options.panel,caption:r.options.title,icon:r.options.icon,filter:"",result:[],dirty:!1,audit:"all",view:{type:"password",result:[]}};t("setting",a),t("current",{module:"setting",side:"hide"})},h=function(){var t=(0,m.Z)((0,p.Z)().mark((function t(){var r,a,i,l,s,o;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.setting.current.form,a=r.username,i=r.password_1,l=r.password_2,""!==a&&null!==a){t.next=3;break}return t.abrupt("return",n.showToast({type:"error",title:n.getText("msg_warning"),message:n.getText("ms_password_username")}));case 3:if(i===l){t.next=5;break}return t.abrupt("return",n.showToast({type:"error",title:n.getText("msg_warning"),message:n.getText("ms_password_pswerr")}));case 5:return s={method:"POST",data:{username:a,password:i,confirm:l}},t.next=8,n.requestData("/auth/password",s);case 8:if(!(o=t.sent)||!o.error){t.next=11;break}return t.abrupt("return",n.resultError(o));case 11:n.showToast({type:"success",title:n.getText("msg_warning"),message:n.getText("msg_password_ok")});case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(r){var a=l[r.type](),s=n.getAuditFilter(r.type)[0],o=u()(r,{$merge:{current:"log"===r.type?{form:i({tablename:"log"}),template:a}:null,panel:null,filter:"",result:[],ntype:a.options.data,caption:a.options.title,icon:a.options.icon,view:{type:a.view.setting.type,result:r.dataset[r.type+"_view"],fields:a.view.setting.fields?a.view.setting.fields:null},actions:{new:"all"!==s?null:a.view.setting.actions.new,edit:a.view.setting.actions.edit,delete:"all"!==s?null:a.view.setting.actions.delete},audit:s,template:null,page:e.setting.type===r.type&&e.setting.page||0}});t("setting",o),t("current",{module:"setting",side:"hide"}),"usergroup"!==r.type&&"ui_menu"!==r.type||!r.id?"undefined"!==typeof r.id&&c(r.id,o):k({action:"editItem",setting:o},{id:r.id})},j=function(){var a=(0,m.Z)((0,p.Z)().mark((function a(i){var l,o,c,m;return(0,p.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=u()(i,{$merge:{dataset:{},dirty:!1}}),!g.Z[l.type]){a.next=13;break}return o=[],g.Z[l.type]().forEach((function(t){var n={};"table"===t.infoType?(n={select:["*"],from:t.classAlias},t.where&&(n.where=t.where),t.order&&(n.order_by=t.order)):n="undefined"!==typeof s[l.type][t.infoName]?s[l.type][t.infoName](l.type):s.all[t.infoName](l.type);var a=(0,d.aT)(e.login.data.engine,n);null!==l.id||0===a.prmCount?o=u()(o,{$push:[{key:t.infoName,text:a.sql,values:a.prmCount>0&&null!==l.id?Array(a.prmCount).fill(l.id):[]}]}):l=u()(l,{dataset:{$merge:(0,r.Z)({},t.infoName,[])}})})),c={method:"POST",data:o},a.next=7,n.requestData("/view",c);case 7:if(!(m=a.sent).error){a.next=10;break}return a.abrupt("return",n.resultError(m));case 10:if("template"!==(l=u()(l,{dataset:{$merge:m}})).type||"undefined"===typeof l.id){a.next=13;break}return a.abrupt("return",t("current",{module:"template",content:l}));case 13:b(l);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Z=function(){var t=(0,m.Z)((0,p.Z)().mark((function t(){var r,l,s,c,d;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u()(e.setting,{}),l=o(r.ntype,r.current.form),t.next=4,a(r.ntype,l);case 4:if(!(l=t.sent).error){t.next=7;break}return t.abrupt("return",n.resultError(l));case 7:return t.next=9,n.requestData("/"+r.ntype,{method:"POST",data:[l]});case 9:if(!(s=t.sent).error){t.next=13;break}return n.resultError(s),t.abrupt("return",null);case 13:if(null===r.current.form.id&&(r=u()(r,{current:{form:{$merge:{id:s[0]}}}})),"usergroup"!==(r=u()(r,{$merge:{dirty:!1}})).type){t.next=25;break}if(c=e.login.data.groups.filter((function(e){return e.id===r.current.form.transfilter}))[0].groupvalue,null===r.current.form.translink&&"all"===c){t.next=25;break}return d=u()(i({tablename:"link",dataset:r.dataset,current:r.current}),{$merge:{id:r.current.form.translink,nervatype_1:e.login.data.groups.filter((function(e){return"nervatype"===e.groupname&&"groups"===e.groupvalue}))[0].id,ref_id_1:r.current.form.id,nervatype_2:e.login.data.groups.filter((function(e){return"nervatype"===e.groupname&&"groups"===e.groupvalue}))[0].id,ref_id_2:r.current.form.transfilter}}),t.next=21,n.requestData("/link",{method:"POST",data:[d]});case 21:if(!(s=t.sent).error){t.next=25;break}return n.resultError(s),t.abrupt("return",null);case 25:return t.abrupt("return",r);case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(r){var a=function(){var t=(0,m.Z)((0,p.Z)().mark((function t(){var a,i;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="usergroup"===e.setting.type?"/groups":"/"+e.setting.type,t.next=3,n.requestData(a,{method:"DELETE",query:{id:r.id}});case 3:if(!(i=t.sent)||!i.error){t.next=6;break}return t.abrupt("return",n.resultError(i));case 6:j({type:e.setting.type});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t("current",{modalForm:(0,P.jsx)(y.default,{title:n.getText("msg_warning"),message:n.getText("msg_delete_text"),infoText:n.getText("msg_delete_info"),labelOK:n.getText("msg_ok"),labelCancel:n.getText("msg_cancel"),onCancel:function(){t("current",{modalForm:null})},onOK:function(i){t("current",{modalForm:null},(0,m.Z)((0,p.Z)().mark((function t(){var i,l,o;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof s[e.setting.type].delete_state){t.next=11;break}return i=(0,d.aT)(e.login.data.engine,s[e.setting.type].delete_state()),l={method:"POST",data:[{key:"state",text:i.sql,values:Array(i.prmCount).fill(r.id)}]},t.next=5,n.requestData("/view",l);case 5:if(!(o=t.sent).error){t.next=8;break}return t.abrupt("return",n.resultError(o));case 8:o.state[0].sco>0?n.showToast({type:"error",title:n.getText("msg_warning"),message:n.getText("msg_integrity_err")}):a(),t.next=12;break;case 11:a();case 12:case"end":return t.stop()}}),t)}))))}}),side:"hide"})},N=function(){var r=(0,m.Z)((0,p.Z)().mark((function r(){var a,i,l,o,c,m;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a={customer:{inner_join:["customer c","on",["l.ref_id","=","c.id"]],select:"c.custnumber as refnumber"},employee:{inner_join:["employee em","on",["l.ref_id","=","em.id"]],select:"em.empnumber as refnumber"},event:{inner_join:["event ev","on",["l.ref_id","=","ev.id"]],select:"ev.calnumber as refnumber"},place:{inner_join:["place p","on",["l.ref_id","=","p.id"]],select:"p.planumber as refnumber"},product:{inner_join:["product p","on",["l.ref_id","=","p.id"]],select:"p.partnumber as refnumber"},project:{inner_join:["project p","on",["l.ref_id","=","p.id"]],select:"p.pronumber as refnumber"},tool:{inner_join:["tool t","on",["l.ref_id","=","t.id"]],select:"t.serial as refnumber"},trans:{inner_join:["trans t","on",["l.ref_id","=","t.id"]],select:"t.transnumber as refnumber"}},i=u()(e.setting,{view:{$merge:{result:[]}}}),l=s.log.result(),o=[],["login","logout"].includes(i.current.form.logstate)){r.next=11;break}if(l.inner_join.push(["groups nt","on",[["l.nervatype","=","nt.id"],["and","nt.groupvalue","=","?"]]]),o.push(i.current.form.nervatype),a[i.current.form.nervatype]){r.next=9;break}return r.abrupt("return",n.showToast({type:"error",title:n.getText("msg_warning"),message:n.getText("msg_required")+" "+n.getText("log_nervatype")}));case 9:l.inner_join.push(a[i.current.form.nervatype].inner_join),l.select[4]=a[i.current.form.nervatype].select;case 11:return l.where.push(["ls.groupvalue","=","?"]),o.push(i.current.form.logstate),i.current.form.empnumber&&""!==i.current.form.empnumber&&l.where.push(["and","lower(e.empnumber)","like","{CCS}{JOKER}{SEP}lower('"+i.current.form.empnumber+"'){SEP}{JOKER}{CCE}"]),i.current.form.fromdate&&""!==i.current.form.fromdate&&(l.where.push(["and","{FMS_DATE}l.crdate{FME_DATE}",">=","?"]),o.push(i.current.form.fromdate)),i.current.form.todate&&""!==i.current.form.todate&&(l.where.push(["and","{FMS_DATE}l.crdate{FME_DATE}","<=","?"]),o.push(i.current.form.todate)),c={method:"POST",data:[{key:"log",text:(0,d.aT)(e.login.data.engine,l).sql,values:o}]},r.next=19,n.requestData("/view",c);case 19:if(!(m=r.sent).error){r.next=22;break}return r.abrupt("return",n.resultError(m));case 22:i=u()(i,{view:{$merge:{result:m.log}}}),t("setting",i);case 24:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),T=function(r,a){var i={LOAD_SETTING:function(){return j(r)},PASSWORD_FORM:function(){return _(r.username)}};if(!0===e.setting.dirty)return t("current",{modalForm:(0,P.jsx)(y.default,{title:n.getText("msg_warning"),message:n.getText("msg_dirty_text"),infoText:n.getText("msg_dirty_info"),labelOK:n.getText("msg_save"),labelCancel:n.getText("msg_cancel"),onCancel:function(){t("current",{modalForm:null},(function(){t(e.current.module,{dirty:!1},(function(){i[a]()}))}))},onOK:function(e){t("current",{modalForm:null},(0,m.Z)((0,p.Z)().mark((function e(){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",t("setting",n,(function(){i[a]()})));case 5:case"end":return e.stop()}}),e)}))))}}),side:"hide"});i[a]()},k=function(){var r=(0,m.Z)((0,p.Z)().mark((function r(a,l){var f,g,v,x,_,h,b,j,Z;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:f=l||{},r.t0=a.action,r.next="newItem"===r.t0?4:"editItem"===r.t0?6:"deleteItem"===r.t0?34:"editAudit"===r.t0?36:"editMenuField"===r.t0?40:"deleteItemRow"===r.t0?44:46;break;case 4:return T({type:e.setting.type,id:null},"LOAD_SETTING"),r.abrupt("break",47);case 6:r.t1=e.setting.type,r.next="template"===r.t1?9:"place"===r.t1?11:"usergroup"===r.t1?13:"ui_menu"===r.t1?22:31;break;case 9:return T({type:e.setting.type,id:f.id},"LOAD_SETTING"),r.abrupt("break",33);case 11:return t("current",{module:"edit",content:{ntype:e.setting.type,ttype:null,id:f.id||null}}),r.abrupt("break",33);case 13:return g={method:"POST",data:[{key:"audit",text:(0,d.aT)(e.login.data.engine,s.usergroup.audit()).sql,values:[f.id]}]},r.next=16,n.requestData("/view",g);case 16:if(!(v=r.sent).error){r.next=19;break}return r.abrupt("return",n.resultError(v));case 19:return x=u()(a.setting||e.setting,{dataset:{$merge:{audit:v.audit}}}),c(f.id,x),r.abrupt("break",33);case 22:return _={method:"POST",data:[{key:"menufields",text:(0,d.aT)(e.login.data.engine,s.ui_menu.ui_menufields()).sql,values:[f.id]}]},r.next=25,n.requestData("/view",_);case 25:if(!(h=r.sent).error){r.next=28;break}return r.abrupt("return",n.resultError(h));case 28:return b=u()(a.setting||e.setting,{dataset:{$merge:{ui_menufields:h.menufields}}}),c(f.id,b),r.abrupt("break",33);case 31:return c(f.id),r.abrupt("break",33);case 33:case 46:return r.abrupt("break",47);case 34:return w(f),r.abrupt("break",47);case 36:return(j=f).id||(j=u()(i({tablename:"link",dataset:e.setting.dataset,current:e.setting.current}),{$merge:{usergroup:e.setting.current.form.id,nervatype:e.setting.dataset.nervatype.filter((function(e){return"customer"===e.groupvalue}))[0].id,inputfilter:e.setting.dataset.inputfilter.filter((function(e){return"all"===e.groupvalue}))[0].id}})),t("current",{modalForm:(0,P.jsx)(I,{idKey:j.id,usergroup:j.usergroup,nervatype:j.nervatype,subtype:j.subtype,inputfilter:j.inputfilter,supervisor:j.supervisor,typeOptions:e.setting.dataset.nervatype.map((function(e){return{value:String(e.id),text:e.groupvalue}})),subtypeOptions:e.setting.dataset.transtype.map((function(e){return{value:String(e.id),text:e.groupvalue,type:"trans"}})).concat(e.setting.dataset.reportkey.map((function(e){return{value:String(e.id),text:e.reportkey,type:"report"}})),e.setting.dataset.menukey.map((function(e){return{value:String(e.id),text:e.menukey,type:"menu"}}))),inputfilterOptions:e.setting.dataset.inputfilter.map((function(e){return{value:String(e.id),text:e.groupvalue}})),getText:n.getText,onClose:function(){return t("current",{modalForm:null})},onAudit:function(){var r=(0,m.Z)((0,p.Z)().mark((function r(a){var i;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.requestData("/ui_audit",{method:"POST",data:[o("audit",a)]});case 2:if(!(i=r.sent).error){r.next=5;break}return r.abrupt("return",n.resultError(i));case 5:t("current",{modalForm:null},(function(){k({action:"editItem"},e.setting.current.form)}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})}),r.abrupt("break",47);case 40:return(Z=f).id||(Z=u()(i({tablename:"ui_menufields",dataset:e.setting.dataset,current:e.setting.current}),{$merge:{menu_id:e.setting.current.form.id,fieldtype:e.setting.dataset.fieldtype.filter((function(e){return"string"===e.groupvalue}))[0].id,orderby:e.setting.dataset.ui_menufields.length}})),t("current",{modalForm:(0,P.jsx)(M,{idKey:Z.id,menu_id:Z.menu_id,fieldname:Z.fieldname,description:Z.description,fieldtype:Z.fieldtype,orderby:Z.orderby,fieldtypeOptions:e.setting.dataset.fieldtype.map((function(e){return{value:String(e.id),text:e.groupvalue}})),getText:n.getText,onClose:function(){return t("current",{modalForm:null})},onMenu:function(){var r=(0,m.Z)((0,p.Z)().mark((function r(a){var i;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.requestData("/ui_menufields",{method:"POST",data:[o("ui_menufields",a)]});case 2:if(!(i=r.sent).error){r.next=5;break}return r.abrupt("return",n.resultError(i));case 5:t("current",{modalForm:null},(function(){k({action:"editItem"},e.setting.current.form)}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})}),r.abrupt("break",47);case 44:return t("current",{modalForm:(0,P.jsx)(y.default,{title:n.getText("msg_warning"),message:n.getText("msg_delete_text"),infoText:n.getText("msg_delete_info"),labelOK:n.getText("msg_ok"),labelCancel:n.getText("msg_cancel"),onCancel:function(){t("current",{modalForm:null})},onOK:function(r){t("current",{modalForm:null},(0,m.Z)((0,p.Z)().mark((function t(){var r;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.requestData("/"+a.table,{method:"DELETE",query:{id:f.id}});case 2:if(!(r=t.sent)||!r.error){t.next=5;break}return t.abrupt("return",n.resultError(r));case 5:k({action:"editItem"},e.setting.current.form);case 6:case"end":return t.stop()}}),t)}))))}})}),r.abrupt("break",47);case 47:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return{changePassword:h,checkSetting:T,deleteSetting:w,editItem:function(n){var a=u()({},{$set:e.setting});"program"===a.type?(a=u()(a,{current:{form:{$merge:(0,r.Z)({},n.name,n.value)}}}),localStorage.setItem(n.name,n.value)):"log_search"===n.name?N():("all"!==a.audit&&"update"!==a.audit||(a=u()(a,{$merge:{dirty:!0}})),"fieldvalue_value"===n.name||"fieldvalue_notes"===n.name?(a=u()(a,{current:{fieldvalue:{$merge:(0,r.Z)({},n.name,n.value)}}}),a=u()(a,{current:{form:{$merge:(0,r.Z)({},n.name.split("_")[1],n.value.toString())}}})):a=u()(a,{current:{form:{$merge:(0,r.Z)({},n.name,n.value)}}})),t("setting",a)},loadLog:N,loadSetting:j,saveSetting:Z,setPasswordForm:_,setPassword:function(t){!t&&e.edit.current&&(t=e.edit.dataset[e.edit.current.type][0].username),T({username:t},"PASSWORD_FORM")},setProgramForm:function(){var e=l.program(),n=u()({},{$set:{type:"program",dataset:{},current:{form:{paginationPage:(0,L.$8)("paginationPage"),history:(0,L.$8)("history"),page_size:(0,L.$8)("page_size"),export_sep:(0,L.$8)("export_sep"),decimal_sep:(0,L.$8)("decimal_sep"),dateFormat:(0,L.$8)("dateFormat"),calendar:(0,L.$8)("calendar")},template:e},filter:"",result:[],dirty:!1,panel:null,caption:e.options.title,icon:e.options.icon,view:{type:"program",result:[]}}});t("setting",n),t("current",{module:"setting"})},setSettingForm:c,settingBack:function(n){if("password"===e.setting.type)return t(e.current.module,{group_key:"group_admin"},(function(){j({type:"setting"})}));T({type:n||e.setting.type},"LOAD_SETTING")},settingSave:function(){t("current",{side:"hide"},(0,m.Z)((0,p.Z)().mark((function t(){var n;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("password"!==e.setting.type){t.next=4;break}h(),t.next=8;break;case 4:return t.next=6,Z();case 6:(n=t.sent)&&j({type:n.type,id:n.current.form.id});case 8:case"end":return t.stop()}}),t)}))))},setSettingData:b,setViewActions:k,tableValues:o}}(n,o),b=(0,s.useState)(u()(e,{$merge:{username:n.login.username,login:n.login.data}})),j=(0,l.Z)(b,1)[0];return j.data=u()(j.data,{$merge:(0,i.Z)({},n[j.key])}),j.current=u()(j.current,{$merge:(0,i.Z)({},n.current)}),(0,s.useEffect)((function(){if(j.current&&j.current.content){var e=j.current.content;o("current",{content:null},(function(){h.checkSetting(e,e.nextKey||"LOAD_SETTING")}))}}),[o,h,j]),j.getText=function(e,t){return _.getText(e,t)},j.onEvent=function(e,t){return h[e]?h[e].apply(h,(0,a.Z)(t)):_[e]?_[e].apply(_,(0,a.Z)(t)):void j[e].apply(j,(0,a.Z)(t))},j.changeData=function(e,t){o("setting",(0,r.Z)({},e,t))},j.companyForm=function(){o("current",{module:"edit",content:{ntype:"customer",ttype:null,id:1}})},j.data.type?(0,P.jsx)(we,(0,i.Z)({},j)):(0,P.jsx)("div",{})};Ne.defaultProps=(0,i.Z)((0,i.Z)({key:"setting"},Ze.defaultProps),{},{changeData:void 0,companyForm:void 0});var Te=Ne},9004:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(8627),a=n(3601),i=n(4800);function l(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(e),l=(0,r.Z)(t);return isNaN(l)?new Date(NaN):l?(n.setDate(n.getDate()+l),n):n}}}]);