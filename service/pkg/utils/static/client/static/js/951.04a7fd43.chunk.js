"use strict";(self.webpackChunknervatura_client=self.webpackChunknervatura_client||[]).push([[951],{9206:function(e,t){t.Z={currency:function(){return[{infoName:"currency_view",infoType:"view"}]},customer:function(){return[{infoName:"customer",infoType:"table",classAlias:"customer",where:[["deleted","=","0"],["and","id","=","?"]]},{infoName:"custtype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'custtype'"]],["and","groupvalue","<>","'own'"]],order:"groupname, groupvalue"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'","'custtype'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_customer_report'","'transyear'","'log_update'","'log_deleted'","'log_customer_update'","'log_customer_deleted'"]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:["fieldname"],from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"address",infoType:"view"},{infoName:"contact",infoType:"view"},{infoName:"event",infoType:"view"}]},deffield:function(){return[{infoName:"deffield_view",infoType:"view"},{infoName:"fieldtype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'fieldtype'"],["and","groupvalue","not in",[[],"'filter'","'checkbox'","'trans'"]]],order:"groupname, groupvalue"},{infoName:"nervatype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'nervatype'"],["and","groupvalue","in",[[],"'customer'","'employee'","'event'","'formula'","'place'","'product'","'project'","'tool'","'trans'"]]],order:"groupname, groupvalue"}]},employee:function(){return[{infoName:"employee",infoType:"view"},{infoName:"usergroup",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'usergroup'"]]],order:"groupname, groupvalue"},{infoName:"department",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'department'"]]],order:"groupname, groupvalue"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_employee_report'","'transyear'","'log_update'","'log_deleted'","'log_employee_update'","'log_employee_deleted'"]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:["fieldname"],from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"address",infoType:"view"},{infoName:"contact",infoType:"view"},{infoName:"event",infoType:"view"}]},event:function(){return[{infoName:"event",infoType:"view"},{infoName:"eventgroup",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'eventgroup'"]]],order:"groupname, groupvalue"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'event'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:[["fieldname","in",[[],"'default_event_report'","'transyear'","'log_update'","'log_deleted'","'log_event_update'","'log_event_deleted'"]]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:["fieldname"],from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'event'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"}]},groups:function(){return[{infoName:"groups_view",infoType:"view"}]},numberdef:function(){return[{infoName:"numberdef_view",infoType:"view"}]},place:function(){return[{infoName:"place",infoType:"table",classAlias:"place",where:[["deleted","=","0"],["and","id","=","?"]]},{infoName:"address",infoType:"table",classAlias:"address",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'place'"]]}]],["and","ref_id","=","?"]]},{infoName:"placetype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'placetype'"]]],order:"groupname, groupvalue"},{infoName:"currency",infoType:"table",classAlias:"currency",where:""},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_place_report'","'transyear'","'log_update'","'log_deleted'","'log_place_update'","'log_place_deleted'"]]},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'","'placetype'"]]],order:"groupname, groupvalue"},{infoName:"contact",infoType:"view"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'place'"]]}]]],order:"description"},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:"fieldname",from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'place'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"place_view",infoType:"view"}]},printqueue:function(){return[{infoName:"server_printers",infoType:"view"},{infoName:"items",infoType:"view"}]},product:function(){return[{infoName:"product",infoType:"table",classAlias:"product",where:[["deleted","=","0"],["and","id","=","?"]]},{infoName:"protype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'protype'"]]],order:"groupname, groupvalue"},{infoName:"barcodetype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'barcodetype'"]]],order:"groupname, groupvalue"},{infoName:"calcmode",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'calcmode'"]]],order:"groupname, groupvalue"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'","'protype'","'calcmode'","'barcodetype'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'product'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_product_report'","'transyear'","'log_update'","'log_deleted'","'log_product_update'","'log_product_deleted'","'default_currency'","'default_unit'","'default_taxcode'"]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:"fieldname",from:"deffield",where:["nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'product'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"currency",infoType:"table",classAlias:"currency",where:""},{infoName:"tax",infoType:"table",classAlias:"tax",where:""},{infoName:"event",infoType:"view"},{infoName:"barcode",infoType:"view"},{infoName:"price",infoType:"view"},{infoName:"discount",infoType:"view"}]},project:function(){return[{infoName:"project",infoType:"view"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_project_report'","'transyear'","'log_update'","'log_deleted'","'log_project_update'","'log_project_deleted'"]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:["fieldname"],from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"address",infoType:"view"},{infoName:"contact",infoType:"view"},{infoName:"event",infoType:"view"}]},rate:function(){return[{infoName:"rate",infoType:"view"},{infoName:"currency",infoType:"table",classAlias:"currency",where:""},{infoName:"ratetype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'ratetype'"]]],order:"groupname, groupvalue"},{infoName:"rategroup",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'rategroup'"]]],order:"groupname, groupvalue"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_rate_report'","'transyear'","'log_update'","'log_deleted'","'log_rate_update'","'log_rate_deleted'","'default_currency'"]]}]},report:function(){return[{infoName:"report",infoType:"view"}]},setting:function(){return[{infoName:"setting_view",infoType:"view"}]},tax:function(){return[{infoName:"tax_view",infoType:"view"}]},template:function(){return[{infoName:"template",infoType:"view"},{infoName:"template_view",infoType:"view"}]},tool:function(){return[{infoName:"tool",infoType:"view"},{infoName:"toolgroup",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'toolgroup'"]]],order:"groupname, groupvalue"},{infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'nervatype'","'fieldtype'","'logstate'"]]],order:"groupname, groupvalue"},{infoName:"deffield",infoType:"table",classAlias:"deffield",where:[["deleted","=","0"],["and","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'tool'"]]}]]],order:"description"},{infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_tool_report'","'transyear'","'log_update'","'log_deleted'","'log_tool_update'","'log_tool_deleted'"]]},{infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:"fieldname",from:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'tool'"]]}]]}]],["and","ref_id","=","?"]]},{infoName:"deffield_prop",infoType:"view"},{infoName:"event",infoType:"view"}]},trans:function(e){var t=[];switch(t.push({infoName:"groups",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'transtype'","'direction'","'trans'","'nervatype'","'fieldtype'","'logstate'","'placetype'","'movetype'"]]],order:"groupname, groupvalue"}),t.push({infoName:"transtate",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'transtate'"]],order:"groupname, groupvalue"}),t.push({infoName:"department",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'department'"]],order:"groupname, groupvalue"}),t.push({infoName:"paidtype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'paidtype'"]],order:"groupname, groupvalue"}),t.push({infoName:"deffield",infoType:"table",classAlias:"deffield",where:["nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}],["or","nervatype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'link'"]]}]]],order:"description"}),t.push({infoName:"settings",infoType:"table",classAlias:"fieldvalue",where:["fieldname","in",[[],"'default_currency'","'show_partnumber'","'show_partcustomer'","'invoice_from_inventory'","'log_trans_update'","'log_trans_deleted'","'log_trans_closed'","'default_trans_"+e+"_out_report'","'default_trans_"+e+"_in_report'","'trans_closed_policy_"+e+"_out'","'trans_closed_policy_"+e+"_in'","'invoice_copy'","'default_deadline'","'default_paidtype'","'default_bank'","'default_chest'","'default_warehouse'"]]}),t.push({infoName:"fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],{select:"fieldname",from:"deffield df",inner_join:["groups g","on",[["df.nervatype","=","g.id"],["and","g.groupvalue","=","'trans'"]]]}]],["and","ref_id","=","?"]]}),t.push({infoName:"deffield_prop",infoType:"view"}),t.push({infoName:"translink",infoType:"view"}),t.push({infoName:"cancel_link",infoType:"view"}),t.push({infoName:"currency",infoType:"table",classAlias:"currency",where:""}),t.push({infoName:"tax",infoType:"table",classAlias:"tax",where:""}),t.push({infoName:"pattern",infoType:"table",classAlias:"pattern",where:[["deleted","=","0"],["and","transtype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'transtype'"],["and","groupvalue","=","'"+e+"'"]]}]]]}),t.push({infoName:"delivery_pattern",infoType:"table",classAlias:"pattern",where:[["deleted","=","0"],["and","transtype","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'transtype'"],["and","groupvalue","=","'delivery'"]]}]]]}),t.push({infoName:"place",infoType:"table",classAlias:"place",where:["deleted","=","0"]}),t.push({infoName:"direction",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'direction'"],["and","groupvalue","in",[[],"'out'","'in'"]]],order:"groupname, groupvalue"}),t.push({infoName:"trans",infoType:"view"}),t.push({infoName:"item",infoType:"view"}),t.push({infoName:"tool_movement",infoType:"view"}),t.push({infoName:"element_count",infoType:"view"}),t.push({infoName:"payment",infoType:"view"}),e){case"bank":case"cash":t.push({infoName:"payment_link",infoType:"view"}),t.push({infoName:"payment_link_fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],"'link_qty'","'link_rate'"]],["and","ref_id","in",[[],{select:["id"],from:"link",where:[["deleted","=","0"],["and","nervatype_1","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'payment'"]]}]],["and","ref_id_1","in",[[],{select:["id"],from:"payment",where:[["deleted","=","0"],["and","trans_id","=","?"]]}]]]}]]]});break;case"invoice":t.push({infoName:"invoice_link",infoType:"view"}),t.push({infoName:"invoice_link_fieldvalue",infoType:"table",classAlias:"fieldvalue",where:[["deleted","=","0"],["and","fieldname","in",[[],"'link_qty'","'link_rate'"]],["and","ref_id","in",[[],{select:["id"],from:"link",where:[["deleted","=","0"],["and","nervatype_2","=",[[],{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","ref_id_2","=","?"]]}]]]});break;case"formula":t.push({infoName:"movement_head",infoType:"view",sqlKey:"movement_formula_head"}),t.push({infoName:"movement",infoType:"view",sqlKey:"movement_formula"});break;case"production":t.push({infoName:"formula_head",infoType:"view",sqlKey:"formula_head"}),t.push({infoName:"movement_head",infoType:"view",sqlKey:"movement_production_head"}),t.push({infoName:"movement",infoType:"view",sqlKey:"movement_production"});break;case"delivery":t.push({infoName:"place",infoType:"table",classAlias:"place",where:"deleted=0"}),t.push({infoName:"movement",infoType:"view",sqlKey:"movement_delivery"}),t.push({infoName:"movement_transfer",infoType:"view"});break;case"inventory":t.push({infoName:"movement",infoType:"view",sqlKey:"movement_inventory"});break;case"waybill":t.push({infoName:"movement",infoType:"view",sqlKey:"movement_waybill"});break;case"order":case"worksheet":case"rent":t.push({infoName:"transitem_invoice",infoType:"view"}),t.push({infoName:"transitem_shipping",infoType:"view"}),t.push({infoName:"shipping_items",infoType:"view"}),t.push({infoName:"shipping_delivery",infoType:"view"})}return t},ui_menu:function(){return[{infoName:"fieldtype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'fieldtype'"],["and","groupvalue","in",[[],"'bool'","'date'","'integer'","'float'","'string'"]]],order:"groupname, groupvalue"},{infoName:"method",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'method'"]],order:"groupname, groupvalue"},{infoName:"ui_menu_view",infoType:"view"}]},usergroup:function(){return[{infoName:"nervatype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'nervatype'"],["and","groupvalue","in",[[],"'audit'","'customer'","'product'","'price'","'employee'","'tool'","'project'","'event'","'setting'","'trans'","'menu'","'report'"]]],order:"groupname, groupvalue"},{infoName:"transtype",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'transtype'"],["and","groupvalue","in",[[],"'offer'","'order'","'worksheet'","'rent'","'invoice'","'delivery'","'inventory'","'waybill'","'production'","'formula'","'bank'","'cash'"]]],order:"groupname, groupvalue"},{infoName:"inputfilter",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'inputfilter'"]],order:"groupname, groupvalue"},{infoName:"transfilter",infoType:"table",classAlias:"groups",where:[["deleted","=","0"],["and","groupname","=","'transfilter'"]],order:"groupname, groupvalue"},{infoName:"reportkey",infoType:"view"},{infoName:"menukey",infoType:"view"},{infoName:"usergroup_view",infoType:"view"}]}}},3421:function(e,t,a){a.d(t,{E:function(){return o}});var n=a(4754),r=a.n(n),l=a(4848),o=function(e){var t=e.getText;return{address:function(e){var a={options:{title:t("address_view"),title_field:"",icon:"Home",panel:{}},rows:[{rowtype:"col3",columns:[{name:"country",label:t("address_country"),datatype:"string"},{name:"state",label:t("address_state"),datatype:"string"},{name:"zipcode",label:t("address_zipcode"),datatype:"string"}]},{rowtype:"field",name:"city",label:t("address_city"),datatype:"string"},{rowtype:"field",name:"street",label:t("ddress_street"),datatype:"string"},{rowtype:"field",name:"notes",label:t("address_notes"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},bank:function(e,a){var n={options:{title:t("title_bank"),title_field:"transnumber",icon:"Money",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"document/payment"}},view:{payment:{type:"table",icon:"ListOl",title:t("item_view"),data:"payment",total:{expense:t("payment_expense"),income:t("payment_income"),balance:t("payment_balance")},fields:{rid:{fieldtype:"number",label:t("payment_item")},paiddate:{fieldtype:"date",label:t("payment_paiddate2")},amount:{fieldtype:"number",label:t("payment_amount")},notes:{fieldtype:"string",label:t("payment_description")}}},payment_link:{type:"list",data:"payment_link",icon:"FileText",title:t("invoice_view"),actions:{new:null,edit:{action:"editEditorItem",fkey:"payment_link"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"crdate",label:t("bank_crdate"),datatype:"date",disabled:!1},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"transdate",label:t("bank_transdate"),datatype:"date"},{name:"place_id",label:t("payment_place_bank"),datatype:"selector",empty:!1,map:{seltype:"place_bank",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):a.dataset.translink.length>0&&(n=r()(n,{rows:{0:{columns:{0:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}))),n},barcode:function(e){var a={options:{title:t("barcode_view"),title_field:"",icon:"Barcode",panel:{}},rows:[{rowtype:"field",name:"code",label:t("barcode_code"),datatype:"string"},{rowtype:"col3",columns:[{name:"barcodetype",label:t("barcode_barcodetype"),datatype:"select",map:{source:"barcodetype",value:"id",text:"description"}},{name:"qty",label:t("barcode_qty"),datatype:"float"},{name:"defcode",label:t("barcode_defcode"),datatype:"flip"}]},{rowtype:"field",name:"description",label:t("barcode_description"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},cash:function(e,a){var n={options:{title:t("title_cash"),title_field:"transnumber",icon:"Money",fieldvalue:!0,pattern:!0,extend:"payment",panel:{arrow:!0,more:!0,trans:!0,create:!1,cancellation:!0,bookmark:["editor","trans","transnumber"],help:"document/payment",link:!0,link_type:"payment_link",link_field:"ref_id_1",link_label:t("label_link_invoice")}},view:{payment_link:{type:"list",data:"payment_link",icon:"FileText",title:t("invoice_view"),actions:{new:null,edit:{action:"editEditorItem",fkey:"payment_link"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:t("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:t("document_closed"),datatype:"flip"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"direction",label:t("document_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"cash"}},{name:"id",label:t("payment_paiddate"),datatype:"date",map:{source:"payment",value:"trans_id",text:"paiddate",extend:!0}},{name:"id",label:t("payment_amount"),datatype:"float",opposite:!0,map:{source:"payment",value:"trans_id",text:"amount",extend:!0}}]},{rowtype:"col2",columns:[{name:"place_id",label:t("payment_place_cash"),datatype:"selector",empty:!1,map:{seltype:"place_cash",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}}]},{rowtype:"col2",columns:[{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"intnotes",label:t("document_intnotes"),datatype:"text"}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"}]};"undefined"!==typeof e&&("out"===a.dataset.groups.filter((function(t){return t.id===e.direction}))[0].groupvalue&&(n=r()(n,{options:{$merge:{opposite:!0}}})),null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1,link:!1}}}}):(n=r()(n,{rows:{1:{columns:{0:{$merge:{disabled:!0}}}}}}),a.dataset.translink.length>0?n=r()(n,{rows:{3:{columns:{0:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}):a.dataset.cancel_link.length>0&&(n=r()(n,{rows:{3:{columns:{0:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}}}}}}}))));return n},contact:function(e){var a={options:{title:t("contact_view"),title_field:"",icon:"Phone",panel:{}},rows:[{rowtype:"col2",columns:[{name:"firstname",label:t("contact_firstname"),datatype:"string"},{name:"surname",label:t("contact_surname"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"status",label:t("contact_status"),datatype:"string"},{name:"phone",label:t("contact_phone"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"mobil",label:t("contact_mobil"),datatype:"string"},{name:"fax",label:t("contact_fax"),datatype:"string"}]},{rowtype:"field",name:"email",label:t("contact_email"),datatype:"string"},{rowtype:"field",name:"notes",label:t("contact_notes"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},currency:function(e){var a={options:{icon:"Dollar",data:"currency",title:t("title_currency"),panel:{page:"setting",more:!1,help:"settings/currency"}},view:{setting:{type:"table",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}},fields:{curr:{fieldtype:"string",label:t("currency_curr")},description:{fieldtype:"string",label:t("currency_description")},digit:{fieldtype:"number",label:t("currency_digit")},cround:{fieldtype:"number",label:t("currency_cround")},defrate:{fieldtype:"number",label:t("currency_defrate")}}}},rows:[{rowtype:"col2",columns:[{name:"curr",label:t("currency_curr"),datatype:"string"},{name:"description",label:t("currency_description"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"digit",label:t("currency_digit"),datatype:"integer"},{name:"cround",label:t("currency_cround"),datatype:"integer"},{name:"defrate",label:t("currency_defrate"),datatype:"float"}]}]};return"undefined"!==typeof e&&(a=null!==e.id?r()(a,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}):r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},customer:function(e,a){var n={options:{title:t("title_customer"),title_field:"custnumber",icon:"User",fieldvalue:!0,panel:{more:!0,bookmark:["editor","customer","custname","custnumber"],help:"resources/customer"}},view:{address:{type:"list",data:"address",icon:"Home",title:t("address_view")},contact:{type:"list",data:"contact",icon:"Phone",title:t("contact_view")},event:{type:"list",data:"event",icon:"Calendar",title:t("event_view"),actions:{new:{action:"loadEditor",ntype:"event",ttype:null},edit:{action:"loadEditor",ntype:"event",ttype:null},delete:{action:"deleteEditorItem",fkey:"event",table:"event"}}}},rows:[{rowtype:"field",name:"custname",label:t("customer_custname"),datatype:"string"},{rowtype:"col3",columns:[{name:"custnumber",label:t("customer_custnumber"),datatype:"string"},{name:"taxnumber",label:t("customer_taxnumber"),datatype:"string"},{name:"account",label:t("customer_account"),datatype:"string"}]}]};return"undefined"!==typeof e&&("undefined"!==typeof a.dataset.custtype&&(e.custtype===a.dataset.groups.filter((function(e){return"custtype"===e.groupname&&"own"===e.groupvalue}))[0].id?(n=r()(n,{options:{$merge:{title:t("title_company"),icon:"Home"}}}),n=r()(n,{options:{panel:{$merge:{new:!1,delete:!1}}}})):n=r()(n,{rows:{$push:[{rowtype:"col3",columns:[{name:"creditlimit",label:t("customer_creditlimit"),datatype:"float"},{name:"terms",label:t("customer_terms"),datatype:"integer"},{name:"discount",label:t("customer_discount"),datatype:"float",min:0,max:100}]},{rowtype:"col3",columns:[{name:"custtype",label:t("customer_custtype"),datatype:"select",map:{source:"custtype",value:"id",text:"groupvalue"}},{name:"inactive",label:t("customer_inactive"),datatype:"flip"},{name:"notax",label:t("customer_notax"),datatype:"flip"}]}]}}),n=r()(n,{rows:{$push:[{rowtype:"field",name:"notes",label:t("customer_notes"),datatype:"text"}]}})),n=null===e.id?r()(n,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1}}}}):r()(n,{rows:{1:{$merge:{columns:n.rows[1].columns.slice(1,n.rows[1].columns.length),rowtype:"col2"}}}})),n},deffield:function(e,a){var n={options:{icon:"Tag",data:"deffield",title:t("title_deffield"),panel:{page:"setting",more:!1,help:"settings/metadata"}},view:{setting:{type:"list",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}}}},rows:[{rowtype:"field",name:"fieldname",label:t("deffield_fieldname"),datatype:"string",disabled:!0},{rowtype:"col2",columns:[{name:"nervatype",label:t("deffield_nervatype"),datatype:"select",empty:!0,map:{source:"nervatype",value:"id",text:"groupvalue"}},{name:"fieldtype",label:t("deffield_fieldtype"),datatype:"select",empty:!0,map:{source:"fieldtype",value:"id",text:"groupvalue"}}]},{rowtype:"field",name:"description",label:t("deffield_description"),datatype:"string"},{rowtype:"col3",columns:[{name:"addnew",label:t("deffield_addnew"),datatype:"flip"},{name:"visible",label:t("deffield_visible"),datatype:"flip"},{name:"readonly",label:t("deffield_readonly"),datatype:"flip"}]}]};return"undefined"!==typeof e&&(null!==e.id?(n=r()(n,{rows:{1:{columns:{0:{$merge:{disabled:!0}},1:{$merge:{disabled:!0}}}}}}),e.fieldtype===a.dataset.fieldtype.filter((function(e){return"valuelist"===e.groupvalue}))[0].id&&(n=r()(n,{rows:{$push:[{rowtype:"field",name:"valuelist",label:t("deffield_valuelist"),datatype:"text"}]}}))):n=r()(n,{options:{panel:{$merge:{new:!1,delete:!1}}}})),n},delivery:function(e,a){var n={options:{title:t("title_delivery"),title_field:"transnumber",icon:"Truck",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,copy:!1,cancellation:!0,delete:!1,new:!1,bookmark:["editor","trans","transnumber"],help:"stock/delivery"}},view:{movement:{type:"table",icon:"ListOl",title:t("item_view"),data:"movement",edited:!1,fields:{product:{fieldtype:"string",label:t("product_description")},unit:{fieldtype:"string",label:t("product_unit")},notes:{fieldtype:"string",label:t("movement_batchnumber")},qty:{fieldtype:"number",label:t("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("delivery_direction"),datatype:"string",map:{source:"groups",value:"id",text:"groupvalue",label:"delivery"}},{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"movement",value:"trans_id",text:"item_ref_id",label_field:"item_refnumber",lnktype:"trans",transtype:"order"}},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("delivery_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("delivery_transdate"),datatype:"date",disabled:!0},{name:"id",label:t("delivery_place"),datatype:"string",map:{source:"movement",value:"trans_id",text:"planumber"}}]}]};"undefined"!==typeof e&&("transfer"===a.dataset.groups.filter((function(t){return t.id===e.direction}))[0].groupvalue&&(n=a.dataset.translink&&a.dataset.translink.length>0?r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}):a.dataset.cancel_link&&a.dataset.cancel_link.length>0?r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}}}}}}}):r()(n,{rows:{0:{columns:{1:{$set:{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"}}}}}}),n=r()(n,{rows:{1:{columns:{1:{$merge:{disabled:!1}},2:{$set:{name:"closed",label:t("document_closed"),datatype:"flip"}}}}}}),n=r()(n,{rows:{$push:[{rowtype:"col2",columns:[{name:"place_id",label:t("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"target_place",label:t("movement_target"),datatype:"selector",empty:!1,disabled:!0,map:{seltype:"place_warehouse",table:"trans",fieldname:"target_place",lnktype:"place",transtype:"",label_field:"target_planumber"}}]}]}}),n=null===e.id?r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):r()(n,{options:{panel:{$merge:{copy:!0,new:!0}}},view:{movement:{$merge:{edit:!0,data:"movement_transfer"}}},rows:{2:{columns:{0:{$merge:{disabled:!0}}}}}})),n=r()(n,{rows:{$push:[{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]}}));return n},discount:function(e){var a={options:{title:t("discount_view"),title_field:"",icon:"Dollar",panel:{}},rows:[{rowtype:"col3",columns:[{name:"validfrom",label:t("price_validfrom"),datatype:"date"},{name:"validto",label:t("price_validto"),datatype:"date",empty:!0},{name:"vendor",label:t("price_vendor"),datatype:"flip"}]},{rowtype:"col3",columns:[{name:"curr",label:t("price_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"qty",label:t("price_qty"),datatype:"float"},{name:"pricevalue",label:t("price_limit"),datatype:"float"}]},{rowtype:"col2",columns:[{name:"calcmode",label:t("price_calcmode"),datatype:"select",map:{source:"calcmode",value:"id",text:"description"}},{name:"discount",label:t("price_discount"),datatype:"float"}]},{rowtype:"field",name:"id",label:t("customer_custname"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"discount",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},employee:function(e){var a={options:{title:t("title_employee"),title_field:"empnumber",icon:"Male",extend:"contact",fieldvalue:!0,panel:{more:!0,password:!0,bookmark:["editor","employee","empnumber","empnumber"],help:"resources/employee"}},view:{address:{type:"list",data:"address",icon:"Home",title:t("address_view")},event:{type:"list",data:"event",icon:"Calendar",title:t("event_view"),actions:{new:{action:"loadEditor",ntype:"event",ttype:null},edit:{action:"loadEditor",ntype:"event",ttype:null},delete:{action:"deleteEditorItem",fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"empnumber",label:t("employee_empnumber"),datatype:"string"},{name:"id",label:t("contact_firstname"),datatype:"string",map:{source:"contact",value:"ref_id",text:"firstname",extend:!0}},{name:"id",label:t("contact_surname"),datatype:"string",map:{source:"contact",value:"ref_id",text:"surname",extend:!0}}]},{rowtype:"col3",columns:[{name:"id",label:t("contact_status"),datatype:"string",map:{source:"contact",value:"ref_id",text:"status",extend:!0}},{name:"id",label:t("contact_phone"),datatype:"string",map:{source:"contact",value:"ref_id",text:"phone",extend:!0}},{name:"id",label:t("contact_mobil"),datatype:"string",map:{source:"contact",value:"ref_id",text:"mobil",extend:!0}}]},{rowtype:"field",name:"id",label:t("contact_email"),datatype:"string",map:{source:"contact",value:"ref_id",text:"email",extend:!0}},{rowtype:"col3",columns:[{name:"startdate",label:t("employee_startdate"),datatype:"date",empty:!0},{name:"enddate",label:t("employee_enddate"),datatype:"date",empty:!0},{name:"department",label:t("employee_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col3",columns:[{name:"usergroup",label:t("employee_usergroup"),datatype:"select",empty:!1,map:{source:"usergroup",value:"id",text:"groupvalue"}},{name:"username",label:t("employee_username"),datatype:"string"},{name:"inactive",label:t("employee_inactive"),datatype:"flip"}]},{rowtype:"field",name:"id",label:t("employee_notes"),datatype:"text",map:{source:"contact",value:"ref_id",text:"notes",extend:!0}}]};return"undefined"!==typeof e&&(a=null===e.id?r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1,password:!1}}}}):r()(a,{rows:{0:{$merge:{columns:a.rows[0].columns.slice(1,a.rows[0].columns.length),rowtype:"col2"}}}})),a},event:function(e){var a={options:{title:t("title_event"),title_field:"calnumber",icon:"Calendar",fieldvalue:!0,panel:{back:!0,more:!0,bookmark:["editor","event","calnumber","calnumber"],help:"resources/event",export_event:!0,report:!1}},view:{},rows:[{rowtype:"field",name:"subject",label:t("event_subject"),datatype:"string"},{rowtype:"col2",columns:[{name:"place",label:t("event_place"),datatype:"string"},{name:"eventgroup",label:t("event_group"),datatype:"select",empty:!0,map:{source:"eventgroup",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"fromdate",label:t("event_fromdate"),datatype:"datetime",empty:!0},{name:"todate",label:t("event_todate"),datatype:"datetime",empty:!0}]},{rowtype:"field",name:"description",label:t("event_description"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1,export_event:!1}}}})),a},formula:function(e,a){var n={options:{title:t("title_formula"),title_field:"transnumber",icon:"Magic",fieldvalue:!0,pattern:!0,extend:"movement_head",panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"stock/formula"}},view:{movement:{type:"table",icon:"ListOl",title:t("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:t("product_description")},unit:{fieldtype:"string",label:t("product_unit")},cb_shared:{fieldtype:"bool",label:t("formula_shared")},qty:{fieldtype:"number",label:t("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:t("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:t("document_closed"),datatype:"flip"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement_head",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product",extend:!0}},{rowtype:"col2",columns:[{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"qty",label:t("movement_qty"),datatype:"float",map:{text:"qty",extend:!0}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"intnotes",name:"notes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,password:!1,trans:!1}}}}):a.dataset.translink.length>0&&(n=r()(n,{rows:{2:{columns:{0:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}))),n},groups:function(e){var a={options:{icon:"Th",data:"groups",title:t("title_groups"),panel:{page:"setting",more:!1,help:"settings/groups"}},view:{setting:{type:"list",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}}}},rows:[{rowtype:"field",name:"groupvalue",label:t("groups_groupvalue"),datatype:"string"},{rowtype:"col2",columns:[{name:"groupname",label:t("groups_groupname"),datatype:"select",default:"",options:[["",""],["department","department"],["eventgroup","eventgroup"],["paidtype","paidtype"],["toolgroup","toolgroup"],["rategroup","rategroup"]]},{name:"inactive",label:t("groups_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:t("groups_description"),datatype:"text"}]};return"undefined"!==typeof e&&(a=null!==e.id?r()(a,{rows:{1:{columns:{0:{$merge:{disabled:!0}}}}}}):r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},inventory:function(e){var a={options:{title:t("title_inventory"),title_field:"transnumber",icon:"Truck",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,cancellation:!0,delete:!1,bookmark:["editor","trans","transnumber"],help:"stock/inventory"}},view:{movement:{type:"table",icon:"ListOl",title:t("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:t("product_description")},unit:{fieldtype:"string",label:t("product_unit")},notes:{fieldtype:"string",label:t("movement_batchnumber")},qty:{fieldtype:"number",label:t("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"place_id",label:t("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("delivery_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("inventory_posdate"),datatype:"date"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}})),a},invoice_link:function(e){var a={options:{data:"link",title:t("payment_view"),title_field:"",icon:"Money",panel:{}},rows:[{rowtype:"field",name:"ref_id_1",label:t("payment_paidnumber"),datatype:"selector",empty:!1,map:{seltype:"payment",table:"invoice_link",fieldname:"ref_id_1",lnktype:"trans",transtype:"",lnkid:"trans_id",label_field:"transnumber"}},{rowtype:"col3",columns:[{name:"id",label:t("payment_curr"),datatype:"string",map:{source:"invoice_link",value:"id",text:"curr"}},{name:"link_qty",label:t("payment_amount"),datatype:"float",map:{source:"invoice_link_fieldvalue",value:"fieldname",text:"value"}},{name:"link_rate",label:t("payment_rate"),datatype:"float",map:{source:"invoice_link_fieldvalue",value:"fieldname",text:"value"}}]}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},invoice:function(e,a){var n={options:{title:t("title_invoice"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}},invoice_link:{type:"list",data:"invoice_link",icon:"Money",title:t("payment_view"),actions:{new:{action:"newEditorItem",fkey:"invoice_link"},edit:{action:"editEditorItem",fkey:"invoice_link"},delete:{action:"deleteEditorItem",fkey:"invoice_link",table:"link"}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:t("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:"loadEditor",ntype:"trans",ttype:"waybill"},edit:{action:"loadEditor",ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("invoce_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"invoice"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("invoice_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("invoice_transdate"),datatype:"date"},{name:"duedate",label:t("invoice_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:t("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("document_acrate"),datatype:"float",default:0},{name:"paid",label:t("invoice_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(n=r()(n,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}),a.dataset.translink.length>0?n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}):a.dataset.cancel_link.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}}}}}}})),"out"===a.dataset.groups.filter((function(t){return t.id===e.direction}))[0].groupvalue&&"normal"===e.transcast&&(n=0===e.deleted?r()(n,{options:{panel:{$merge:{corrective:!0}}}}):r()(n,{options:{panel:{$merge:{cancellation:!0}}}}))));return n},item:function(e,a){var n={options:{title:t("item_view"),title_field:"",icon:"ListOl",panel:{help:"document/item"}},rows:[{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product",table:"item",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"partnumber"}},{rowtype:"field",name:"description",label:t("item_description"),datatype:"text"},{rowtype:"col2",columns:[{name:"unit",label:t("item_unit"),datatype:"string"},{name:"ownstock",label:t("item_ownstock"),datatype:"float"}]},{rowtype:"col3",columns:[{name:"qty",label:t("item_qty"),datatype:"float"},{name:"discount",label:t("item_discount"),datatype:"float",min:0,max:100},{name:"fxprice",label:t("item_fxprice"),datatype:"float"}]},{rowtype:"col3",columns:[{name:"netamount",label:t("item_netamount"),datatype:"float"},{name:"tax_id",label:t("item_taxcode"),datatype:"select",empty:!0,map:{source:"tax",value:"id",text:"taxcode"}},{name:"amount",label:t("item_amount"),datatype:"float"}]}]};if("undefined"!==typeof e)switch(null===e.id&&(n=r()(n,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a.current.transtype){case"invoice":n=r()(n,{rows:{2:{$set:{rowtype:"col3",columns:[{name:"unit",label:t("item_unit"),datatype:"string"},{name:"ownstock",label:t("item_ownstock"),datatype:"float"},{name:"deposit",label:t("item_deposit_1"),datatype:"flip"}]}}}});break;case"offer":n=r()(n,{rows:{2:{$set:{rowtype:"col3",columns:[{name:"unit",label:t("item_unit"),datatype:"string"},{name:"ownstock",label:t("item_ownstock"),datatype:"float"},{name:"deposit",label:t("item_deposit_2"),datatype:"flip"}]}}}})}return n},log:function(){return{options:{title:t("title_log"),title_field:"",edited:!1,icon:"InfoCircle",panel:{}},view:{setting:{type:"table",actions:{new:null,edit:null,delete:null},fields:{crdate:{fieldtype:"date",label:t("log_crdate")},empnumber:{fieldtype:"string",label:t("log_empnumber")},logstate:{fieldtype:"string",label:t("log_logstate")},nervatype:{fieldtype:"string",label:t("log_nervatype")},refnumber:{fieldtype:"string",label:t("log_refnumber")}}}},rows:[{rowtype:"col3",columns:[{name:"fromdate",label:t("log_fromdate"),datatype:"date"},{name:"todate",label:t("log_todate"),datatype:"date",empty:!0},{name:"empnumber",label:t("log_empnumber"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"logstate",label:t("log_logstate"),datatype:"select",empty:!1,options:[["update","update"],["closed","closed"],["deleted","deleted"],["print","print"],["login","login"],["logout","logout"]]},{name:"nervatype",label:t("log_nervatype"),datatype:"select",default:"",options:[["",""],["customer","customer"],["employee","employee"],["event","event"],["place","place"],["product","product"],["project","project"],["tool","tool"],["trans","trans"]]},{name:"log_search",title:t("browser_search"),label:"",focus:!0,class:"full",icon:"Search",datatype:"button"}]}]}},movement:function(e,a){var n={options:{title:t("movement_view"),title_field:"",icon:"Truck",opposite:!0,panel:{}}};switch(a.current.transtype){case"delivery":n.rows=[{rowtype:"col2",columns:[{name:"place_id",label:t("movement_target"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}},{name:"trans_id",label:t("movement_place"),datatype:"link",map:{source:"trans",value:"id",text:"place_id",label_field:"planumber",lnktype:"place",transtype:""}}]},{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"trans_id",label:t("movement_shippingdate"),datatype:"date",map:{source:"trans",value:"id",text:"transdate"}},{name:"notes",label:t("movement_batchnumber"),datatype:"string"},{name:"qty",label:t("movement_qty"),datatype:"float"}]}];break;case"inventory":n.rows=[{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"trans_id",label:t("movement_shippingdate"),datatype:"date",map:{source:"trans",value:"id",text:"transdate"}},{name:"notes",label:t("movement_batchnumber"),datatype:"string"},{name:"qty",label:t("movement_qty"),datatype:"float"}]}];break;case"production":n.rows=[{rowtype:"col2",columns:[{name:"shippingdate",label:t("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"place_id",label:t("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col2",columns:[{name:"notes",label:t("movement_batchnumber"),datatype:"string"},{name:"qty",label:t("movement_qty"),datatype:"float",opposite:!0}]}];break;case"formula":n.rows=[{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"col3",columns:[{name:"qty",label:t("movement_qty"),datatype:"float"},{name:"shared",label:t("formula_shared"),datatype:"flip"},{name:"place_id",label:t("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"movement",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"}];break;case"waybill":n.rows=[{rowtype:"col2",columns:[{name:"shippingdate",label:t("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"tool_id",label:t("tool_serial"),datatype:"selector",empty:!1,map:{seltype:"tool",table:"movement",fieldname:"tool_id",lnktype:"tool",transtype:"",label_field:"serial"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"}]}return"undefined"!==typeof e&&null===e.id&&(n=r()(n,{options:{panel:{$merge:{new:!1,delete:!1}}}})),n},numberdef:function(){var e={options:{icon:"ListOl",data:"numberdef",title:t("title_numberdef"),panel:{page:"setting",delete:!1,new:!1,more:!1,help:"settings/numberdef"}},view:{setting:{type:"table",actions:{new:null,edit:{action:"editItem"},delete:null},fields:{numberkey:{fieldtype:"string",label:t("numberdef_numberkey")},prefix:{fieldtype:"string",label:t("numberdef_prefix")},is_year:{fieldtype:"string",label:t("numberdef_isyear"),align:"center"},sep:{fieldtype:"string",label:t("numberdef_sep_short"),align:"center"},len:{fieldtype:"number",label:t("numberdef_len")},curvalue:{fieldtype:"number",align:"right",label:t("numberdef_curvalue")}}}},rows:[{rowtype:"field",name:"numberkey",label:t("numberdef_numberkey"),datatype:"string",disabled:!0},{rowtype:"col2",columns:[{name:"prefix",label:t("numberdef_prefix"),datatype:"string"},{name:"curvalue",label:t("numberdef_curvalue"),datatype:"integer"}]},{rowtype:"col3",columns:[{name:"isyear",label:t("numberdef_isyear"),datatype:"flip"},{name:"sep",label:t("numberdef_sep"),datatype:"string",length:1},{name:"len",label:t("numberdef_len"),datatype:"integer"}]},{rowtype:"field",name:"description",label:t("numberdef_description"),datatype:"text"}]};return e},offer:function(e,a){var n={options:{title:t("title_offer"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("offer_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"offer"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("offer_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("offer_transdate"),datatype:"date"},{name:"duedate",label:t("offer_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:t("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("offer_acrate"),datatype:"float",default:0},{name:"paid",label:t("offer_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(n=r()(n,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}),a.dataset.translink.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}})))),n},order:function(e,a){var n={options:{title:t("title_order"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:t("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:"loadEditor",ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:t("shipping_view"),new_icon:"Truck",new_label:t("title_shipping"),actions:{new:{action:"loadShipping"},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:t("shipping_item_product")},movement_product:{fieldtype:"string",label:t("shipping_movement_product")},sqty:{fieldtype:"number",label:t("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:t("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:"loadEditor",ntype:"trans",ttype:"waybill"},edit:{action:"loadEditor",ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("order_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"order"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("order_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("order_transdate"),datatype:"date"},{name:"duedate",label:t("order_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:t("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("order_acrate"),datatype:"float",default:0},{name:"paid",label:t("order_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(n=r()(n,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}),a.dataset.translink.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}})))),n},password:function(){return{options:{title:t("title_password"),title_field:"",edited:!1,icon:"Lock",panel:{delete:!1,new:!1}},view:{},rows:[{rowtype:"col3",columns:[{name:"username",label:t("password_username"),datatype:"string",disabled:!0},{name:"password_1",label:t("password_new"),datatype:"password"},{name:"password_2",label:t("password_verify"),datatype:"password"}]}]}},payment_link:function(e){var a={options:{data:"link",title:t("invoice_view"),title_field:"",icon:"FileText",panel:{new:!1}},rows:[{rowtype:"field",name:"ref_id_2",label:t("invoice_transnumber"),datatype:"selector",empty:!1,map:{seltype:"transitem_invoice",table:"payment_link",fieldname:"ref_id_2",lnktype:"trans",transtype:"invoice",lnkid:"trans_id",label_field:"transnumber"}},{rowtype:"col3",columns:[{name:"id",label:t("payment_curr"),datatype:"string",map:{source:"payment_link",value:"id",text:"curr"}},{name:"link_qty",label:t("payment_amount"),datatype:"float",map:{source:"payment_link_fieldvalue",value:"fieldname",text:"value"}},{name:"link_rate",label:t("payment_rate"),datatype:"float",map:{source:"payment_link_fieldvalue",value:"fieldname",text:"value"}}]}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1}}}})),a},payment:function(e){var a={options:{title:t("payment_view"),title_field:"",icon:"Money",panel:{link:!0,link_type:"payment_link",link_field:"ref_id_1",link_label:t("label_link_invoice")}},rows:[{rowtype:"col2",columns:[{name:"paiddate",label:t("payment_paiddate"),datatype:"date"},{name:"amount",label:t("payment_amount"),datatype:"float"}]},{rowtype:"field",name:"notes",label:t("payment_description"),datatype:"text"}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,link:!1}}}})),a},place:function(e,a){var n,l={options:{title:t("title_place"),title_field:"planumber",icon:"Map",extend:"address",fieldvalue:!0,panel:{more:!0,report:!1,bookmark:["editor","place","description","planumber"],help:"settings/place"}},view:{setting:{type:"table",actions:{new:{action:"editItem"},edit:{action:"editItem"},delete:{action:"deleteItem",tablename:"place"}},fields:{planumber:{fieldtype:"string",label:t("place_planumber")},place_type:{fieldtype:"string",label:t("place_placetype")},description:{fieldtype:"string",label:t("place_description")}}},contact:{type:"list",data:"contact",icon:"Phone",title:t("contact_view")}},rows:[{rowtype:"field",name:"description",label:t("place_description"),datatype:"string"},{rowtype:"col2",columns:[{name:"placetype",label:t("place_placetype"),datatype:"select",empty:!0,map:{source:"placetype",value:"id",text:"groupvalue"}},{name:"inactive",label:t("place_inactive"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"id",label:t("address_zipcode"),datatype:"string",map:{source:"address",value:"ref_id",text:"zipcode",extend:!0}},{name:"id",label:t("address_city"),datatype:"string",map:{source:"address",value:"ref_id",text:"city",extend:!0}}]},{rowtype:"field",name:"id",label:t("address_street"),datatype:"string",map:{source:"address",value:"ref_id",text:"street",extend:!0}},{rowtype:"field",name:"notes",label:t("place_notes"),datatype:"text"}]};"undefined"!==typeof e&&(null===e.id?l=r()(l,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1}}}}):(l=r()(l,{rows:{1:{columns:{0:{$merge:{disabled:!0}}}}}}),n=a.dataset.placetype?a.dataset.placetype.filter((function(e){return"warehouse"===e.groupvalue}))[0]:a.dataset.groups.filter((function(e){return"placetype"===e.groupname&&"warehouse"===e.groupvalue}))[0],e.placetype!==n.id&&(l=r()(l,{rows:{1:{$merge:{rowtype:"col3"}}}}),l=r()(l,{rows:{1:{columns:{$push:[{name:"curr",label:t("place_curr"),datatype:"select",empty:!1,map:{source:"currency",value:"curr",text:"curr"}}]}}}}))));return l},price:function(e){var a={options:{title:t("price_view"),title_field:"",icon:"Dollar",panel:{}},rows:[{rowtype:"col3",columns:[{name:"validfrom",label:t("price_validfrom"),datatype:"date"},{name:"validto",label:t("price_validto"),datatype:"date",empty:!0},{name:"vendor",label:t("price_vendor"),datatype:"flip"}]},{rowtype:"col3",columns:[{name:"curr",label:t("price_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"qty",label:t("price_qty"),datatype:"float"},{name:"pricevalue",label:t("price_pricevalue"),datatype:"float"}]},{rowtype:"field",name:"id",label:t("customer_custname"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"price",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}}]};return"undefined"!==typeof e&&null===e.id&&(a=r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1}}}})),a},printqueue:function(e,a,n){var r={options:{search_form:!0,title:t("title_printqueue"),title_field:t("printqueue_head_title"),icon:"Filter",panel:{save:!1,new:!1,delete:!1,more:!0,report:!1,search:!0,export_all:!0,print:!1,bookmark:!1,help:"program/printqueue"}},view:{items:{type:"list",data:"items",icon:"Print",edit_icon:"Check",title:t("printqueue_selected_items"),actions:{new:null,edit:{action:"exportQueueItem"},delete:{action:"deleteEditorItem",fkey:"items",table:"ui_printqueue"}}}},rows:[{rowtype:"col3",columns:[{name:"nervatype",label:t("printqueue_type"),datatype:"select",empty:!0,options:n.printqueue_type},{name:"startdate",label:t("printqueue_startdate"),datatype:"date",empty:!0},{name:"enddate",label:t("printqueue_enddate"),datatype:"date",empty:!0}]},{rowtype:"col2",columns:[{name:"transnumber",label:t("printqueue_transnumber"),datatype:"string"},{name:"username",label:t("printqueue_username"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"mode",label:t("printqueue_mode"),datatype:"select",empty:!1,options:n.printqueue_mode},{name:"orientation",label:t("report_orientation"),datatype:"select",empty:!1,options:n.report_orientation,default:n.page_orient},{name:"size",label:t("report_size"),datatype:"select",empty:!1,options:n.report_size,default:n.page_size}]}]};return r},product:function(e){var a={options:{title:t("title_product"),title_field:"partnumber",icon:"ShoppingCart",fieldvalue:!0,panel:{more:!0,bookmark:["editor","product","description","partnumber"],help:"resources/product"}},view:{barcode:{type:"list",data:"barcode",icon:"Barcode",title:t("barcode_view")},price:{type:"table",icon:"Dollar",title:t("price_view"),data:"price",fields:{validfrom:{fieldtype:"date",label:t("price_validfrom")},curr:{fieldtype:"string",label:t("price_curr")},qty:{fieldtype:"number",label:t("price_qty")},pricevalue:{fieldtype:"number",label:t("price_pricevalue")}}},event:{type:"list",data:"event",icon:"Calendar",title:t("event_view"),actions:{new:{action:"loadEditor",ntype:"event",ttype:null},edit:{action:"loadEditor",ntype:"event",ttype:null},delete:{action:"deleteEditorItem",fkey:"event",table:"event"}}}},rows:[{rowtype:"field",name:"description",label:t("product_description"),datatype:"string"},{rowtype:"col3",columns:[{name:"partnumber",label:t("product_partnumber"),datatype:"string"},{name:"protype",label:t("product_protype"),datatype:"select",map:{source:"protype",value:"id",text:"groupvalue"}},{name:"unit",label:t("product_unit"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"tax_id",label:t("product_tax"),datatype:"select",empty:!1,map:{source:"tax",value:"id",text:"taxcode"}},{name:"webitem",label:t("product_webitem"),datatype:"flip"},{name:"inactive",label:t("product_inactive"),datatype:"flip"}]},{rowtype:"field",name:"notes",label:t("product_notes"),datatype:"text"}]};return"undefined"!==typeof e&&(a=null===e.id?r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1}}}}):r()(a,{rows:{1:{columns:{0:{$merge:{disabled:!0}},1:{$merge:{disabled:!0}}}}}})),a},production:function(e,a){var n={options:{title:t("title_production"),title_field:"transnumber",icon:"Flask",fieldvalue:!0,pattern:!0,extend:"movement_head",panel:{arrow:!0,more:!0,trans:!0,create:!1,formula:!0,bookmark:["editor","trans","transnumber"],help:"stock/production"}},view:{movement:{type:"table",icon:"ListOl",title:t("item_view"),data:"movement",fields:{product:{fieldtype:"string",label:t("product_description")},unit:{fieldtype:"string",label:t("product_unit")},notes:{fieldtype:"string",label:t("movement_batchnumber")},opposite_qty:{fieldtype:"number",label:t("movement_qty")}}}},rows:[{rowtype:"col3",columns:[{name:"crdate",label:t("invoice_crdate"),datatype:"date",disabled:!0},{name:"closed",label:t("document_closed"),datatype:"flip"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col2",columns:[{name:"transdate",label:t("production_transdate"),datatype:"date"},{name:"duedate",label:t("production_duedate"),datatype:"datetime",empty:!1}]},{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"movement_head",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product",extend:!0}},{rowtype:"col2",columns:[{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"place_id",label:t("delivery_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]},{rowtype:"col2",columns:[{name:"batchnumber",label:t("movement_batchnumber"),datatype:"string",map:{text:"notes",extend:!0}},{name:"qty",label:t("movement_qty"),datatype:"float",map:{text:"qty",extend:!0}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):a.dataset.translink.length>0&&(n=r()(n,{rows:{3:{columns:{0:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}))),n},project:function(e){var a={options:{title:t("title_project"),title_field:"pronumber",icon:"Clock",fieldvalue:!0,panel:{more:!0,bookmark:["editor","project","description","pronumber"],help:"resources/project"}},view:{address:{type:"list",data:"address",icon:"Home",title:t("address_view")},contact:{type:"list",data:"contact",icon:"Phone",title:t("contact_view")},event:{type:"list",data:"event",icon:"Calendar",title:t("event_view"),actions:{new:{action:"loadEditor",ntype:"event",ttype:null},edit:{action:"loadEditor",ntype:"event",ttype:null},delete:{action:"deleteEditorItem",fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"startdate",label:t("project_startdate"),datatype:"date",empty:!0},{name:"enddate",label:t("project_enddate"),datatype:"date",empty:!0},{name:"inactive",label:t("project_inactive"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"pronumber",label:t("project_pronumber"),datatype:"string"},{name:"description",label:t("project_description"),datatype:"string"}]},{rowtype:"field",name:"customer_id",label:t("project_customer"),datatype:"selector",empty:!0,map:{seltype:"customer",table:"project",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"field",name:"notes",label:t("project_notes"),datatype:"text"}]};return"undefined"!==typeof e&&(a=null===e.id?r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1}}}}):r()(a,{rows:{1:{$set:{rowtype:"field",name:"description",label:t("project_description"),datatype:"string"}}}})),a},rate:function(e,a){var n={options:{title:t("title_rate"),icon:"Strikethrough",fieldvalue:!0,panel:{more:!0,report:!1,bookmark:!1,help:"settings/rate"}},view:{},rows:[{rowtype:"col2",columns:[{name:"ratetype",label:t("rate_ratetype"),datatype:"select",empty:!1,map:{source:"ratetype",value:"id",text:"groupvalue"}},{name:"ratedate",label:t("rate_ratedate"),datatype:"date"}]},{rowtype:"col2",columns:[{name:"curr",label:t("rate_curr"),datatype:"select",empty:!1,map:{source:"currency",value:"curr",text:"curr"}},{name:"ratevalue",label:t("rate_ratevalue"),datatype:"float"}]},{rowtype:"col2",columns:[{name:"rategroup",label:t("rate_rategroup"),datatype:"select",empty:!0,map:{source:"rategroup",value:"id",text:"groupvalue"}},{name:"place_id",label:t("rate_planumber"),datatype:"selector",empty:!0,map:{seltype:"place_bank",table:"rate",fieldname:"place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]}]};if("undefined"!==typeof e&&null===e.id){n=r()(n,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1}}}}),e.ratetype=a.dataset.ratetype.filter((function(e){return"rate"===e.groupvalue}))[0].id;var l=a.dataset.settings.filter((function(e){return"default_currency"===e.fieldname}))[0];"undefined"!==typeof l&&(e.curr=l.value)}return n},program:function(){return{options:{title:t("title_program"),title_field:"",edited:!1,icon:"Keyboard",panel:{}},view:{},rows:[{rowtype:"col4",columns:[{name:"paginationPage",label:t("program_page"),datatype:"integer"},{name:"history",label:t("program_history"),datatype:"integer"},{name:"export_sep",label:t("program_export_sep"),datatype:"string",length:1},{name:"decimal_sep",label:t("program_decimal_sep"),datatype:"select",empty:!1,options:(0,l.$8)("separators")}]},{rowtype:"col3",columns:[{name:"page_size",label:t("program_page_size"),datatype:"select",empty:!1,options:(0,l.$8)("report_size")},{name:"dateFormat",label:t("program_date_format"),datatype:"select",empty:!1,options:(0,l.$8)("dateStyle")},{name:"calendar",label:t("program_calendar"),datatype:"select",empty:!1,options:(0,l.$8)("calendarLocales")}]}]}},receipt:function(e,a){var n={options:{title:t("title_receipt"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:t("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:"loadEditor",ntype:"trans",ttype:"waybill"},edit:{action:"loadEditor",ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("invoce_direction"),datatype:"select",empty:!1,disabled:!0,map:{source:"direction",value:"id",text:"groupvalue",label:"receipt"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("receipt_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("receipt_transdate"),datatype:"date"},{name:"duedate",label:t("receipt_duedate"),datatype:"date"}]},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("document_acrate"),datatype:"float",default:0},{name:"paid",label:t("receipt_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(a.dataset.translink.length>0?n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}):a.dataset.cancel_link.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"cancel_link",value:"ref_id_2",text:"ref_id_1",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.cancel_link[0].transtype}}}}}}})),"out"===a.dataset.groups.filter((function(t){return t.id===e.direction}))[0].groupvalue&&"normal"===e.transcast&&(n=0===e.deleted?r()(n,{options:{panel:{$merge:{corrective:!0}}}}):r()(n,{options:{panel:{$merge:{cancellation:!0}}}}))));return n},rent:function(e,a){var n={options:{title:t("title_rent"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,edited:!1,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:t("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:"loadEditor",ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:t("shipping_view"),actions:{new:{action:"loadShipping"},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:t("shipping_item_product")},movement_product:{fieldtype:"string",label:t("shipping_movement_product")},sqty:{fieldtype:"number",label:t("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:t("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:"loadEditor",ntype:"trans",ttype:"waybill"},edit:{action:"loadEditor",ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("rental_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"rent"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("rental_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("rental_transdate"),datatype:"date"},{name:"duedate",label:t("rental_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:t("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col3",columns:[{name:"trans_reholiday",label:t("trans_reholiday"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_rebadtool",label:t("trans_rebadtool"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_reother",label:t("trans_reother"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}}]},{rowtype:"field",name:"trans_rentnote",label:t("trans_rentnote"),datatype:"string",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("rental_acrate"),datatype:"float"},{name:"paid",label:t("rental_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(n=r()(n,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}),a.dataset.translink.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}})))),n},report:function(e,a,n){var l={options:{title:t("title_report"),title_field:"repname",icon:"ChartBar",panel:{save:!1,new:!1,delete:!1,more:!0,report:!1,print:!0,export_pdf:!0,export_xml:!0,bookmark:!1,help:"program/report"}},view:{},rows:[{rowtype:"label",name:"description"},{rowtype:"col3",columns:[{name:"oslabel",label:t("report_orientation")+" / "+t("report_size"),datatype:"label"},{name:"orientation",label:"",datatype:"select",empty:!1,options:n.report_orientation,default:n.page_orient},{name:"size",label:"",datatype:"select",empty:!1,options:n.report_size,default:n.page_size}]}]};return"undefined"!==typeof e&&"csv"===e.ftype&&(l=r()(l,{rows:{$set:[{rowtype:"label",name:"description"}]},options:{panel:{$merge:{print:!1,export_pdf:!1,export_xml:!1,export_csv:!0}}}})),l},setting:function(){var e={options:{icon:"Cog",data:"fieldvalue",title:t("title_dbsettings"),panel:{page:"setting",delete:!1,new:!1,more:!1,help:"settings/setting"}},view:{setting:{type:"list",actions:{new:null,edit:{action:"editItem"},delete:null}}},rows:[{rowtype:"field",name:"fieldname",label:t("fields_fieldname"),datatype:"string",disabled:!0},{rowtype:"field",name:"label",label:t("fields_fielddef"),datatype:"string",disabled:!0},{rowtype:"field",name:"fieldvalue_value",label:t("fields_value"),datatype:"fieldvalue"},{rowtype:"field",name:"fieldvalue_notes",label:t("fields_notes"),datatype:"text"}]};return e},shipping:function(e){var a={options:{title:t("title_shipping"),title_field:"transnumber",icon:"Truck",panel:{back:!0,save:!1,delete:!1,new:!1,shipping:!0,help:"stock/shipping"}},view:{shipping_items:{type:"table",data:"shipping_items_",icon:"ListOl",edit_icon:"Plus",delete_icon:"Book",title:t("shipping_items"),actions:{new:null,edit:{action:"addShippingRow"},delete:{action:"showShippingStock"}},fields:{product:{fieldtype:"string",label:t("shipping_movement_product")},qty:{fieldtype:"number",label:t("shipping_qty")},tqty:{fieldtype:"number",label:t("shipping_turnover")},diff:{fieldtype:"number",label:t("shipping_diff"),format:!0}}},shiptemp_items:{type:"table",data:"shiptemp",title:t("shipping_create"),icon:"Plus",actions:{new:null,edit:{action:"editShippingRow"},delete:{action:"deleteShippingRow"}},fields:{product:{fieldtype:"string",label:t("shipping_product")},batch_no:{fieldtype:"string",label:t("movement_batchnumber")},qty:{fieldtype:"number",label:t("movement_qty")},diff:{fieldtype:"number",label:t("shipping_diff"),format:!0}}},shipping_delivery:{type:"list",data:"shipping_delivery",title:t("shipping_delivery"),icon:"Truck",actions:{new:null,edit:{action:"loadEditor",ntype:"trans",ttype:"delivery"},delete:null}}},rows:[{rowtype:"col2",columns:[{name:"delivery_type",label:t("delivery_direction"),datatype:"string",disabled:!0},{name:"id",label:t("customer_custname"),datatype:"link",map:{source:"trans",value:"id",text:"customer_id",label_field:"custname",lnktype:"customer",transtype:""}}]},{rowtype:"col2",columns:[{name:"shippingdate",label:t("movement_shippingdate"),datatype:"datetime",empty:!1},{name:"shipping_place_id",label:t("movement_place"),datatype:"selector",empty:!1,map:{seltype:"place_warehouse",table:"trans",fieldname:"shipping_place_id",lnktype:"place",transtype:"",label_field:"planumber"}}]}]};return a},tax:function(e){var a={options:{icon:"Ticket",data:"tax",title:t("title_tax"),panel:{page:"setting",more:!1}},view:{setting:{type:"table",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}},fields:{taxcode:{fieldtype:"string",label:t("tax_taxcode")},description:{fieldtype:"string",label:t("tax_description")},rate:{fieldtype:"number",label:t("tax_rate")},inact:{fieldtype:"string",label:t("tax_inactive"),align:"center"}}}},rows:[{rowtype:"col3",columns:[{name:"taxcode",label:t("tax_taxcode"),datatype:"string"},{name:"rate",label:t("tax_rate"),datatype:"float"},{name:"inactive",label:t("tax_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:t("tax_description"),datatype:"string"}]};return"undefined"!==typeof e&&(a=null!==e.id?r()(a,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}):r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},template:function(e){var a={options:{icon:"TextHeight",data:"template",title:t("title_report_editor"),panel:{}},view:{setting:{type:"list",actions:{new:null,edit:{action:"editItem"},delete:null}}},rows:[]};return a},tool:function(e){var a={options:{title:t("title_tool"),title_field:"serial",icon:"Wrench",fieldvalue:!0,panel:{more:!0,bookmark:["editor","tool","description","serial"],help:"resources/tool"}},view:{event:{type:"list",data:"event",icon:"Calendar",title:t("event_view"),actions:{new:{action:"loadEditor",ntype:"event",ttype:null},edit:{action:"loadEditor",ntype:"event",ttype:null},delete:{action:"deleteEditorItem",fkey:"event",table:"event"}}}},rows:[{rowtype:"col3",columns:[{name:"serial",label:t("tool_serial"),datatype:"string"},{name:"toolgroup",label:t("tool_toolgroup"),datatype:"select",empty:!0,map:{source:"toolgroup",value:"id",text:"groupvalue"}},{name:"inactive",label:t("tool_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:t("tool_description"),datatype:"string"},{rowtype:"field",name:"product_id",label:t("product_partnumber"),datatype:"selector",empty:!1,barcode:!0,map:{seltype:"product_item",table:"tool",fieldname:"product_id",lnktype:"product",transtype:"",label_field:"product"}},{rowtype:"field",name:"notes",label:t("tool_notes"),datatype:"text"}]};return"undefined"!==typeof e&&(a=null===e.id?r()(a,{view:{$set:{}},options:{panel:{$merge:{new:!1,delete:!1,report:!1,bookmark:!1}}}}):r()(a,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}})),a},ui_menu:function(e){var a={options:{icon:"Share",data:"ui_menu",title:t("title_menucmd"),panel:{page:"setting",more:!1,help:"settings/uimenu"}},view:{setting:{type:"list",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}}},items:{type:"table",data:"ui_menufields",actions:{new:{action:"editMenuField"},edit:{action:"editMenuField"},delete:{action:"deleteItemRow",table:"ui_menufields"}},fields:{fieldname:{fieldtype:"string",label:t("menufields_fieldname")},description:{fieldtype:"string",label:t("menufields_description")},fieldtype_name:{fieldtype:"string",label:t("menufields_fieldtype")},orderby:{fieldtype:"number",label:t("menufields_orderby")}}}},rows:[{rowtype:"col2",columns:[{name:"menukey",label:t("menucmd_menukey"),datatype:"string"},{name:"description",label:t("menucmd_description"),datatype:"string"}]},{rowtype:"col3",columns:[{name:"method",label:t("menucmd_method"),datatype:"select",map:{source:"method",value:"id",text:"groupvalue"}},{name:"modul",label:t("menucmd_modul"),datatype:"string"},{name:"icon",label:t("menucmd_icon"),datatype:"string"}]},{rowtype:"col2",columns:[{name:"funcname",label:t("menucmd_funcname"),datatype:"string"},{name:"address",label:t("menucmd_address"),datatype:"string"}]}]};return"undefined"!==typeof e&&null!==e.id&&(a=r()(a,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}})),a},usergroup:function(e){var a={options:{icon:"Key",data:"groups",title:t("title_usergroup"),panel:{page:"setting",more:!1,help:"settings/usergroup"}},view:{setting:{type:"list",actions:{new:{action:"newItem"},edit:{action:"editItem"},delete:{action:"deleteItem"}}},items:{type:"table",data:"audit",actions:{new:{action:"editAudit"},edit:{action:"editAudit"},delete:{action:"deleteItemRow",table:"ui_audit"}},fields:{nervatype_name:{fieldtype:"string",label:t("audit_nervatype")},subtype_name:{fieldtype:"string",label:t("audit_subtype")},inputfilter_name:{fieldtype:"string",label:t("audit_inputfilter")},supervisor_name:{fieldtype:"string",label:t("audit_supervisor")}}}},rows:[{rowtype:"col3",columns:[{name:"groupvalue",label:t("groups_groupvalue"),datatype:"string"},{name:"transfilter",label:t("groups_transfilter"),datatype:"select",empty:!0,map:{source:"transfilter",value:"id",text:"groupvalue"}},{name:"inactive",label:t("groups_inactive"),datatype:"flip"}]},{rowtype:"field",name:"description",label:t("groups_description"),datatype:"text"}]};return"undefined"!==typeof e&&(a=null!==e.id?r()(a,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}):r()(a,{options:{panel:{$merge:{new:!1,delete:!1}}}})),a},waybill:function(e,a){var n={options:{title:t("title_waybill"),title_field:"transnumber",icon:"Briefcase",fieldvalue:!0,pattern:!0,extend:"refvalue",panel:{arrow:!0,more:!0,trans:!0,create:!1,bookmark:["editor","trans","transnumber"],help:"stock/waybill"}},view:{movement:{type:"table",icon:"ListOl",title:t("item_view"),data:"movement",fields:{shippingdate:{fieldtype:"date",label:t("movement_shippingdate2")},serial:{fieldtype:"string",label:t("tool_serial")},tooldesc:{fieldtype:"string",label:t("tool_description")}}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("document_direction"),datatype:"select",empty:!1,map:{source:"direction",value:"id",text:"groupvalue",label:"waybill"}},{name:"crdate",label:t("waybill_crdate"),datatype:"date",disabled:!0},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col2",columns:[{name:"seltype",label:t("waybill_seltype"),datatype:"select",empty:!1,olabel:"waybill",extend:!0,options:[["transitem","transitem"],["customer","customer"],["employee","employee"]]},{name:"ref_id",label:t("waybill_reference"),datatype:"selector",empty:!1,map:{seltype:"transitem",table:"extend",fieldname:"ref_id",lnktype:"trans",transtype:"",label_field:"refnumber",extend:!0}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):(n=r()(n,{rows:{0:{columns:{0:{$merge:{disabled:!0}}}}}}),n=r()(n,{rows:{1:{columns:{0:{$merge:{disabled:!0}}}}}}),null!==e.customer_id?n=r()(n,{rows:{1:{columns:{1:{map:{$merge:{seltype:"customer",lnktype:"customer"}}}}}}}):null!==e.employee_id?n=r()(n,{rows:{1:{columns:{1:{map:{$merge:{seltype:"employee",lnktype:"employee"}}}}}}}):(n=r()(n,{rows:{1:{columns:{1:{map:{$merge:{seltype:"transitem",lnktype:"trans"}}}}}}}),a.dataset.translink.length>0&&(n=r()(n,{rows:{1:{columns:{1:{map:{$merge:{transtype:a.dataset.translink[0].transtype}}}}}}}))))),n},worksheet:function(e,a){var n={options:{title:t("title_worksheet"),title_field:"transnumber",icon:"FileText",fieldvalue:!0,pattern:!0,edited:!1,panel:{arrow:!0,more:!0,trans:!0,bookmark:["editor","trans","transnumber"],help:"document/document"}},view:{item:{type:"table",data:"item",icon:"ListOl",title:t("item_view"),total:{netamount:t("item_netamount"),vatamount:t("item_vatamount"),amount:t("item_amount")},fields:{description:{fieldtype:"string",label:t("item_description")},unit:{fieldtype:"string",label:t("item_unit")},qty:{fieldtype:"number",label:t("item_qty")},amount:{fieldtype:"number",label:t("item_amount")}}},transitem_invoice:{type:"list",data:"transitem_invoice",icon:"FileText",title:t("invoice_view"),audit_type:"trans",audit_transtype:"invoice",actions:{new:null,edit:{action:"loadEditor",ntype:"trans",ttype:"invoice"},delete:null}},transitem_shipping:{type:"table",data:"transitem_shipping",icon:"Truck",title:t("shipping_view"),actions:{new:{action:"loadShipping"},edit:null,delete:null},fields:{item_product:{fieldtype:"string",label:t("shipping_item_product")},movement_product:{fieldtype:"string",label:t("shipping_movement_product")},sqty:{fieldtype:"number",label:t("shipping_sqty")}}},tool_movement:{type:"list",data:"tool_movement",icon:"Briefcase",title:t("toolmovement_view"),audit_type:"trans",audit_transtype:"waybill",actions:{new:{action:"loadEditor",ntype:"trans",ttype:"waybill"},edit:{action:"loadEditor",ntype:"trans",ttype:"waybill"},delete:null}}},rows:[{rowtype:"col3",columns:[{name:"direction",label:t("worksheet_direction"),datatype:"select",empty:!1,disabled:!0,map:{source:"direction",value:"id",text:"groupvalue",label:"worksheet"}},{name:"ref_transnumber",label:t("document_ref_transnumber"),datatype:"string"},{name:"transtate",label:t("document_transtate"),datatype:"select",empty:!1,map:{source:"transtate",value:"id",text:"groupvalue",label:"state"}}]},{rowtype:"col3",columns:[{name:"crdate",label:t("worksheet_crdate"),datatype:"date",disabled:!0},{name:"transdate",label:t("worksheet_transdate"),datatype:"date"},{name:"duedate",label:t("worksheet_duedate"),datatype:"date"}]},{rowtype:"field",name:"customer_id",label:t("customer_custname"),datatype:"selector",empty:!1,map:{seltype:"customer",table:"trans",fieldname:"customer_id",lnktype:"customer",transtype:"",label_field:"custname"}},{rowtype:"col3",columns:[{name:"trans_wsdistance",label:t("trans_wsdistance"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_wsrepair",label:t("trans_wsrepair"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{name:"trans_wstotal",label:t("trans_wstotal"),datatype:"float",map:{source:"fieldvalue",value:"fieldname",text:"value"}}]},{rowtype:"field",name:"trans_wsnote",label:t("trans_wsnote"),datatype:"string",map:{source:"fieldvalue",value:"fieldname",text:"value"}},{rowtype:"col4",columns:[{name:"curr",label:t("document_curr"),datatype:"select",empty:!0,map:{source:"currency",value:"curr",text:"curr"}},{name:"acrate",label:t("worksheet_acrate"),datatype:"float",default:0},{name:"paid",label:t("worksheet_paid"),datatype:"flip"},{name:"closed",label:t("document_closed"),datatype:"flip"}]},{rowtype:"col2",columns:[{name:"paidtype",label:t("document_paidtype"),datatype:"select",empty:!1,map:{source:"paidtype",value:"id",text:"groupvalue",label:"paidtype"}},{name:"department",label:t("document_department"),datatype:"select",empty:!0,map:{source:"department",value:"id",text:"groupvalue"}}]},{rowtype:"col2",columns:[{name:"employee_id",label:t("employee_empnumber"),datatype:"selector",empty:!0,map:{seltype:"employee",table:"trans",fieldname:"employee_id",lnktype:"employee",transtype:"",label_field:"empnumber"}},{name:"project_id",label:t("project_pronumber"),datatype:"selector",empty:!0,map:{seltype:"project",table:"trans",fieldname:"project_id",lnktype:"project",transtype:"",label_field:"pronumber"}}]},{rowtype:"field",name:"notes",label:t("document_notes"),datatype:"text"},{rowtype:"field",name:"intnotes",label:t("document_intnotes"),datatype:"text"}]};return"undefined"!==typeof e&&(null===e.id?n=r()(n,{view:{$set:{}},options:{panel:{$merge:{arrow:!1,new:!1,delete:!1,report:!1,bookmark:!1,trans:!1}}}}):a.dataset.translink.length>0&&(n=r()(n,{rows:{0:{columns:{1:{$set:{name:"id",label:t("document_ref_transnumber"),datatype:"link",map:{source:"translink",value:"ref_id_1",text:"ref_id_2",label_field:"transnumber",lnktype:"trans",transtype:a.dataset.translink[0].transtype}}}}}}}))),n}}}},5578:function(e,t,a){a.d(t,{i:function(){return n}});var n=function(e){var t=e.getText;return{all:{deffield_prop:function(e){return[{select:["'customer' as ftype","c.id as id","c.custname as description"],from:"customer c",where:[["{CAS_TEXT}c.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'customer'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'tool' as ftype","t.id as id","t.serial as description"],from:"tool t",where:[["{CAS_TEXT}t.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'tool'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'trans' as ftype","t.id as id","t.transnumber as description"],from:"trans t",where:[["{CAS_TEXT}t.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'trans'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'transitem' as ftype","t.id as id","t.transnumber as description"],from:"trans t",where:[["{CAS_TEXT}t.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'transitem'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'transmovement' as ftype","t.id as id","t.transnumber as description"],from:"trans t",where:[["{CAS_TEXT}t.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'transmovement'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'transpayment' as ftype","t.id as id","t.transnumber as description"],from:"trans t",where:[["{CAS_TEXT}t.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'transpayment'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'product' as ftype","p.id as id","p.partnumber as description"],from:"product p",where:[["{CAS_TEXT}p.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'product'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'project' as ftype","p.id as id","p.pronumber as description"],from:"project p",where:[["{CAS_TEXT}p.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'project'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'employee' as ftype","e.id as id","e.empnumber as description"],from:"employee e",where:[["{CAS_TEXT}e.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'employee'"]]]],where:["fv.deleted","=","0"]}]]]},{union_select:["'place' as ftype","p.id as id","p.planumber as description"],from:"place p",where:[["{CAS_TEXT}p.id {CAE_TEXT}","in",[{select:["fv.value"],from:"deffield df",inner_join:[["fieldvalue fv","on",[["df.fieldname","=","fv.fieldname"],["and","fv.ref_id","=","?"]]],["groups nt","on",[["df.nervatype","=","nt.id"],["and","nt.groupvalue","=","'"+e+"'"]]],["groups ft","on",[["df.fieldtype","=","ft.id"],["and","ft.groupvalue","=","'place'"]]]],where:["fv.deleted","=","0"]}]]]}]}},currency:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(place.id) as co"],from:"place",inner_join:["currency","on",["place.curr","=","currency.curr"]],where:[["place.deleted","=","0"],["and","currency.id","=","?"]]},{union_select:["count(price.id) as co"],from:"price",inner_join:["currency","on",["price.curr","=","currency.curr"]],where:[["price.deleted","=","0"],["and","currency.id","=","?"]]},{union_select:["count(rate.id) as co"],from:"rate",inner_join:["currency","on",["rate.curr","=","currency.curr"]],where:[["rate.deleted","=","0"],["and","currency.id","=","?"]]},{union_select:["count(trans.id) as co"],from:"trans",inner_join:["currency","on",["trans.curr","=","currency.curr"]],where:[["trans.deleted","=","0"],["and","currency.id","=","?"]]}]],"foo"]}},currency_view:function(){return{select:["*"],from:"currency"}}},customer:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"trans",where:["customer_id","=","?"]},{union_select:["count(*) as co"],from:"project",where:["customer_id","=","?"]},{union_select:["count(*) as co"],from:"event",inner_join:[["groups nt","on",["event.nervatype","=","nt.id"]],["and","nt.groupvalue","=","'customer'"]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","ref_id_2","=","?"]]}]],"foo"]}},address:function(){return{select:["*","{CCS} case when city is null then '' else city end{SEP} ' | '{SEP} case when street is null then '' else street end{CCE} as lslabel","{CCS}'"+t("address_country")+": '{SEP} case when country is null then '' else country end{SEP} ' | '{SEP} '"+t("address_zipcode")+": '{SEP}case when zipcode is null then '' else zipcode end {SEP} ' | '{SEP} '"+t("address_state")+": '{SEP} case when state is null then '' else state end{CCE} as lsvalue","{CCS}'"+t("address_notes")+": '{SEP} case when notes is null then '' else notes end{CCE} as lsinfo"],from:"address",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","ref_id","=","?"]]}},contact:function(){return{select:["*","{CCS} case when firstname is null then '' else {CCS} firstname{SEP}' '{CCE} end{SEP}case when surname is null then '' else surname end{SEP}' '{SEP} case when status is null then '' else {CCS}' | "+t("contact_status")+": '{SEP}status{CCE} end{CCE} as lslabel","{CCS}'"+t("contact_phone")+": '{SEP}case when phone is null then '' else phone end {SEP}' | "+t("contact_mobil")+": '{SEP}case when mobil is null then '' else mobil end {SEP}' | "+t("contact_fax")+": '{SEP}case when fax is null then '' else fax end{CCE} as lsvalue","{CCS}'"+t("contact_email")+": '{SEP}case when email is null then '' else email end {SEP}' | "+t("contact_notes")+": '{SEP}case when notes is null then '' else notes end{CCE} as lsinfo"],from:"contact",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","ref_id","=","?"]]}},event:function(){return{select:["e.id","e.calnumber","{FMS_DATETIME}e.fromdate {FME_DATETIME} as fromdate","eg.groupvalue as eventgroup","e.subject","e.deleted","{CCS}case when e.fromdate is null then '' else {FMS_DATETIME}e.fromdate {FME_DATETIME} end{SEP}' | '{SEP}case when e.subject is null then '' else e.subject end{CCE} as lslabel","{CCS}e.calnumber{SEP}' | '{SEP}'"+t("event_group")+": '{SEP}case when eg.groupvalue is null then '' else eg.groupvalue end{CCE} as lsvalue"],from:"event e",left_join:["groups eg","on",["e.eventgroup","=","eg.id"]],where:[["e.deleted","=","0"],["and","e.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","e.ref_id","=","?"]]}}},deffield:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(fieldvalue.id) as co"],from:"fieldvalue",inner_join:["deffield","on",["deffield.fieldname","=","fieldvalue.fieldname"]],where:[["fieldvalue.deleted","=","0"],["and","deffield.id","=","?"]]}]],"foo"]}},deffield_view:function(){return{select:["df.*","df.description as lslabel","{CCS}ntype.groupvalue{SEP}' | '{SEP}ftype.groupvalue {CCE} as lsvalue"],from:"deffield df",inner_join:[["groups ntype","on",["df.nervatype","=","ntype.id"]],["groups ftype","on",[["df.fieldtype","=","ftype.id"],["and","ntype.groupvalue","in",[[],"'customer'","'employee'","'event'","'formula'","'place'","'product'","'project'","'tool'","'trans'"]]]]],where:[["df.deleted","=","0"],["and","df.visible","=","1"]],order_by:["df.description"]}}},employee:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"trans",where:["employee_id","=","?"]},{union_select:["count(*) as co"],from:"trans",where:["cruser_id","=","?"]},{union_select:["count(*) as co"],from:"log",where:["employee_id","=","?"]},{union_select:["count(*) as co"],from:"ui_printqueue",where:["employee_id","=","?"]},{union_select:["count(*) as co"],from:"ui_userconfig",where:["employee_id","=","?"]},{union_select:["count(*) as co"],from:"event",inner_join:[["groups nt","on",["event.nervatype","=","nt.id"]],["and","nt.groupvalue","=","'employee'"]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]],["and","ref_id_2","=","?"]]}]],"foo"]}},employee:function(){return{select:["*","{FMS_DATE}startdate {FME_DATE} as startdate","{FMS_DATE}enddate {FME_DATE} as enddate"],from:"employee",where:[["deleted","=","0"],["and","id","=","?"]]}},address:function(){return{select:["*","{CCS}case when city is null then '' else city end{SEP} ' | '{SEP} case when street is null then '' else street end{CCE} as lslabel","{CCS}'"+t("address_country")+": '{SEP} case when country is null then '' else country end{SEP} ' | '{SEP} '"+t("address_zipcode")+": '{SEP}case when zipcode is null then '' else zipcode end {SEP} ' | '{SEP} '"+t("address_state")+": '{SEP} case when state is null then '' else state end{CCE} as lsvalue","{CCS}'"+t("address_notes")+": '{SEP} case when notes is null then '' else notes end{CCE} as lsinfo"],from:"address",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]],["and","ref_id","=","?"]]}},contact:function(){return{select:["*","{CCS} case when firstname is null then '' else {CCS} firstname{SEP}' '{CCE} end{SEP}case when surname is null then '' else surname end{SEP}' '{SEP} case when status is null then '' else {CCS}' | "+t("contact_status")+": '{SEP}status{CCE} end{CCE} as lslabel","{CCS}'"+t("contact_phone")+": '{SEP}case when phone is null then '' else phone end {SEP}' | "+t("contact_mobil")+": '{SEP}case when mobil is null then '' else mobil end {SEP}' | "+t("contact_fax")+": '{SEP}case when fax is null then '' else fax end{CCE} as lsvalue","{CCS}'"+t("contact_email")+": '{SEP}case when email is null then '' else email end {SEP}' | "+t("contact_notes")+": '{SEP}case when notes is null then '' else notes end{CCE} as lsinfo"],from:"contact",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]],["and","ref_id","=","?"]]}},event:function(){return{select:["e.id","e.calnumber","{FMS_DATETIME}e.fromdate {FME_DATETIME} as fromdate","eg.groupvalue as eventgroup","e.subject","e.deleted","{CCS}case when e.fromdate is null then '' else {FMS_DATETIME}e.fromdate {FME_DATETIME} end{SEP} ' | '{SEP}case when e.subject is null then '' else e.subject end{CCE} as lslabel","{CCS}e.calnumber{SEP}' | '{SEP}'"+t("event_group")+": '{SEP}case when eg.groupvalue is null then '' else eg.groupvalue end{CCE} as lsvalue"],from:"event e",left_join:["groups eg","on",["e.eventgroup","=","eg.id"]],where:[["e.deleted","=","0"],["and","e.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'employee'"]]}]],["and","e.ref_id","=","?"]]}}},event:{event:function(){return{select:["*","{FMS_DATETIME}fromdate {FME_DATETIME} as fromdate","{FMS_DATETIME}todate {FME_DATETIME} as todate"],from:"event",where:[["deleted","=","0"],["and","id","=","?"]]}}},groups:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"groups",where:[["groupname","in",[[],"'nervatype'","'custtype'","'fieldtype'","'logstate'","'movetype'","'transtype'","'placetype'","'calcmode'","'protype'","'ratetype'","'direction'","'transtate'","'inputfilter'","'filetype'","'wheretype'","'aggretype'"]],["and","id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'groups'"]]}]],["and","ref_id_2","=","?"]]},{union_select:["count(*)"],from:"barcode",where:["barcode.barcodetype","=","?"]},{union_select:["count(*)"],from:"deffield",where:[["deffield.deleted","=","0"],["and","deffield.subtype","=","?"]]},{union_select:["count(*)"],from:"employee",where:[["employee.deleted","=","0"],["and","employee.usergroup","=","?"]]},{union_select:["count(*)"],from:"employee",where:[["employee.deleted","=","0"],["and","employee.department","=","?"]]},{union_select:["count(*)"],from:"event",where:[["event.deleted","=","0"],["and","event.eventgroup","=","?"]]},{union_select:["count(*)"],from:"rate",where:[["rate.deleted","=","0"],["and","rate.rategroup","=","?"]]},{union_select:["count(*)"],from:"tool",where:[["tool.deleted","=","0"],["and","tool.toolgroup","=","?"]]},{union_select:["count(*)"],from:"trans",where:[["trans.deleted","=","0"],["and","trans.department","=","?"]]}]],"foo"]}},groups_view:function(){return{select:["*","groupvalue as lslabel","{CCS}groupname{SEP} case when description is null then '' else {CCS}' | '{SEP}description{CCE} end{CCE} as lsvalue"],from:"groups",where:[["deleted","=","0"],["and","groupname","in",[[],"'department'","'eventgroup'","'paidtype'","'toolgroup'","'rategroup'"]]]}}},log:{result:function(){return{select:["{FMS_DATE}l.crdate {FME_DATE} as crdate","e.empnumber","ls.groupvalue as logstate","l.nervatype as nervatype","l.ref_id as refnumber","l.id as id"],from:"log l",inner_join:[["employee e","on",["l.employee_id","=","e.id"]],["groups ls","on",["l.logstate","=","ls.id"]]],where:[]}}},numberdef:{numberdef_view:function(){return{select:["*","case when isyear = 1 then '"+t("label_yes")+"'else '"+t("label_no")+"' end as is_year"],from:"numberdef"}}},place:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"event",inner_join:[["groups nt","on",["event.nervatype","=","nt.id"]],["and","nt.groupvalue","=","'place'"]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'place'"]]}]],["and","ref_id_2","=","?"]]},{union_select:["count(*) as co"],from:"movement",where:[["movement.deleted","=","0"],["and","movement.place_id","=","?"]]},{union_select:["count(*) as co"],from:"rate",where:[["rate.deleted","=","0"],["and","rate.place_id","=","?"]]},{union_select:["count(*) as co"],from:"trans",where:[["trans.deleted","=","0"],["and","trans.place_id","=","?"]]}]],"foo"]}},contact:function(){return{select:["*","{CCS} case when firstname is null then '' else {CCS} firstname{SEP}' '{CCE} end{SEP}case when surname is null then '' else surname end{SEP}' '{SEP} case when firstname is null then '' else firstname end{SEP} case when status is null then '' else {CCS}' | "+t("contact_status")+": '{SEP}status{CCE} end{CCE} as lslabel","{CCS}'"+t("contact_phone")+": '{SEP}case when phone is null then '' else phone end {SEP}' | "+t("contact_mobil")+": '{SEP}case when mobil is null then '' else mobil end {SEP}' | "+t("contact_fax")+": '{SEP}case when fax is null then '' else fax end{CCE} as lsvalue","{CCS}'"+t("contact_email")+": '{SEP}case when email is null then '' else email end {SEP}' | "+t("contact_notes")+": '{SEP}case when notes is null then '' else notes end{CCE} as lsinfo"],from:"contact",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'place'"]]}]],["and","ref_id","=","?"]]}},place_view:function(){return{select:["p.*","pt.groupvalue as place_type"],from:"place p",inner_join:["groups pt","on",["p.placetype","=","pt.id"]],where:["p.deleted","=","0"]}}},printqueue:{server_printers:function(){return{select:["m.*"],from:"ui_menu m",inner_join:["groups g","on",[["m.method","=","g.id"],["and","g.groupvalue","=","'printer'"]]]}},items:function(e){var a={select:["pq.id","ntg.groupvalue as typename","case when ntg.groupvalue='trans' then tg.groupvalue else ntg.groupvalue end as stypename","case when ntg.groupvalue='trans' then tg.groupvalue else null end as transtype","case when ntg.groupvalue in ('customer') then rf_customer.custnumber when ntg.groupvalue in ('tool') then rf_tool.serial when ntg.groupvalue in ('trans', 'transitem', 'transmovement', 'transpayment') then rf_trans.transnumber when ntg.groupvalue in ('product') then rf_product.partnumber when ntg.groupvalue in ('project') then rf_project.pronumber when ntg.groupvalue in ('employee') then rf_employee.empnumber when ntg.groupvalue in ('place') then rf_place.planumber else 'REFNUMBER' end as refnumber, pq.ref_id, pq.qty as copies","{CCS}case when ntg.groupvalue in ('customer') then rf_customer.custnumber when ntg.groupvalue in ('tool') then rf_tool.serial when ntg.groupvalue in ('trans', 'transitem', 'transmovement', 'transpayment') then rf_trans.transnumber when ntg.groupvalue in ('product') then rf_product.partnumber when ntg.groupvalue in ('project') then rf_project.pronumber when ntg.groupvalue in ('employee') then rf_employee.empnumber when ntg.groupvalue in ('place') then rf_place.planumber else null end{SEP}' | '{SEP} '"+t("printqueue_copies")+"'{SEP}': '{SEP}{CAS_TEXT}pq.qty{CAE_TEXT}{CCE} as lslabel","case when ntg.groupvalue='trans' then dg.groupvalue else null end as direction","{CCS}{FMS_DATE}pq.crdate{FME_DATE}{SEP}' | '{SEP}e.username {SEP}' | '{SEP}r.repname{CCE} as lsvalue","r.reportkey"],from:"ui_printqueue pq",inner_join:[["groups ntg","on",["pq.nervatype","=","ntg.id"]],["employee e","on",["pq.employee_id","=","e.id"]]],left_join:[["customer rf_customer","on",["pq.ref_id","=","rf_customer.id"]],["tool rf_tool","on",["pq.ref_id","=","rf_tool.id"]],["trans rf_trans","on",["pq.ref_id","=","rf_trans.id"]],["groups dg","on",["rf_trans.direction","=","dg.id"]],["groups tg","on",["rf_trans.transtype","=","tg.id"]],["product rf_product","on",["pq.ref_id","=","rf_product.id"]],["project rf_project","on",["pq.ref_id","=","rf_project.id"]],["employee rf_employee","on",["pq.ref_id","=","rf_employee.id"]],["place rf_place","on",["pq.ref_id","=","rf_place.id"]],["ui_report r","on",["pq.report_id","=","r.id"]]]};if("object"!==typeof e)a.where=[["pq.id","=","-1"]];else{if(a.where=[["1","=","1"]],""!==e.nervatype&&null!==e.nervatype)switch(e.nervatype){case"customer":case"product":case"employee":case"tool":case"project":a.where.push(["and","ntg.groupvalue","=","'"+e.nervatype+"'"]);break;default:a.where.push(["and","ntg.groupvalue","=","'trans'"]),a.where.push(["and","tg.groupvalue","=","'"+e.nervatype+"'"])}""!==e.startdate&&null!==e.startdate&&a.where.push(["and","pq.crdate",">=","'"+e.startdate+"'"]),""!==e.enddate&&null!==e.enddate&&a.where.push(["and","pq.crdate","<=","'"+e.enddate+"'"]),""!==e.transnumber&&null!==e.transnumber&&a.where.push(["and","case when ntg.groupvalue in ('customer') then rf_customer.custnumber when ntg.groupvalue in ('tool') then rf_tool.serial when ntg.groupvalue in ('trans', 'transitem', 'transmovement', 'transpayment') then rf_trans.transnumber when ntg.groupvalue in ('product') then rf_product.partnumber when ntg.groupvalue in ('project') then rf_project.pronumber when ntg.groupvalue in ('employee') then rf_employee.empnumber when ntg.groupvalue in ('place') then rf_place.planumber else null end","like","'"+e.transnumber+"'"]),""!==e.username&&null!==e.username&&a.where.push(["and","e.username","like","'"+e.username+"'"])}return a}},product:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"event",inner_join:["groups nt","on",[["event.nervatype","=","nt.id"],["and","nt.groupvalue","=","'product'"]]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"address",inner_join:["groups nt","on",[["address.nervatype","=","nt.id"],["and","nt.groupvalue","=","'product'"]]],where:[["address.deleted","=","0"],["and","address.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"contact",inner_join:["groups nt","on",[["contact.nervatype","=","nt.id"],["and","nt.groupvalue","=","'product'"]]],where:[["contact.deleted","=","0"],["and","contact.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'product'"]]}]],["and","ref_id_2","=","?"]]},{union_select:["count(*) as co"],from:"barcode",where:["barcode.product_id","=","?"]},{union_select:["count(*) as co"],from:"movement",where:[["movement.deleted","=","0"],["and","movement.product_id","=","?"]]},{union_select:["count(*) as co"],from:"item",where:[["item.deleted","=","0"],["and","item.product_id","=","?"]]},{union_select:["count(*) as co"],from:"price",where:[["price.deleted","=","0"],["and","price.product_id","=","?"]]},{union_select:["count(*) as co"],from:"tool",where:[["tool.deleted","=","0"],["and","tool.product_id","=","?"]]}]],"foo"]}},barcode:function(){return{select:["bc.*","bc.code as lslabel","{CCS}g.groupvalue {SEP} ' | ' {SEP} case when bc.description is null then '' else bc.description end{CCE} as lsvalue"],from:"barcode bc",inner_join:["groups g","on",["bc.barcodetype","=","g.id"]],where:["bc.product_id","=","?"]}},barcode_check:function(e){return{select:["p.id","p.partnumber","p.description","p.unit","p.tax_id"],from:"barcode bc",inner_join:["product p","on",["bc.product_id","=","p.id"]],where:["bc.code","=","'"+e+"'"]}},price:function(){return{select:["pr.*","{FMS_DATE}pr.validfrom{FME_DATE} as validfrom","{FMS_DATE}pr.validto{FME_DATE} as validto","ln0.id as link_customer","c.id as customer_id","c.custname"],from:"price pr",left_join:[["link ln0","on",[["ln0.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'price'"]]}]],["and","ln0.ref_id_1","=","pr.id"],["and","ln0.deleted","=","0"],["and","ln0.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]]]],["customer c","on",[["ln0.ref_id_2","=","c.id"],["and","c.deleted","=","0"]]]],where:[["pr.deleted","=","0"],["and","pr.discount","is null"],["and","pr.product_id","=","?"]]}},discount:function(){return{select:["pr.*","{FMS_DATE}pr.validfrom{FME_DATE} as validfrom","{FMS_DATE}pr.validto{FME_DATE} as validto","ln0.id as link_customer","c.id as customer_id","c.custname"],from:"price pr",left_join:[["link ln0","on",[["ln0.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'price'"]]}]],["and","ln0.ref_id_1","=","pr.id"],["and","ln0.deleted","=","0"],["and","ln0.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]]]],["customer c","on",[["ln0.ref_id_2","=","c.id"],["and","c.deleted","=","0"]]]],where:[["pr.deleted","=","0"],["and","pr.discount","is not null"],["and","pr.product_id","=","?"]]}},event:function(){return{select:["e.id","e.calnumber","{FMS_DATETIME}e.fromdate {FME_DATETIME} as fromdate","eg.groupvalue as eventgroup","e.subject","e.deleted","{CCS}case when e.fromdate is null then '' else {FMS_DATETIME}e.fromdate {FME_DATETIME} end{SEP} ' | '{SEP}case when e.subject is null then '' else e.subject end{CCE} as lslabel","{CCS}e.calnumber{SEP}' | '{SEP}'"+t("event_group")+": '{SEP}case when eg.groupvalue is null then '' else eg.groupvalue end{CCE} as lsvalue"],from:"event e",left_join:["groups eg","on",["e.eventgroup","=","eg.id"]],where:[["e.deleted","=","0"],["and","e.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'product'"]]}]],["and","e.ref_id","=","?"]]}}},project:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"trans",where:["project_id","=","?"]},{union_select:["count(*) as co"],from:"event",inner_join:["groups nt","on",[["event.nervatype","=","nt.id"],["and","nt.groupvalue","=","'project'"]]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]],["and","ref_id_2","=","?"]]}]],"foo"]}},project:function(){return{select:["pr.*","c.custname","{FMS_DATE}pr.startdate {FME_DATE} as startdate","{FMS_DATE}pr.enddate {FME_DATE} as enddate"],from:"project pr",left_join:["customer c","on",["pr.customer_id","=","c.id"]],where:[["pr.deleted","=","0"],["and","pr.id","=","?"]]}},address:function(){return{select:["*","{CCS} case when city is null then '' else city end{SEP} ' | '{SEP} case when street is null then '' else street end{CCE} as lslabel","{CCS}'"+t("address_country")+": '{SEP} case when country is null then '' else country end{SEP} ' | '{SEP} '"+t("address_zipcode")+": '{SEP}case when zipcode is null then '' else zipcode end {SEP} ' | '{SEP} '"+t("address_state")+": '{SEP} case when state is null then '' else state end{CCE} as lsvalue","{CCS}'"+t("address_notes")+": '{SEP} case when notes is null then '' else notes end{CCE} as lsinfo"],from:"address",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]],["and","ref_id","=","?"]]}},contact:function(){return{select:["*","{CCS} case when firstname is null then '' else {CCS} firstname{SEP}' '{CCE} end{SEP}case when surname is null then '' else surname end{SEP}' '{SEP} case when status is null then '' else {CCS}' | "+t("contact_status")+": '{SEP}status{CCE} end{CCE} as lslabel","{CCS}'"+t("contact_phone")+": '{SEP}case when phone is null then '' else phone end {SEP}' | "+t("contact_mobil")+": '{SEP}case when mobil is null then '' else mobil end {SEP}' | "+t("contact_fax")+": '{SEP}case when fax is null then '' else fax end{CCE} as lsvalue","{CCS}'"+t("contact_email")+": '{SEP}case when email is null then '' else email end {SEP}' | "+t("contact_notes")+": '{SEP}case when notes is null then '' else notes end{CCE} as lsinfo"],from:"contact",where:[["deleted","=","0"],["and","nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]],["and","ref_id","=","?"]]}},event:function(){return{select:["e.id","e.calnumber","{FMS_DATETIME}e.fromdate {FME_DATETIME} as fromdate","eg.groupvalue as eventgroup","e.subject","e.deleted","{CCS}case when e.fromdate is null then '' else {FMS_DATETIME}e.fromdate {FME_DATETIME} end{SEP} ' | '{SEP}case when e.subject is null then '' else e.subject end{CCE} as lslabel","{CCS}e.calnumber{SEP}' | '{SEP}'"+t("event_group")+": '{SEP}case when eg.groupvalue is null then '' else eg.groupvalue end{CCE} as lsvalue"],from:"event e",left_join:["groups eg","on",["e.eventgroup","=","eg.id"]],where:[["e.deleted","=","0"],["and","e.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'project'"]]}]],["and","e.ref_id","=","?"]]}}},rate:{delete_state:function(){return{select:["0"]}},rate:function(){return{select:["r.*","p.planumber","{FMS_DATE}r.ratedate {FME_DATE} as ratedate"],from:"rate r",left_join:["place p","on",["r.place_id","=","p.id"]],where:[["r.deleted","=","0"],["and","r.id","=","?"]]}}},report:{report:function(e){switch(e){case"report":return{select:["r.*","fg.groupvalue as ftype"],from:"ui_report r",inner_join:["groups fg","on",["r.filetype","=","fg.id"]],where:["r.id","=","?"]};case"printqueue":return{select:["*"],from:"ui_report",where:["id","in",[{select_distinct:["report_id"],from:"ui_printqueue"}]]};default:return{select:["r.id","r.reportkey","r.repname","r.description","r.label","fg.groupvalue as filetype","case when ig.groupvalue='disabled' then 0 else 1 end as usereports","r.nervatype","r.report","r.direction"],from:"ui_report r",inner_join:["groups fg","on",["r.filetype","=","fg.id"]],left_join:[["ui_audit au","on",[["r.id","=","au.subtype"],["and","au.usergroup","=","?"],["and","au.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'report'"]]}]]]],["groups ig","on",["au.inputfilter","=","ig.id"]]],where:[["r.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","?"]]}]],["and","fg.groupvalue","in",[[],"'pdf'"]],["and","r.repname","is not null"]],order_by:["r.repname"]}}}},setting:{setting_view:function(){return{select:["fv.id","fv.fieldname","fv.value","fv.notes","df.description","df.valuelist","ft.groupvalue as fieldtype","df.description as lslabel","{CCS}case when fv.value is null then '' else fv.value end {SEP} case when fv.notes is null then '' else {CCS}' | '{SEP}fv.notes{CCE} end{CCE} as lsvalue"],from:"deffield df",inner_join:[["fieldvalue fv","on",["fv.fieldname","=","df.fieldname"]],["groups ft","on",["df.fieldtype","=","ft.id"]],["groups g","on",[["df.nervatype","=","g.id"],["and","g.groupname","=","'nervatype'"],["and","g.groupvalue","=","'setting'"]]]],where:[["df.deleted","=","0"],["and","df.visible","=","1"],["and","fv.deleted","=","0"]],order_by:["df.description"]}}},tax:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"item",where:[["item.deleted","=","0"],["and","item.tax_id","=","?"]]},{union_select:["count(*) as co"],from:"product",where:[["product.deleted","=","0"],["and","product.tax_id","=","?"]]}]],"foo"]}},tax_view:function(){return{select:["*","case when inactive = 1 then '"+t("label_yes")+"' else '"+t("label_no")+"' end as inact"],from:"tax"}}},template:{template:function(){return{select:["r.*","ng.groupvalue as ntype","tt.groupvalue as ttype","dir.groupvalue as dirtype"],from:"ui_report r",inner_join:["groups ng","on",["r.nervatype","=","ng.id"]],left_join:[["groups tt","on",["r.transtype","=","tt.id"]],["groups dir","on",["r.direction","=","dir.id"]]],where:["r.id","=","?"]}},template_view:function(){return{select:["r.id","r.reportkey as lslabel","r.repname as lsvalue"],from:"ui_report r",inner_join:[["groups fg","on",["r.filetype","=","fg.id"]],["groups ng","on",["r.nervatype","=","ng.id"]]],where:["fg.groupvalue","=","'pdf'"]}}},tool:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"movement",where:["tool_id","=","?"]},{union_select:["count(*) as co"],from:"event",inner_join:["groups nt","on",[["event.nervatype","=","nt.id"],["and","nt.groupvalue","=","'tool'"]]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'tool'"]]}]],["and","ref_id_2","=","?"]]}]],"foo"]}},tool:function(){return{select:["too.*","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product"],from:"tool too",inner_join:["product p","on",["too.product_id","=","p.id"]],where:[["too.deleted","=","0"],["and","too.id","=","?"]]}},event:function(){return{select:["e.id","e.calnumber","{FMS_DATETIME}e.fromdate {FME_DATETIME} as fromdate","eg.groupvalue as eventgroup","e.subject","e.deleted","{CCS}case when e.fromdate is null then '' else {FMS_DATETIME}e.fromdate {FME_DATETIME} end{SEP} ' | '{SEP}case when e.subject is null then '' else e.subject end{CCE} as lslabel","{CCS}e.calnumber{SEP}' | '{SEP}'"+t("event_group")+": '{SEP}case when eg.groupvalue is null then '' else eg.groupvalue end{CCE} as lsvalue"],from:"event e",left_join:["groups eg","on",["e.eventgroup","=","eg.id"]],where:[["e.deleted","=","0"],["and","e.nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'tool'"]]}]],["and","e.ref_id","=","?"]]}}},trans:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"event",inner_join:["groups nt","on",[["event.nervatype","=","nt.id"],["and","nt.groupvalue","=","'trans'"]]],where:[["event.deleted","=","0"],["and","event.ref_id","=","?"]]},{union_select:["count(*) as co"],from:"link",where:[["nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","ref_id_2","=","?"]]}]],"foo"]}},item:function(){return{select:["i.*","p.partnumber","ta.rate"],from:"item i",inner_join:[["product p","on",["i.product_id","=","p.id"]],["tax ta","on",["i.tax_id","=","ta.id"]]],where:[["i.deleted","=","0"],["and","trans_id","=","?"]],order_by:["i.id"]}},element_count:function(){return{select:["count(t.id) as pec"],from:"trans t",inner_join:[["item i","on",[["t.id","=","i.trans_id"],["and","i.deleted","=","0"]]],["fieldvalue fv","on",[["i.product_id","=","fv.ref_id"],["and","fv.fieldname","=","'product_element'"]]]],where:["t.id","=","?"]}},payment:function(){return{select:["*","id as rid","{FMS_DATE}paiddate {FME_DATE} as paiddate"],from:"payment",where:[["deleted","=","0"],["and","trans_id","=","?"]],order_by:["id"]}},movement_delivery:function(){return{select_distinct:["mv.*","mv.id as rid","lnk_item.ref_id_2 as item_id","it.transnumber as item_refnumber","lnk_ref.ref_id_1 as ref_id","pl.planumber","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product","p.partnumber","p.unit","it.id as item_ref_id","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate"],from:"movement mv",inner_join:["groups mt","on",[["mv.movetype","=","mt.id"],["and","mt.groupvalue","in",[[],"'inventory'","'tool'","'plan'"]]]],left_join:[["product p","on",["mv.product_id","=","p.id"]],["link lnk_item","on",[["mv.id","=","lnk_item.ref_id_1"],["and","lnk_item.deleted","=","0"],["and","lnk_item.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]],["and","lnk_item.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'item'"]]}]]]],["item mi","on",["lnk_item.ref_id_2","=","mi.id"]],["trans it","on",["mi.trans_id","=","it.id"]],["link lnk_ref","on",[["mv.id","=","lnk_ref.ref_id_2"],["and","lnk_ref.deleted","=","0"],["and","lnk_ref.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]],["and","lnk_ref.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]]]],["place pl","on",["mv.place_id","=","pl.id"]]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},movement_transfer:function(){return{select_distinct:["mv.*","mv.id as rid","lnk_ref.ref_id_1 as ref_id","pl.planumber","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product","p.partnumber","p.unit","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate"],from:"movement mv",inner_join:[["trans t","on",["mv.trans_id","=","t.id"]],["product p","on",["mv.product_id","=","p.id"]],["place pl","on",["mv.place_id","=","pl.id"]],["link lnk_ref","on",[["mv.id","=","lnk_ref.ref_id_2"],["and","lnk_ref.deleted","=","0"],["and","lnk_ref.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]],["and","lnk_ref.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]]]]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},movement_inventory:function(){return{select:["mv.*","p.partnumber","p.description","p.unit","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product"],from:"movement mv",inner_join:["product p","on",["mv.product_id","=","p.id"]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},movement_waybill:function(){return{select:["mv.*","too.serial","too.description as tooldesc","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate"],from:"movement mv",inner_join:["tool too","on",["mv.tool_id","=","too.id"]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},movement_formula_head:function(){return{select:["mv.*","p.partnumber","p.description","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product"],from:"movement mv",inner_join:[["groups mt","on",[["mv.movetype","=","mt.id"],["and","mt.groupvalue","=","'head'"]]],["product p","on",["mv.product_id","=","p.id"]]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]]}},movement_formula:function(){return{select:["mv.*","p.partnumber","p.description","pl.planumber","p.unit","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product",'case when mv.shared = 1 then \'<div align="center" width="100&#37;"><a class="ui-btn ui-btn-icon-notext ui-icon-check ui-state-disabled ui-btn-b" style="background-color:#838B83;border-style:none;">YES</a></div>\' else \'<div align="center" width="100&#37;"><a class="ui-btn ui-btn-icon-notext ui-icon-delete ui-state-disabled ui-btn-b" style="background-color:#EEE8CD;border-style:none;">NO</a></div>\' end as cb_shared'],from:"movement mv",inner_join:[["groups mt","on",[["mv.movetype","=","mt.id"],["and","mt.groupvalue","=","'plan'"]]],["product p","on",["mv.product_id","=","p.id"]]],left_join:["place pl","on",["mv.place_id","=","pl.id"]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},movement_production_head:function(){return{select:["mv.*","p.partnumber","p.description","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product"],from:"movement mv",inner_join:["product p","on",["mv.product_id","=","p.id"]],where:[["mv.deleted","=","0"],["and","mv.shared","=","1"],["and","mv.trans_id","=","?"]]}},movement_production:function(){return{select:["mv.*","p.partnumber","p.description","pl.planumber","p.unit","-(mv.qty) as opposite_qty","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as product"],from:"movement mv",inner_join:["product p","on",["mv.product_id","=","p.id"]],left_join:["place pl","on",["mv.place_id","=","pl.id"]],where:[["mv.deleted","=","0"],["and","mv.shared","=","0"],["and","mv.trans_id","=","?"]],order_by:["mv.id"]}},formula_head:function(){return{select:["t.id","t.transnumber","mv.qty"],from:"trans t",inner_join:[["movement mv","on",[["mv.trans_id","=","t.id"],["and","mv.deleted","=","0"]]],["groups fmt","on",[["mv.movetype","=","fmt.id"],["and","fmt.groupvalue","=","'head'"]]],["movement pv","on",[["pv.product_id","=","mv.product_id"],["and","pv.deleted","=","0"],["and","pv.shared","=","1"]]],["groups pmt","on",[["pv.movetype","=","pmt.id"],["and","pmt.groupvalue","=","'inventory'"]]]],where:[["t.deleted","=","0"],["and","pv.trans_id","=","?"]]}},formula_items:function(){return{select:["mv.*","{FMS_DATETIME}mv.shippingdate {FME_DATETIME} as shippingdate"],from:"trans t",inner_join:[["movement mv","on",[["mv.trans_id","=","t.id"],["and","mv.deleted","=","0"]]],["groups fmt","on",[["mv.movetype","=","fmt.id"],["and","fmt.groupvalue","=","'plan'"]]]],where:["t.id","=","?"],order_by:["mv.id"]}},trans:function(){return{select:["t.*","p.pronumber","e.empnumber","c.custname","c.terms","c.discount","c.notax as cust_notax","{CCS}pl.planumber{SEP} case when pl.curr is null then '' else {CCS}' | '{SEP} pl.curr{CCE} end{CCE} as planumber","{FMS_DATE}t.crdate {FME_DATE} as crdate","{FMS_DATE}t.transdate {FME_DATE} as transdate","{FMS_DATETIME}t.duedate {FME_DATETIME} as duedate","tfp.place_id as target_place","tfp.planumber as target_planumber","case when irow.netamount is null then 0 else irow.netamount end as netamount","case when irow.vatamount is null then 0 else irow.vatamount end as vatamount","case when irow.amount is null then 0 else irow.amount end as amount","case when prow.expense is null then 0 else prow.expense end as expense","case when prow.income is null then 0 else prow.income end as income","case when prow.balance is null then 0 else prow.balance end as balance","case when fv.value is null then 'normal' else fv.value end as transcast","cu.digit"],from:"trans t",inner_join:[["groups tg","on",["t.transtype","=","tg.id"]],["groups dg","on",["t.direction","=","dg.id"]]],left_join:[["fieldvalue fv","on",[["t.id","=","fv.ref_id"],["and","fieldname","=","'trans_transcast'"]]],["customer c","on",["t.customer_id","=","c.id"]],["project p","on",["t.project_id","=","p.id"]],["employee e","on",["t.employee_id","=","e.id"]],["place pl","on",["t.place_id","=","pl.id"]],["currency cu","on",["t.curr","=","cu.curr"]],[[[{select:["mv.trans_id","mv.place_id","pl.planumber"],from:"movement mv",inner_join:["place pl","on",["mv.place_id","=","pl.id"]],where:[["mv.deleted","=","0"],["and","mv.trans_id","=","?"]],group_by:["mv.trans_id","mv.place_id","pl.planumber"]}],"tfp"],"on",[["tfp.trans_id","=","t.id"],["and","tfp.place_id","<>","t.place_id"]]],[[[{select:["trans_id","sum(netamount) as netamount","sum(vatamount) as vatamount","sum(amount) as amount"],from:"item",where:[["deleted","=","0"],["and","trans_id","=","?"]],group_by:["trans_id"]}],"irow"],"on",["t.id","=","irow.trans_id"]],[[[{select:["trans_id","sum(case when amount<0 then amount else 0 end) as expense","sum(case when amount>0 then amount else 0 end) as income","sum(amount) as balance"],from:"payment",where:[["deleted","=","0"],["and","trans_id","=","?"]],group_by:["trans_id"]}],"prow"],"on",["t.id","=","prow.trans_id"]]],where:[["t.id","=","?"],["and",[["t.deleted","=","0"],["or",[["tg.groupvalue","=","'invoice'"],["and","dg.groupvalue","=","'out'"]]],["or",[["tg.groupvalue","=","'receipt'"],["and","dg.groupvalue","=","'out'"]]],["or",[["tg.groupvalue","=","'cash'"]]]]]]}},translink:function(){return{select:["l.*","tt.groupvalue as transtype","tr2.transnumber"],from:"link l",inner_join:[["groups t1","on",[["l.nervatype_1","=","t1.id"],["and","t1.groupname","=","'nervatype'"],["and","t1.groupvalue","=","'trans'"]]],["groups t2","on",[["l.nervatype_2","=","t2.id"],["and","t2.groupname","=","'nervatype'"],["and","t2.groupvalue","=","'trans'"]]],["fieldvalue tc","on",[["tc.ref_id","=","l.ref_id_1"],["and","tc.fieldname","=","'trans_transcast'"],["and","tc.value","in",[[],"'normal'","'cancellation'"]]]],["trans tr2","on",[["l.ref_id_2","=","tr2.id"],["and",["tr2.deleted","=","0"]]]],["groups tt","on",["tr2.transtype","=","tt.id"]]],where:[["l.deleted","=","0"],["and","l.ref_id_1","=","?"]]}},cancel_link:function(){return{select:["l.*","tt.groupvalue as transtype","tr1.transnumber"],from:"link l",inner_join:[["groups t1","on",[["l.nervatype_1","=","t1.id"],["and","t1.groupname","=","'nervatype'"],["and","t1.groupvalue","=","'trans'"]]],["groups t2","on",[["l.nervatype_2","=","t2.id"],["and","t2.groupname","=","'nervatype'"],["and","t2.groupvalue","=","'trans'"]]],["trans tr1","on",[["l.ref_id_1","=","tr1.id"]]],["groups tt","on",["tr1.transtype","=","tt.id"]],["fieldvalue tc","on",[["tc.ref_id","=","tr1.id"],["and","tc.fieldname","=","'trans_transcast'"],["and","tc.value","=","'cancellation'"]]]],where:[["l.deleted","=","0"],["and","l.ref_id_2","=","?"]]}},invoice_customer:function(){return{select:["comp.custname as trans_custinvoice_compname","{CCS}comp.zipcode{SEP}' '{SEP}comp.city{SEP}' '{SEP}comp.street{CCE} as trans_custinvoice_compaddress","comp.taxnumber as trans_custinvoice_comptax","cust.custname as trans_custinvoice_custname","{CCS}cust.zipcode{SEP}' '{SEP}cust.city{SEP}' '{SEP}cust.street{CCE} as trans_custinvoice_custaddress","cust.taxnumber as trans_custinvoice_custtax"],from:[[[{select:["c.custname","adr.zipcode","adr.city","adr.street","c.taxnumber"],from:"customer c",left_join:[[[{select:["ref_id as customer_id","case when zipcode is null then '' else zipcode end as zipcode","case when city is null then '' else city end as city","case when street is null then '' else street end as street"],from:"address",where:["id","in",[{select:["min(id)"],from:"address",where:[["nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","deleted","=","0"]],group_by:["ref_id"]}]]}],"adr"],"on",["c.id","=","adr.customer_id"]],where:["c.id","in",[{select:["min(customer.id)"],from:"customer",inner_join:["groups","on",[["customer.custtype","=","groups.id"],["and","groups.groupvalue","=","'own'"]]]}]]}],"comp,"],[[{select:["c.custname","adr.zipcode","adr.city","adr.street","c.taxnumber"],from:"customer c",left_join:[[[{select:["ref_id as customer_id","case when zipcode is null then '' else zipcode end as zipcode","case when city is null then '' else city end as city","case when street is null then '' else street end as street"],from:"address",where:["id","in",[{select:["min(id)"],from:"address",where:[["nervatype","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'customer'"]]}]],["and","deleted","=","0"]],group_by:["ref_id"]}]]}],"adr"],"on",["c.id","=","adr.customer_id"]],where:["c.id","=","?"]}],"cust"]]}},invoice_link:function(){return{select:["ln.*","{CCS}t.transnumber{SEP}case when tg.groupvalue='bank' then {CCS}' ~ '{SEP}{CAS_TEXT}p.id {CAE_TEXT}{CCE} else '' end{SEP}' | '{SEP}tg.groupvalue{SEP}'-'{SEP}dg.groupvalue{CCE} as lsvalue","{CCS}{CAS_TEXT}p.paiddate {CAE_TEXT}{SEP}' | ' {SEP}pa.description{SEP}' | ' {SEP}{CAS_TEXT}{CAS_FLOAT}af.value {CAE_FLOAT}*{CAS_FLOAT}rf.value {CAE_FLOAT}{CAE_TEXT}{CCE} as lslabel","t.id as trans_id","tg.groupvalue as transtype","pa.curr","{CCS}t.transnumber{SEP}case when tg.groupvalue='bank' then {CCS}' ~ '{SEP}{CAS_TEXT}p.id {CAE_TEXT}{CCE} else '' end{CCE} as transnumber"],from:"link ln",inner_join:[["payment p","on",[["ln.ref_id_1","=","p.id"],["and","p.deleted","=","0"]]],["trans t","on",["p.trans_id","=","t.id"]],["groups tg","on",["t.transtype","=","tg.id"]],["groups dg","on",["t.direction","=","dg.id"]],["place pa","on",["t.place_id","=","pa.id"]],["fieldvalue af","on",[["ln.id","=","af.ref_id"],["and","af.fieldname","=","'link_qty'"]]],["fieldvalue rf","on",[["ln.id","=","rf.ref_id"],["and","rf.fieldname","=","'link_rate'"]]]],where:[["ln.deleted","=","0"],["and","ln.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'payment'"]]}]],["and","ln.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","ln.ref_id_2","=","?"]],order_by:["p.paiddate"]}},payment_link:function(){return{select:["ln.*","p.id as rid","t.transnumber","t.curr","af.value as amount","rf.value as rate","{CCS}t.curr{SEP}' | '{SEP}af.value{SEP}' | '{SEP}'"+t("payment_rate")+" :'{SEP}rf.value{CCE} as lslabel","{CCS}'"+t("payment_item")+": '{SEP}{CAS_TEXT}p.id {CAE_TEXT}{SEP}' | '{SEP}'"+t("payment_invnumber")+": '{SEP}t.transnumber{CCE} as lsvalue"],from:"link ln",inner_join:[["payment p","on",[["ln.ref_id_1","=","p.id"],["and","p.deleted","=","0"]]],["trans t","on",["ln.ref_id_2","=","t.id"]],["groups tg","on",["t.transtype","=","tg.id"]],["groups dg","on",["t.direction","=","dg.id"]],["fieldvalue af","on",[["ln.id","=","af.ref_id"],["and","af.fieldname","=","'link_qty'"]]],["fieldvalue rf","on",[["ln.id","=","rf.ref_id"],["and","rf.fieldname","=","'link_rate'"]]]],where:[["ln.deleted","=","0"],["and","ln.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'payment'"]]}]],["and","ln.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","p.trans_id","=","?"]],order_by:["p.paiddate"]}},tool_movement:function(){return{select:["t.id","{CCS}t.transnumber{SEP}' | '{SEP}dg.groupvalue{CCE} as lsvalue","{CCS}{CAS_TEXT}mv.shippingdate {CAE_TEXT}{SEP}' | '{SEP}tl.serial{SEP}' | '{SEP}tl.description{CCE} as lslabel"],from:"trans t",inner_join:[["movement mv","on",["t.id","=","mv.trans_id"]],["tool tl","on",["mv.tool_id","=","tl.id"]],["groups tg","on",[["t.transtype","=","tg.id"],["and","tg.groupvalue","=","'waybill'"]]],["groups dg","on",["t.direction","=","dg.id"]]],left_join:[["link lnk","on",[["t.id","=","lnk.ref_id_1"],["and","lnk.deleted","=","0"],["and","lnk.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","lnk.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]]]],["trans lt","on",["lnk.ref_id_2","=","lt.id"]]],where:[["t.deleted","=","0"],["and","mv.deleted","=","0"],["and","lt.id","=","?"]],order_by:["shippingdate"]}},transitem_invoice:function(){return{select:["t1.id as id","ti.product_id","ti.deposit","ti.qty","{CCS}t1.transnumber{SEP}' | '{SEP} {CAS_TEXT}t1.transdate {CAE_TEXT}{SEP} case when ti.deposit=1 then {CCS}' | '{SEP}'Deposit'{CCE} else '' end{CCE} as lsinfo","ti.description as lsvalue","{CCS}ti.unit{SEP}' | '{SEP}{CAS_TEXT}ti.qty {CAE_TEXT}{SEP}' | '{SEP} t1.curr{SEP}' | '{SEP}{CAS_TEXT}ti.amount {CAE_TEXT}{CCE} as lslabel"],from:"link ln",inner_join:[["trans t1","on",[["ln.ref_id_1","=","t1.id"],["and","t1.deleted","=","0"]]],["groups t1type","on",[["t1.transtype","=","t1type.id"],["and",[["t1type.groupvalue","=","'invoice'"],["or","t1type.groupvalue","=","'receipt'"]]]]],["groups t1dir","on",["t1.direction","=","t1dir.id"]],["item ti","on",[["t1.id","=","ti.trans_id"],["and","ti.deleted","=","0"]]],["trans t2","on",["ln.ref_id_2","=","t2.id"]]],where:[["ln.deleted","=","0"],["and","ln.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","ln.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'trans'"]]}]],["and","t1.direction","=","t2.direction"],["and","ln.ref_id_2","=","?"]],order_by:["ti.id"]}},transitem_shipping:function(){return{select:["{CCS}i.id{SEP}'-'{SEP}mt.product_id{CCE} as id","mt.product_id","ip.description as item_product","mp.description as movement_product","sum(mt.qty) as sqty"],from:"item i",inner_join:[["product ip","on",["i.product_id","=","ip.id"]],["link ln","on",[["ln.ref_id_2","=","i.id"],["and","ln.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'item'"]]}]]]],["movement mt","on",[["ln.ref_id_1","=","mt.id"],["and","mt.deleted","=","0"],["and","ln.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]]]],["product mp","on",["mt.product_id","=","mp.id"]]],where:[["i.deleted","=","0"],["and","i.trans_id","=","?"]],group_by:["i.id","ip.description","mt.product_id","mp.description"],order_by:["ip.description"]}},shipping_items:function(){return{select:["i.id as item_id","i.description","case when pe.id is null then i.product_id else pe.id end as product_id","case when pf.notes is null then 1 else {CAS_FLOAT}pf.notes {CAE_FLOAT} end * i.qty as qty","case when pe.id is null then p.unit else pe.unit end as unit","case when pe.id is null then p.partnumber else pe.partnumber end as partnumber","case when pe.id is null then p.description else pe.description end as partname","case when pe.id is null then {CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} else {CCS}pe.partnumber{SEP}' | '{SEP}pe.description{CCE} end as product","case when pe.id is null then 0 else 1 end as pgroup"],from:"item i",inner_join:[["product p","on",["i.product_id","=","p.id"]],["groups pg","on",[["p.protype","=","pg.id"],["and","pg.groupvalue","=","'item'"]]]],left_join:[["fieldvalue pf","on",[["pf.ref_id","=","i.product_id"],["and","pf.fieldname","=","'product_element'"]]],["product pe","on",["{CAS_INT}pf.value {CAE_INT}","=","pe.id"]]],where:[["i.deleted","=","0"],["and","trans_id","=","?"]],order_by:["i.id"]}},shipping_delivery:function(){return{select:["t.id","{CCS}p.unit{SEP}' | '{SEP}{CAS_TEXT}mv.qty {CAE_TEXT}{SEP}' | '{SEP}mv.notes{CCE} as lslabel","{CCS}p.partnumber{SEP}' | '{SEP}p.description{CCE} as lsvalue","{CCS}t.transnumber{SEP}' | '{SEP} {CAS_TEXT}{FMS_DATETIME}mv.shippingdate {FME_DATETIME} {CAE_TEXT}{SEP}' | '{SEP}pl.planumber{CCE} as lsinfo"],from:"movement mv",inner_join:[["product p","on",["mv.product_id","=","p.id"]],["trans t","on",["mv.trans_id","=","t.id"]],["link lnk_item","on",[["mv.id","=","lnk_item.ref_id_1"],["and","lnk_item.deleted","=","0"],["and","lnk_item.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'movement'"]]}]],["and","lnk_item.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'item'"]]}]]]],["item mi","on",["lnk_item.ref_id_2","=","mi.id"]],["trans it","on",["mi.trans_id","=","it.id"]],["place pl","on",["mv.place_id","=","pl.id"]]],where:[["mv.deleted","=","0"],["and","mi.trans_id","=","?"]],order_by:["mv.id"]}},shipping_stock:function(){return{select:["{CCS}pl.id{SEP}'-'{SEP}case when mv.notes is null then '' else mv.notes end{CCE} as id","p.partnumber","p.description","p.unit","mv.notes as batch_no","{CCS}pl.planumber{SEP}' | '{SEP}pl.description{CCE} as warehouse","sum(mv.qty) as sqty","{FMS_DATETIME}max(mv.shippingdate) {FME_DATETIME} as shipping"],from:"movement mv",inner_join:[["groups g","on",[["mv.movetype","=","g.id"],["and","g.groupvalue","=","'inventory'"]]],["place pl","on",["mv.place_id","=","pl.id"]],["product p","on",["mv.product_id","=","p.id"]],["trans t","on",[["mv.trans_id","=","t.id"],["and","t.deleted","=","0"]]]],where:[["mv.deleted","=","0"],["and","p.id","=","?"]],group_by:["pl.id","pl.planumber","pl.description","p.id","p.partnumber","p.description","p.unit","mv.notes"],order_by:["sum(mv.qty)"]}}},ui_menu:{ui_menufields:function(){return{select:["f.*","ft.groupvalue as fieldtype_name"],from:"ui_menufields f",inner_join:["groups ft","on",["f.fieldtype","=","ft.id"]],where:["menu_id","=","?"]}},ui_menu_view:function(){return{select:["*","menukey as lslabel","description as lsvalue"],from:"ui_menu"}}},usergroup:{delete_state:function(){return{select:["sum(co) as sco"],from:[[[{select:["count(*) as co"],from:"employee",where:[["employee.deleted","=","0"],["and","employee.usergroup","=","?"]]}]],"foo"]}},reportkey:function(){return{select:["id","reportkey"],from:"ui_report",order_by:["reportkey"]}},menukey:function(){return{select:["id","menukey"],from:"ui_menu",order_by:["menukey"]}},datafilter:function(){return{select:["*"],from:"link l",where:[["l.deleted","=","0"],["and","l.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'groups'"]]}]],["and","l.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'groups'"]]}]],["and","l.ref_id_1","=","?"]]}},audit:function(){return{select:["a.*","nt.groupvalue as nervatype_name","case when nt.groupvalue ='trans' then st.groupvalue when nt.groupvalue ='report' then ur.reportkey when nt.groupvalue ='menu' then um.menukey else null end as subtype_name","inf.groupvalue as inputfilter_name","case when a.supervisor = 1 then '"+t("label_yes")+"' else '"+t("label_no")+"' end as supervisor_name"],from:"ui_audit a",inner_join:[["groups nt","on",["a.nervatype","=","nt.id"]],["groups inf","on",["a.inputfilter","=","inf.id"]]],left_join:[["groups st","on",["a.subtype","=","st.id"]],["ui_report ur","on",["a.subtype","=","ur.id"]],["ui_menu um","on",["a.subtype","=","um.id"]]],where:["a.usergroup","=","?"]}},usergroup_view:function(){return{select:["ug.*","ug.groupvalue as lslabel","case when ug.description is null then '' else ug.description end as lsvalue","l.ref_id_2 as transfilter","l.id as translink"],from:"groups ug",left_join:["link l","on",[["l.ref_id_1","=","ug.id"],["and","l.deleted","=","0"],["and","l.nervatype_1","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'groups'"]]}]],["and","l.nervatype_2","=",[{select:["id"],from:"groups",where:[["groupname","=","'nervatype'"],["and","groupvalue","=","'groups'"]]}]]]],where:[["ug.deleted","=","0"],["and","ug.groupname","in",[[],"'usergroup'"]]]}}}}}}}]);