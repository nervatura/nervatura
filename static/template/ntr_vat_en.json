{"meta":{"report_key":"ntr_vat_en","report_type":"REPORT","report_name":"VAT Summary","description":"Recoverable and payable VAT summary grouped by currency.","label":"Invoice","file_type":"FILE_PDF"},"report":{"title":"VAT summary","left-margin":15,"top-margin":15,"right-margin":15},"header":[{"row":{"columns":[{"cell":{"name":"custname","value":"company.0.custname","align":"left","font-style":"bold","font-size":12,"width":100}},{"cell":{"name":"label","value":"labels.lb_vat_summary","font-style":"bolditalic","font-size":24,"align":"right","color":"#696969"}}],"height":10}},{"vgap":{"height":2}},{"hline":{"border-color":100,"gap":1}},{"vgap":{"height":3}},{"row":{"columns":[{"cell":{"name":"label","value":"labels.lb_report_date","font-style":"bold","align":"left"}},{"cell":{"name":"date_from","value":"company.0.date_from","align":"left","font-style":"bold"}},{"cell":{"name":"label","value":"-","font-style":"bold","align":"left","width":5}},{"cell":{"name":"date_to","value":"company.0.date_to","align":"left","font-style":"bold"}},{"cell":{"name":"crdate","value":"={{labels.lb_create_date}} ={{crtime}}","align":"right","font-style":"italic","font-size":9}}],"hgap":2,"height":1}}],"details":[{"vgap":{"height":3}},{"datagrid":{"columns":[{"column":{"width":"6%","fieldname":"counter","align":"right","label":"labels.lb_no"}},{"column":{"width":"6%","fieldname":"curr","label":"labels.lb_curr"}},{"column":{"width":"20%","fieldname":"transnumber","label":"labels.lb_invoice_no","footer":"labels.lb_total"}},{"column":{"width":"11%","fieldname":"duedate","align":"center","label":"labels.lb_due_date","header-align":"center"}},{"column":{"width":"20%","fieldname":"custname","label":"labels.lb_customer"}},{"column":{"width":"6%","fieldname":"taxcode","align":"right","label":"={{labels.lb_vat}}"}},{"column":{"width":"12%","fieldname":"netamount","align":"right","label":"labels.lb_net","footer":"total_bycur.0.netamount","header-align":"right","footer-align":"right"}},{"column":{"width":"11%","fieldname":"vatamount","align":"right","label":"labels.lb_vat","footer":"total_bycur.0.vatamount","header-align":"right","footer-align":"right"}},{"column":{"fieldname":"amount","align":"right","label":"labels.lb_gross","footer":"total_bycur.0.amount","header-align":"right","footer-align":"right"}}],"name":"items","databind":"ds","border":"1","border-color":100,"font-size":8,"header-background":230}},{"vgap":{"height":3}},{"datagrid":{"columns":[{"column":{"width":"10%","fieldname":"curr","label":"labels.lb_curr"}},{"column":{"width":"8%","fieldname":"taxcode","align":"right","label":"={{labels.lb_vat}}%","header-align":"right"}},{"column":{"width":"17%","fieldname":"netamount_out","label":"labels.lb_net_income","align":"right","header-align":"right"}},{"column":{"width":"16%","fieldname":"vatamount_out","label":"={{labels.lb_vat}}(+)","align":"right","header-align":"right"}},{"column":{"width":"17%","fieldname":"netamount_in","align":"right","label":"labels.lb_net_payment","header-align":"right"}},{"column":{"width":"16%","fieldname":"vatamount_in","align":"right","label":"={{labels.lb_vat}}(-)","header-align":"right"}},{"column":{"width":"17%","fieldname":"vatamount_diff","align":"right","label":"labels.lb_vat_diff","header-align":"right"}}],"name":"total","databind":"total","border":"1","border-color":100,"font-size":8,"header-background":230}}],"footer":[{"vgap":{"height":2}},{"hline":{"border-color":100}},{"row":{"columns":[{"cell":{"value":"labels.web_page","font-style":"bolditalic","color":"#2100FF"}},{"cell":{"value":"{{page}}","align":"right","font-style":"bold"}}],"height":10}}],"sources":{"total":{"default":"select t.currency_code as curr, case when t.tax_free then 'NOTAX' else ti.tax_code end as taxcode, sum(case when t.direction = 'DIRECTION_OUT' then ti.net_amount else 0 end) as netamount_out, sum(case when t.direction = 'DIRECTION_IN' then ti.net_amount else 0 end) as netamount_in, sum(case when t.direction = 'DIRECTION_OUT' then ti.vat_amount else 0 end) as vatamount_out, sum(case when t.direction = 'DIRECTION_IN' then ti.vat_amount else 0 end) as vatamount_in, sum(case when t.direction = 'DIRECTION_OUT' then ti.amount else 0 end) as amount_out, sum(case when t.direction = 'DIRECTION_IN' then ti.amount else 0 end) as amount_in, sum(case when t.direction = 'DIRECTION_IN' then ti.vat_amount else 0 end - case when t.direction = 'DIRECTION_OUT' then ti.vat_amount else 0 end) as vatamount_diff from trans_view t inner join item_view ti on t.code = ti.trans_code where t.trans_type='TRANS_INVOICE' and t.trans_date >= @date_from and t.trans_date <= @date_to @where_str group by t.currency_code, case when t.tax_free then 'NOTAX' else ti.tax_code end order by t.currency_code DESC, case when t.tax_free then 'NOTAX' else ti.tax_code end DESC"},"ds":{"default":"select t.code as transnumber, substr(cast(t.time_stamp as char(10)), 1, 10) as crdate, t.trans_date, substr(cast(t.due_time as char(10)), 1, 10) as  duedate, COALESCE(c.customer_name,'') as custname, t.currency_code as curr, t.direction, case when t.tax_free then 'NOTAX' else ti.tax_code end as taxcode, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.net_amount) else sum(ti.net_amount) end as netamount, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.vat_amount) else sum(ti.vat_amount) end as vatamount, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.amount) else sum(ti.amount) end as amount from trans_view t inner join item_view ti on t.code = ti.trans_code left join customer c on t.customer_code = c.code where t.trans_type='TRANS_INVOICE' and t.trans_date >= @date_from and t.trans_date <= @date_to @where_str group by t.code, substr(cast(t.time_stamp as char(10)), 1, 10), t.trans_date, substr(cast(t.due_time as char(10)), 1, 10), c.customer_name, t.currency_code, t.direction, case when t.tax_free then 'NOTAX' else ti.tax_code end order by t.currency_code DESC, t.direction, t.trans_date","mssql":"select t.code as transnumber, CONVERT(VARCHAR(10), t.time_stamp, 120) as crdate, CONVERT(VARCHAR(10), t.trans_date, 120) as trans_date, CONVERT(VARCHAR(10), t.due_time, 120) as  duedate, c.customer_name as custname, t.currency_code as curr, t.direction, case when t.tax_free then 'NOTAX' else ti.tax_code end as taxcode, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.net_amount) else sum(ti.net_amount) end as netamount, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.vat_amount) else sum(ti.vat_amount) end as vatamount, case when t.direction = 'DIRECTION_IN' then 0-sum(ti.amount) else sum(ti.amount) end as amount from trans_view t inner join item_view ti on t.code = ti.trans_code left join customer c on t.customer_code = c.code where t.trans_type='TRANS_INVOICE' and t.trans_date >= @date_from and t.trans_date <= @date_to @where_str group by t.code, CONVERT(VARCHAR(10), t.time_stamp, 120), t.trans_date, CONVERT(VARCHAR(10), t.due_time, 120), c.customer_name, t.currency_code, t.direction, case when t.tax_free then 'NOTAX' else ti.tax_code end order by t.currency_code DESC, t.direction, t.trans_date"},"total_bycur":{"default":"select t.currency_code as curr, sum(case when t.direction = 'DIRECTION_IN' then 0-ti.net_amount else ti.net_amount end) as netamount, sum(case when t.direction = 'DIRECTION_IN' then 0-ti.vat_amount else ti.vat_amount end) as vatamount, sum(case when t.direction = 'DIRECTION_IN' then 0-ti.amount else ti.amount end) as amount from trans_view t inner join item_view ti on t.code = ti.trans_code where t.trans_type='TRANS_INVOICE' and t.trans_date >= @date_from and t.trans_date <= @date_to @where_str group by t.currency_code order by t.currency_code"},"company":{"default":"select @date_from as date_from, @date_to as date_to, COALESCE(c.customer_name,'') as custname, c.tax_number as taxnumber, c.account, (select country from customer_addresses where code = c.code limit 1) as country, (select state from customer_addresses where code = c.code limit 1) as state, (select zip_code from customer_addresses where code = c.code limit 1) as zipcode, (select city from customer_addresses where code = c.code limit 1) as city, (select street from customer_addresses where code = c.code limit 1) as street from customer_view c where c.customer_type ='CUSTOMER_OWN' limit 1","mssql":"select @date_from as date_from, @date_to as date_to, COALESCE(c.customer_name,'') as custname, c.tax_number as taxnumber, c.account, (select top(1) country from customer_addresses where code = c.code) as country, (select top(1) state from customer_addresses where code = c.code) as state, (select top(1) zip_code from customer_addresses where code = c.code) as zipcode, (select top(1) city from customer_addresses where code = c.code) as city, (select top(1) street top(1) from customer_addresses where code = c.code) as street from customer_view c where c.customer_type ='CUSTOMER_OWN'"}},"fields":{"date_from":{"fieldtype":"date","wheretype":"in","description":"From date","orderby":0,"defvalue":"-360"},"date_to":{"fieldtype":"date","wheretype":"in","description":"To date","orderby":1},"curr":{"fieldtype":"string","wheretype":"where","description":"Currency","orderby":2}},"data":{"labels":{"lb_create_date":"Create date:","lb_curr":"Curr","lb_customer":"Customer","lb_due_date":"Due Date","lb_gross":"Gross","lb_invoice_no":"Invoice No.","lb_net":"Net","lb_net_income":"Net income","lb_net_payment":"Net payment","lb_no":"No.","lb_report_date":"Report date:","lb_total":"Total","lb_vat":"VAT","lb_yes":"YES","lb_notax":"AAM","lb_vat_diff":"VAT Diff.","lb_vat_summary":"VAT summary","web_link":"http://nervatura.com","web_page":"www.nervatura.com"}}}