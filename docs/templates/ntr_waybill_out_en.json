{"meta":{"reportkey":"ntr_waybill_out_en","nervatype":"trans","transtype":"waybill","direction":"out","repname":"Tool Movement EN","description":"Outgoing Movement","filetype":"pdf"},"report":{"title":"TOOL MOVEMENT","left-margin":15,"top-margin":15,"right-margin":15},"header":[{"row":{"columns":[{"image":{"src":"logo"}},{"cell":{"name":"label","value":"labels.lb_movement","font-style":"bolditalic","font-size":24,"color":"#696969"}},{"cell":{"name":"direction","value":"labels.lb_out","align":"right","font-style":"bold","font-size":18}}],"height":10}},{"hline":{"border-color":100}},{"vgap":{"height":2}}],"details":[{"row":{"columns":[{"cell":{"name":"company_name","font-style":"bold","value":"head.0.comp_name"}},{"cell":{"name":"label","align":"right","value":"={{labels.lb_creation_date}}:"}}],"height":6}},{"row":{"columns":[{"cell":{"name":"company_address","value":"={{head.0.comp_zipcode}} ={{head.0.comp_city}} ={{head.0.comp_street}}"}},{"cell":{"name":"crdate","align":"right","value":"head.0.crdate"}}],"height":6}},{"vgap":{"height":1}},{"row":{"columns":[{"cell":{"name":"label","font-style":"bold","value":"labels.lb_transnumber","border":"LBT","border-color":100}},{"cell":{"name":"transnumber","value":"head.0.transnumber","border":"LBT","border-color":100}},{"cell":{"name":"label","font-style":"bold","value":"labels.lb_reftype","border":"LBT","border-color":100}},{"cell":{"name":"reftype","value":"head.0.ref_type","border":"LBT","border-color":100}},{"cell":{"name":"label","font-style":"bold","value":"labels.lb_reference","border":"LBT","border-color":100}},{"cell":{"name":"reference","value":"head.0.ref_value","border":"LBTR","border-color":100}}]}},{"row":{"columns":[{"cell":{"name":"label","font-style":"bold","value":"labels.lb_comments","border":"LB","border-color":100}},{"cell":{"name":"notes","multiline":"true","value":"head.0.notes","border":"LBR","border-color":100}}]}},{"row":{"columns":[{"cell":{"name":"label","width":"50%","font-style":"bold","value":"labels.lb_signature_1","border":"L","border-color":100}},{"cell":{"name":"label","font-style":"bold","value":"labels.lb_signature_2","border":"LR","border-color":100}}]}},{"row":{"columns":[{"cell":{"name":"label","width":"50%","value":"","border":"LB","border-color":100}},{"cell":{"name":"label","font-style":"bold","value":"","border":"LBR","border-color":100}}],"height":25}},{"vgap":{"height":2}},{"datagrid":{"columns":[{"column":{"fieldname":"fielddef"}},{"column":{"fieldname":"value"}},{"column":{"fieldname":"notes"}}],"name":"fieldvalue","databind":"fieldvalue","border":"0","merge":1}},{"vgap":{"height":2}},{"datagrid":{"columns":[{"column":{"width":"8%","fieldname":"id","align":"right","label":"labels.lb_no"}},{"column":{"width":"18%","fieldname":"shippingdate","label":"labels.lb_shipping"}},{"column":{"width":"24%","fieldname":"serial","label":"labels.lb_serial"}},{"column":{"width":"26%","fieldname":"description","label":"labels.lb_description"}},{"column":{"fieldname":"notes","label":"labels.lb_comments"}}],"name":"movement","databind":"movement","border":"1","border-color":100,"font-size":10,"header-background":230}},{"vgap":{"height":5}},{"html":{"fieldname":"notes","html":"={{head.0.fnote}}"}}],"footer":[{"vgap":{"height":2}},{"hline":{"border-color":100}},{"row":{"columns":[{"cell":{"value":"labels.web_page","font-style":"bolditalic","color":"#2100FF"}},{"cell":{"value":"{{page}}","align":"right","font-style":"bold"}}],"height":10}}],"sources":{"fieldvalue":{"default":"select df.description as fielddef, case when fg.groupvalue in ('bool') and fv.value = 'true' then '={{lb_yes}}' when fg.groupvalue in ('bool') and fv.value = 'false' then '={{lb_no}}' when fg.groupvalue in ('customer') then rf_customer.custnumber when fg.groupvalue in ('tool') then rf_tool.serial when fg.groupvalue in ('transitem','transmovement','transpayment') then rf_trans.transnumber when fg.groupvalue in ('product') then rf_product.partnumber when fg.groupvalue in ('project') then rf_project.pronumber when fg.groupvalue in ('employee') then rf_employee.empnumber when fg.groupvalue in ('place') then rf_place.planumber else fv.value end as value, fv.notes as notes from fieldvalue fv inner join deffield df on fv.fieldname = df.fieldname and df.nervatype = (select id from groups where groupname='nervatype' and groupvalue='trans') inner join groups fg on df.fieldtype = fg.id left join customer rf_customer on fv.value = cast(rf_customer.id as char(150)) left join tool rf_tool on fv.value = cast(rf_tool.id as char(150)) left join trans rf_trans on fv.value = cast(rf_trans.id as char(150)) left join product rf_product on fv.value = cast(rf_product.id as char(150)) left join project rf_project on fv.value = cast(rf_project.id as char(150)) left join employee rf_employee on fv.value = cast(rf_employee.id as char(150)) left join place rf_place on fv.value = cast(rf_place.id as char(150)) where fv.deleted = 0 and df.visible=1 and fv.ref_id = @id"},"head":{"default":"select t.transnumber , substr(cast(t.crdate as char(10)), 1, 10) as crdate, case when t.customer_id is null then case when t.employee_id is null then 'transaction' else 'employee' end else 'customer' end as ref_type, case when t.customer_id is null then case when t.employee_id is null then t.ref_transnumber else e.empnumber end else c.custname end as ref_value, case when t.notes is null then '' else t.notes end as notes, case when t.fnote is null then '' else t.fnote end as fnote , comp.custname as comp_name , case when comp_address.zipcode is null then '' else comp_address.zipcode end as comp_zipcode , case when comp_address.city is null then '' else comp_address.city end as comp_city , case when comp_address.street is null then '' else comp_address.street end as comp_street from trans t inner join groups dir on t.direction=dir.id inner join customer comp on comp.id in (select min(customer.id) from customer inner join groups on customer.custtype=groups.id and groups.groupvalue='own') left join (select ref_id, min(id) as address_id from address where deleted=0 and nervatype in(select id from groups where groupname='nervatype' and groupvalue='customer') group by ref_id) as coi on coi.ref_id=comp.id left join address comp_address on comp_address.id=coi.address_id left join customer c on t.customer_id = c.id left join employee e on t.employee_id = e.id where t.id = @id","mssql":"select t.transnumber, CONVERT(VARCHAR(10), t.crdate, 120) as crdate, dir.groupvalue as direction, case when t.customer_id is null then case when t.employee_id is null then 'transaction' else 'employee' end else 'customer' end as ref_type, case when t.customer_id is null then case when t.employee_id is null then t.ref_transnumber else e.empnumber end else c.custname end as ref_value, case when t.notes is null then '' else t.notes end as notes, case when t.fnote is null then '' else t.fnote end as fnote , comp.custname as comp_name , case when comp_address.zipcode is null then '' else comp_address.zipcode end as comp_zipcode , case when comp_address.city is null then '' else comp_address.city end as comp_city , case when comp_address.street is null then '' else comp_address.street end as comp_street from trans t inner join groups dir on t.direction=dir.id inner join customer comp on comp.id in (select min(customer.id) from customer inner join groups on customer.custtype=groups.id and groups.groupvalue='own') left join (select ref_id, min(id) as address_id from address where deleted=0 and nervatype in(select id from groups where groupname='nervatype' and groupvalue='customer') group by ref_id) as coi on coi.ref_id=comp.id left join address comp_address on comp_address.id=coi.address_id left join customer c on t.customer_id = c.id left join employee e on t.employee_id = e.id where t.id = @id"},"movement":{"default":"select mv.id, too.serial, too.description, substr(cast(mv.shippingdate as char(16)), 1, 16) as shippingdate, case when mv.notes is null then '' else mv.notes end as notes from movement mv inner join tool too on mv.tool_id=too.id where mv.deleted=0 and mv.trans_id = @id order by mv.id","mssql":"select mv.id, too.serial, too.description, CONVERT(VARCHAR(16), mv.shippingdate, 120) as shippingdate, case when mv.notes is null then '' else mv.notes end as notes from movement mv inner join tool too on mv.tool_id=too.id where mv.deleted=0 and mv.trans_id = @id order by mv.id"}},"data":{"logo":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQIA7ADsAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCABAAEADAREAAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAQGAQMFAgf/xAAYAQEBAQEBAAAAAAAAAAAAAAAAAQIDBP/aAAwDAQACEAMQAAABuYAAAAAAPCQZno3eCBMc+YjyRJnmzndenq6F3VMefg55Abl2W37p68Hznl4sHolXcWYs2+9h12wUPn5MGCLM9C7u/T1ejmzEaZr2eOiTr66WfXfbaAAAAP/EACMQAAICAgEDBQEAAAAAAAAAAAIDAQQABRATITAREhQVIjH/2gAIAQEAAQUC8xEIRXd8hvDLtdWFtl5O2LC2VksMzZNJfSq5sLkkfMh7QrK61jJ7D/eIiSn8oyZkp1aPQeG1yW/prHCd2ypVKyyIgYy1Fks+tCVMpvVMKZOV9YZYtYqDxf/EACERAAEDAwUBAQAAAAAAAAAAAAEAAhEQE0EDEiAwUSEy/9oACAEDAQE/Ae8Gal4CuhXVcciZTBApqPwOEQmiTy/NNMZqW/YUDK3eUY3dV27CtiEWEKCm6fqAjr//xAAbEQACAgMBAAAAAAAAAAAAAAABEQAQEiAwQP/aAAgBAgEBPwHxOZTKOhROo4C1oBZiipdP/8QAKRAAAQMCBAUEAwAAAAAAAAAAAQACEQMhEDFBYRIiMHGRICNRoTJCYv/aAAgBAQAGPwLrS4gDdPe38G2G+MF8n4C5abj3VqQ8qxDewUvcXd0wam5wNFhhoz39EuzOQTGb3wJxgCStHVPpqkmSjWOthi6l4k6L3Ks7MuuGm3gb9nD+BmUALAYNFB0A5ohziah/cqDTJ3F1am7wprco+NVwMEAdP//EACUQAQACAAUEAQUAAAAAAAAAAAEAERAhMUFRMGFxkdEgobHw8f/aAAgBAQABPyHrOTrdVBvNQ/Ld/GLlPyMF90BNn/N4bX69vLQTlXL0KD3YJyybN30VyV5muWcEtvDfB9gIqlW1wMuTQJWt2evyMcuTNWMdz9XDWU0Ms0APK2bd7O3vSUMzZNN+RwoGZ/Chl0KA2wrmyj3JrMv3JVUcNItSXgcXG7fV8QIHbHT/AP/aAAwDAQACAAMAAAAQAAAAAAANEty9DknkCjioltiArqvAAAAA/8QAIBEBAAICAQQDAAAAAAAAAAAAAQARECExMEFRYSCRsf/aAAgBAwEBPxDrKG2X1OM8kx7BL+ItE5MoTCL8Bqt5laZW94BWia9n8iq2yst3y4xK+X1HShRhV6gVowFRNiF35iXE9cV3ACjp/wD/xAAcEQACAgIDAAAAAAAAAAAAAAABEQAQIEEwMVH/2gAIAQIBAT8Q5wXZARKPCSYCFahgoDOXVDuyhUQHcflMttRVCQiMHuALj//EACUQAQABAwMDBQEBAAAAAAAAAAERACExQWGBEHGhMFGRscEg0f/aAAgBAQABPxD1svViA+auiElpLweHV2B5GZspY5aAZ7T8WaeMjpN9AqIC2f8AVbp1cO04rVUIIZuv2IOOi6wWIdY7GN/4ljjsNngDoZc4iXhJN2N/AjmgAgsU4GUT4pyyFVyvR9TwOVe1QZRsCHb6bWDekkDISrUKcbppbvLBx0QCJI2aOgLdIIkBj9ofKRqE5wOFqEJMI/nTYg26G0Kjt+zd8Zo+oglgYOjrVq4PZZdM4vTGblwoNInHvN6ZaDOXkxzFaDikH6rUecg/h5O1BLC32Lq7+n//2Q==","labels":{"lb_comments":"Comments","lb_creation_date":"Creation date","lb_description":"Description","lb_direction":"Direction","lb_in":"INCOMING","lb_movement":"TOOL MOVEMENT","lb_no":"No.","lb_yes":"YES","lb_out":"OUTGOING","lb_reference":"Reference","lb_reftype":"Ref.type","lb_serial":"Serial","lb_shipping":"Shipping","lb_signature_1":"CHECKED BY","lb_signature_2":"APPROVED BY","lb_transnumber":"Doc.No.","web_link":"http://nervatura.com","web_page":"www.nervatura.com"}}}